# suzumina.click ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæ¦‚è¦

å£°å„ªã€Œæ¶¼èŠ±ã¿ãªã›ã€ã®ãƒ•ã‚¡ãƒ³ã‚µã‚¤ãƒˆ - ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒä½œæˆã™ã‚‹éŸ³å£°ãƒœã‚¿ãƒ³ã®å…±æœ‰ã¨DLsiteä½œå“æƒ…å ±ã‚’è¡¨ç¤º

## ğŸ¯ ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæ¦‚è¦

suzumina.clickã¯ã€å£°å„ªã€Œæ¶¼èŠ±ã¿ãªã›ã€ãƒ•ã‚¡ãƒ³ã‚³ãƒŸãƒ¥ãƒ‹ãƒ†ã‚£ã®ãŸã‚ã®Webãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ ã§ã™ã€‚YouTubeå‹•ç”»ã®éŸ³å£°å‚ç…§æ©Ÿèƒ½ã€å®ŸéŸ³å£°ãƒ•ã‚¡ã‚¤ãƒ«ãƒœã‚¿ãƒ³ã€DLsiteä½œå“æƒ…å ±é–²è¦§ã€ãã—ã¦åŒ…æ‹¬çš„ãªç®¡ç†è€…æ©Ÿèƒ½ã‚’æä¾›ã—ã¾ã™ã€‚

### é–‹ç™ºçŠ¶æ³

**âœ… å®Œäº†æ¸ˆã¿**

- **Discordã‚®ãƒ«ãƒ‰èªè¨¼ã‚·ã‚¹ãƒ†ãƒ **: NextAuth + Discord OAuth + ã‚®ãƒ«ãƒ‰ãƒ¡ãƒ³ãƒãƒ¼ã‚·ãƒƒãƒ—ç¢ºèª
- **ãƒ¦ãƒ¼ã‚¶ãƒ¼ç®¡ç†æ©Ÿèƒ½**: FirestoreåŸºç›¤ã®ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ—ãƒ­ãƒ•ã‚¡ã‚¤ãƒ«ãƒ»ãƒ­ãƒ¼ãƒ«ç®¡ç†ãƒ»ã‚»ãƒƒã‚·ãƒ§ãƒ³ç®¡ç†
- **ãƒ‡ãƒ¼ã‚¿åé›†ã‚¤ãƒ³ãƒ•ãƒ©**: YouTubeãƒ“ãƒ‡ã‚ªãƒ»DLsiteä½œå“æƒ…å ±ã®è‡ªå‹•å–å¾—ã‚·ã‚¹ãƒ†ãƒ 
- **ã‚¤ãƒ³ãƒ•ãƒ©åŸºç›¤**: Terraformã«ã‚ˆã‚‹GCPãƒªã‚½ãƒ¼ã‚¹ç®¡ç†ï¼ˆ2ç’°å¢ƒæ§‹æˆãƒ»ã‚³ã‚¹ãƒˆæœ€é©åŒ–ï¼‰
- **å…±æœ‰å‹å®šç¾©**: Zodã‚¹ã‚­ãƒ¼ãƒã‚’ä½¿ç”¨ã—ãŸå‹å®‰å…¨ãªãƒ‡ãƒ¼ã‚¿æ§‹é€ 
- **é–‹ç™ºç’°å¢ƒ**: é–‹ç™ºãƒ„ãƒ¼ãƒ«ã‚’å«ã‚€Monorepoã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—
- **æœ¬ç•ªWebã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³** (`apps/web`): ãƒšãƒ¼ã‚¸ãƒãƒ¼ã‚·ãƒ§ãƒ³ä»˜ãå‹•ç”»ãƒ»ä½œå“ä¸€è¦§è¡¨ç¤º
- **éŸ³å£°ã‚·ã‚¹ãƒ†ãƒ ** (`apps/web`): ã‚¿ã‚¤ãƒ ã‚¹ã‚¿ãƒ³ãƒ—å‚ç…§ + å®ŸéŸ³å£°ãƒ•ã‚¡ã‚¤ãƒ«ãƒœã‚¿ãƒ³ã®äºŒé‡ã‚·ã‚¹ãƒ†ãƒ 
- **ç®¡ç†è€…ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹** (`apps/web/admin`): ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ»å‹•ç”»ãƒ»ä½œå“ã®åŒ…æ‹¬çš„ç®¡ç†æ©Ÿèƒ½
- **åŒ…æ‹¬çš„ãƒ†ã‚¹ãƒˆã‚¹ã‚¤ãƒ¼ãƒˆ**: 388+ä»¶ã®ãƒ†ã‚¹ãƒˆã§å…¨é‡è¦æ©Ÿèƒ½ã‚’ã‚«ãƒãƒ¼ï¼ˆE2Eå«ã‚€å®Œå…¨ãƒ†ã‚¹ãƒˆï¼‰


## ğŸ—ï¸ ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£

```console
å¤–éƒ¨ã‚µãƒ¼ãƒ“ã‚¹ â†’ Cloud Scheduler â†’ Pub/Sub â†’ Cloud Functions â†’ Firestore â†’ Next.js Webã‚¢ãƒ—ãƒª
     â†“              â†“              â†“         â†“              â†“           â†“
YouTube API    å®šæœŸå®Ÿè¡Œ         éåŒæœŸ      ãƒ‡ãƒ¼ã‚¿åé›†      NoSQLã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸  ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰
DLsite         (Productionç’°å¢ƒ)  ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸   (Function v2)   (å‹å®‰å…¨)      (App Router)
               â†“                                            â†“              â†“
              ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ä½œæˆ                    ç®¡ç†è€…ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹  ä¸€èˆ¬ãƒ¦ãƒ¼ã‚¶ãƒ¼UI
                  â†“                                        â†“              â†“
            éŸ³å£°å‚ç…§ + éŸ³å£°ãƒœã‚¿ãƒ³                      ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ»ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ç®¡ç†  ã‚³ãƒ³ãƒ†ãƒ³ãƒ„é–²è¦§
                  â†“                                        â†“              â†“
          ã‚¿ã‚¤ãƒ ã‚¹ã‚¿ãƒ³ãƒ— + å®ŸéŸ³å£°ãƒ•ã‚¡ã‚¤ãƒ«              ãƒ­ãƒ¼ãƒ«ç®¡ç†ãƒ»çµ±è¨ˆè¡¨ç¤º   éŸ³å£°å†ç”Ÿãƒ»æ¤œç´¢
```

## ğŸ› ï¸ æŠ€è¡“ã‚¹ã‚¿ãƒƒã‚¯

### ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰

- **Next.js 15.3.4** - Reactãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ (App Router)
- **TypeScript 5.8.3** - å‹å®‰å…¨æ€§
- **Tailwind CSS v4** - UIã‚¹ã‚¿ã‚¤ãƒªãƒ³ã‚° (PostCSSè¨­å®š)
- **Storybook 9.0.12** - UIã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆé–‹ç™ºãƒ»ãƒ†ã‚¹ãƒˆ
- **Radix UI** - ã‚¢ã‚¯ã‚»ã‚·ãƒ–ãƒ«UIã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ (`packages/ui`)
- **React 19.1.0** - æœ€æ–°Reactæ©Ÿèƒ½

### ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ãƒ»èªè¨¼

- **NextAuth.js** - Discord OAuthèªè¨¼ãƒ»ã‚»ãƒƒã‚·ãƒ§ãƒ³ç®¡ç†
- **Discord OAuth Provider** - ã‚®ãƒ«ãƒ‰ãƒ¡ãƒ³ãƒãƒ¼ã‚·ãƒƒãƒ—ç¢ºèªã«ã‚ˆã‚‹èªè¨¼
- **Google Cloud Functions v2 (Node.js 22)** - ã‚µãƒ¼ãƒãƒ¼ãƒ¬ã‚¹é–¢æ•° (YouTube/DLsite ãƒ‡ãƒ¼ã‚¿åé›†)
- **Google Cloud Firestore** - NoSQLãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ (Native mode + è¤‡åˆã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ + ãƒ¦ãƒ¼ã‚¶ãƒ¼ç®¡ç†)
- **Google Cloud Storage** - ãƒ•ã‚¡ã‚¤ãƒ«ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ (ãƒ‡ãƒ—ãƒ­ã‚¤ã‚¢ãƒ¼ãƒ†ã‚£ãƒ•ã‚¡ã‚¯ãƒˆã€éŸ³å£°ãƒ•ã‚¡ã‚¤ãƒ«ç”¨)
- **Google Cloud Pub/Sub** - éåŒæœŸãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãƒ³ã‚° (Scheduler â†’ Functions)
- **Google Cloud Scheduler** - å®šæœŸå®Ÿè¡Œã‚¿ã‚¹ã‚¯ (Productionç’°å¢ƒã®ã¿)
- **Google Secret Manager** - APIã‚­ãƒ¼ãƒ»ã‚·ãƒ¼ã‚¯ãƒ¬ãƒƒãƒˆç®¡ç† (Discordèªè¨¼æƒ…å ±ãƒ»NextAuth Secret)
- **YouTube Embed API** - å‹•ç”»ã®ç‰¹å®šåŒºé–“å†ç”Ÿ

### ã‚¤ãƒ³ãƒ•ãƒ©ãƒ»DevOps

- **Terraform** - Infrastructure as Code (2ç’°å¢ƒæ§‹æˆãƒ»ã‚³ã‚¹ãƒˆæœ€é©åŒ–)
- **GitHub Actions** - CI/CDãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³ (Workload Identityé€£æº)
- **Google Cloud Build** - ã‚³ãƒ³ãƒ†ãƒŠãƒ“ãƒ«ãƒ‰ãƒ»ãƒ‡ãƒ—ãƒ­ã‚¤
- **Google Cloud Monitoring** - ç›£è¦–ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ãƒ»ã‚¢ãƒ©ãƒ¼ãƒˆãƒ»äºˆç®—ç®¡ç†
- **pnpm 10** - ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ãƒãƒãƒ¼ã‚¸ãƒ£ãƒ¼ (Workspaceã‚µãƒãƒ¼ãƒˆ)
- **Biome** - ãƒªãƒ³ã‚¿ãƒ¼ãƒ»ãƒ•ã‚©ãƒ¼ãƒãƒƒã‚¿ãƒ¼
- **Lefthook** - Gitãƒ•ãƒƒã‚¯
- **Vitest** - ãƒ†ã‚¹ãƒˆãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯

### å¤–éƒ¨API

- **YouTube Data API v3** - å‹•ç”»æƒ…å ±å–å¾—
- **DLsite** - Webã‚¹ã‚¯ãƒ¬ã‚¤ãƒ”ãƒ³ã‚° (Cheerioä½¿ç”¨)

## ğŸ“ ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæ§‹é€ 

```console
suzumina.click/                    # Monorepoãƒ«ãƒ¼ãƒˆ (v0.2.1)
â”œâ”€â”€ apps/
â”‚   â”œâ”€â”€ functions/                 # Cloud Functions (æœ¬ç•ªç¨¼åƒä¸­)
â”‚   â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”‚   â”œâ”€â”€ dlsite.ts         # DLsiteä½œå“å–å¾— (20åˆ†é–“éš”)
â”‚   â”‚   â”‚   â”œâ”€â”€ youtube.ts        # YouTubeå‹•ç”»å–å¾— (æ¯æ™‚19åˆ†)
â”‚   â”‚   â”‚   â”œâ”€â”€ index.ts          # Functions ã‚¨ãƒ³ãƒˆãƒªãƒ¼ãƒã‚¤ãƒ³ãƒˆ
â”‚   â”‚   â”‚   â””â”€â”€ utils/            # å…±é€šãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£ (157ä»¶ãƒ†ã‚¹ãƒˆ)
â”‚   â”‚   â”œâ”€â”€ lib/                  # ãƒ“ãƒ«ãƒ‰æˆæœç‰©
â”‚   â”‚   â”œâ”€â”€ coverage/             # ãƒ†ã‚¹ãƒˆã‚«ãƒãƒ¬ãƒƒã‚¸
â”‚   â”‚   â””â”€â”€ package.json          # @suzumina.click/functions v0.2.1
â”‚   â”œâ”€â”€ web/                      # æœ¬ç•ªWebã‚¢ãƒ—ãƒª (æ©Ÿèƒ½å®Œå‚™)
â”‚   â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”‚   â”œâ”€â”€ app/             # Next.js App Router
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ layout.tsx   # ãƒ«ãƒ¼ãƒˆãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆ
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ page.tsx     # ãƒ›ãƒ¼ãƒ ãƒšãƒ¼ã‚¸ (ãƒšãƒ¼ã‚¸ãƒãƒ¼ã‚·ãƒ§ãƒ³å¯¾å¿œ)
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ actions.ts   # Server Actions
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ admin/       # ğŸ†• ç®¡ç†è€…ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ layout.tsx    # ç®¡ç†è€…å°‚ç”¨ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆ
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ users/        # ãƒ¦ãƒ¼ã‚¶ãƒ¼ç®¡ç†
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ videos/       # å‹•ç”»ç®¡ç†
â”‚   â”‚   â”‚   â”‚   â”‚   â””â”€â”€ works/        # ä½œå“ç®¡ç†
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ works/       # DLsiteä½œå“é–¢é€£ (å®Ÿè£…æ¸ˆã¿)
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ videos/      # YouTubeå‹•ç”»é–¢é€£ (å®Ÿè£…æ¸ˆã¿)
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ buttons/     # éŸ³å£°æ©Ÿèƒ½ (å‚ç…§+ãƒœã‚¿ãƒ³ãƒ»å®Œäº†)
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ auth/        # èªè¨¼é–¢é€£ãƒšãƒ¼ã‚¸
â”‚   â”‚   â”‚   â”œâ”€â”€ components/      # UIã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ (229ä»¶ãƒ†ã‚¹ãƒˆ)
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ AdminList.tsx      # ç®¡ç†è€…ç”¨ä¸€è¦§ (æ±ç”¨) âœ…
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ AdminListItem.tsx  # ç®¡ç†è€…ç”¨ã‚¢ã‚¤ãƒ†ãƒ  (æ±ç”¨) âœ…
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ VideoList.tsx      # å‹•ç”»ä¸€è¦§ (Server Component) âœ…
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ AudioReferenceCreator.tsx # éŸ³å£°å‚ç…§ä½œæˆ (15ä»¶ãƒ†ã‚¹ãƒˆ) âœ…
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ AudioReferenceCard.tsx   # éŸ³å£°å‚ç…§è¡¨ç¤º (10ä»¶ãƒ†ã‚¹ãƒˆ) âœ…
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ YouTubePlayer.tsx        # YouTubeåŸ‹ã‚è¾¼ã¿å†ç”Ÿ (44ä»¶ãƒ†ã‚¹ãƒˆ) âœ…
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ Pagination.tsx     # ãƒšãƒ¼ã‚¸ãƒãƒ¼ã‚·ãƒ§ãƒ³ (10ä»¶ãƒ†ã‚¹ãƒˆ) âœ…
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ ThumbnailImage.tsx # ã‚µãƒ ãƒã‚¤ãƒ«ç”»åƒ (15ä»¶ãƒ†ã‚¹ãƒˆ) âœ…
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ SearchForm.tsx     # æ¤œç´¢ãƒ•ã‚©ãƒ¼ãƒ  (15ä»¶ãƒ†ã‚¹ãƒˆ) âœ…
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ SiteHeader.tsx     # ã‚µã‚¤ãƒˆãƒ˜ãƒƒãƒ€ãƒ¼ (10ä»¶ãƒ†ã‚¹ãƒˆ) âœ…
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ SiteFooter.tsx     # ã‚µã‚¤ãƒˆãƒ•ãƒƒã‚¿ãƒ¼ (9ä»¶ãƒ†ã‚¹ãƒˆ) âœ…
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ AuthButton.tsx     # èªè¨¼ãƒœã‚¿ãƒ³ âœ…
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ UserAvatar.tsx     # ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚¢ãƒã‚¿ãƒ¼ âœ…
â”‚   â”‚   â”‚   â””â”€â”€ lib/             # ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£
â”‚   â”‚   â”‚       â”œâ”€â”€ firestore.ts      # Firestoreæ¥ç¶š
â”‚   â”‚   â”‚       â””â”€â”€ user-firestore.ts # ãƒ¦ãƒ¼ã‚¶ãƒ¼ç®¡ç†å°‚ç”¨
â”‚   â”‚   â”œâ”€â”€ e2e/                  # ğŸ†• Playwright E2E ãƒ†ã‚¹ãƒˆ
â”‚   â”‚   â”‚   â”œâ”€â”€ audio-buttons.spec.ts  # éŸ³å£°ãƒœã‚¿ãƒ³ãƒ†ã‚¹ãƒˆ
â”‚   â”‚   â”‚   â”œâ”€â”€ audio-reference.spec.ts # éŸ³å£°å‚ç…§ãƒ†ã‚¹ãƒˆ
â”‚   â”‚   â”‚   â”œâ”€â”€ home.spec.ts          # ãƒ›ãƒ¼ãƒ ãƒšãƒ¼ã‚¸ãƒ†ã‚¹ãƒˆ
â”‚   â”‚   â”‚   â””â”€â”€ videos.spec.ts        # å‹•ç”»ãƒšãƒ¼ã‚¸ãƒ†ã‚¹ãƒˆ
â”‚   â”‚   â”œâ”€â”€ .storybook/           # Web Appå°‚ç”¨Storybookè¨­å®š
â”‚   â”‚   â””â”€â”€ package.json          # @suzumina.click/web v0.2.1
â”œâ”€â”€ packages/
â”‚   â”œâ”€â”€ shared-types/             # å…±æœ‰å‹å®šç¾© (é‡è¦) v0.2.1
â”‚   â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”‚   â”œâ”€â”€ common.ts         # å…±é€šå‹ãƒ»ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£
â”‚   â”‚   â”‚   â”œâ”€â”€ video.ts          # YouTubeå‹•ç”»å‹å®šç¾©
â”‚   â”‚   â”‚   â”œâ”€â”€ work.ts           # DLsiteä½œå“å‹å®šç¾©
â”‚   â”‚   â”‚   â”œâ”€â”€ audio-reference.ts # éŸ³å£°å‚ç…§å‹å®šç¾©ï¼ˆã‚¿ã‚¤ãƒ ã‚¹ã‚¿ãƒ³ãƒ—ãƒ™ãƒ¼ã‚¹ï¼‰
â”‚   â”‚   â”‚   â”œâ”€â”€ audio-button.ts   # ğŸ†• éŸ³å£°ãƒœã‚¿ãƒ³å‹å®šç¾©ï¼ˆå®Ÿãƒ•ã‚¡ã‚¤ãƒ«ãƒ™ãƒ¼ã‚¹ï¼‰
â”‚   â”‚   â”‚   â”œâ”€â”€ user.ts           # ãƒ¦ãƒ¼ã‚¶ãƒ¼ç®¡ç†å‹å®šç¾©ï¼ˆæ‹¡å¼µæ¸ˆã¿ï¼‰
â”‚   â”‚   â”‚   â””â”€â”€ firestore-utils.ts # Firestoreå¤‰æ›ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£
â”‚   â”‚   â””â”€â”€ dist/                 # ãƒ“ãƒ«ãƒ‰æˆæœç‰©
â”‚   â”œâ”€â”€ ui/                       # å…±æœ‰UIã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ v0.2.1
â”‚   â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”‚   â”œâ”€â”€ components/       # Radix UI ãƒ™ãƒ¼ã‚¹ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ button.tsx    # ãƒœã‚¿ãƒ³ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ pagination.tsx # ãƒšãƒ¼ã‚¸ãƒãƒ¼ã‚·ãƒ§ãƒ³ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ card.tsx      # ã‚«ãƒ¼ãƒ‰ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ audio-player.tsx # ğŸ†• éŸ³å£°ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼ (4ä»¶ãƒ†ã‚¹ãƒˆ)
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ form-fields.tsx  # ãƒ•ã‚©ãƒ¼ãƒ ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰
â”‚   â”‚   â”‚   â””â”€â”€ styles/           # Tailwind CSS v4è¨­å®š
â”‚   â”‚   â”‚       â””â”€â”€ globals.css   # ã‚°ãƒ­ãƒ¼ãƒãƒ«ã‚¹ã‚¿ã‚¤ãƒ«
â”‚   â”‚   â””â”€â”€ .storybook/           # UIå°‚ç”¨Storybookè¨­å®š
â”‚   â””â”€â”€ typescript-config/        # å…±æœ‰TypeScriptè¨­å®š v0.2.1
â”œâ”€â”€ terraform/                    # ã‚¤ãƒ³ãƒ•ãƒ©å®šç¾© (æœ¬ç•ª)
â”‚   â”œâ”€â”€ function_*.tf             # Cloud Functionsè¨­å®š
â”‚   â”œâ”€â”€ scheduler.tf              # ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«å®Ÿè¡Œè¨­å®š
â”‚   â”œâ”€â”€ firestore_*.tf            # Firestoreè¨­å®š
â”‚   â””â”€â”€ variables.tf              # å¤‰æ•°å®šç¾©
â”œâ”€â”€ docs/                         # ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ
â”‚   â”œâ”€â”€ README.md                 # è©³ç´°ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆä»•æ§˜
â”‚   â”œâ”€â”€ POLICY.md                 # é–‹ç™ºãƒãƒªã‚·ãƒ¼
â”‚   â”œâ”€â”€ TODO.md                   # ã‚¿ã‚¹ã‚¯ç®¡ç†
â”‚   â”œâ”€â”€ CHANGELOG.md              # å¤‰æ›´å±¥æ­´
â”‚   â””â”€â”€ FIRESTORE_STRUCTURE.md    # Firestoreãƒ‡ãƒ¼ã‚¿æ§‹é€ 
â”œâ”€â”€ coverage/                     # å…¨ä½“ãƒ†ã‚¹ãƒˆã‚«ãƒãƒ¬ãƒƒã‚¸
â”œâ”€â”€ biome.json                    # ãƒªãƒ³ã‚¿ãƒ¼ãƒ»ãƒ•ã‚©ãƒ¼ãƒãƒƒã‚¿ãƒ¼è¨­å®š
â”œâ”€â”€ lefthook.yml                  # Gitãƒ•ãƒƒã‚¯è¨­å®š
â”œâ”€â”€ mise.toml                     # é–‹ç™ºç’°å¢ƒãƒ„ãƒ¼ãƒ«ç®¡ç†
â”œâ”€â”€ pnpm-workspace.yaml           # pnpm Workspaceè¨­å®š
â”œâ”€â”€ vitest.workspace.ts           # ãƒ†ã‚¹ãƒˆè¨­å®š
â””â”€â”€ package.json                  # Workspaceè¨­å®š
```

## ğŸ“Š ãƒ‡ãƒ¼ã‚¿æ§‹é€ 

### YouTubeå‹•ç”»ãƒ‡ãƒ¼ã‚¿ (`FirestoreYouTubeVideoData`)

- `id`, `title`, `description` - åŸºæœ¬æƒ…å ±
- `publishedAt`, `duration` - æ™‚é–“é–¢é€£ãƒ‡ãƒ¼ã‚¿
- `thumbnailUrl`, `viewCount`, `likeCount` - è¡¨ç¤ºæƒ…å ±
- `tags`, `channelId` - ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿
- `lastFetchedAt`, `createdAt`, `updatedAt` - ç®¡ç†æƒ…å ±

### DLsiteä½œå“ãƒ‡ãƒ¼ã‚¿ (`FirestoreDLsiteWorkData`)

- `productId` (RJ123456), `title`, `circle` - åŸºæœ¬æƒ…å ±
- `author[]`, `category`, `workUrl` - è©³ç´°æƒ…å ±
- `price`, `rating`, `salesCount` - è²©å£²æƒ…å ±
- `tags`, `thumbnailUrl` - è¡¨ç¤ºæƒ…å ±
- `lastFetchedAt`, `createdAt`, `updatedAt` - ç®¡ç†æƒ…å ±

### éŸ³å£°å‚ç…§ãƒ‡ãƒ¼ã‚¿ (`FirestoreAudioReferenceData`)

- `id`, `title`, `description` - åŸºæœ¬æƒ…å ±
- `videoId`, `startTime`, `endTime` - YouTubeå‹•ç”»å‚ç…§æƒ…å ±
- `youtubeEmbedUrl` - åŸ‹ã‚è¾¼ã¿å†ç”ŸURL
- `tags[]`, `category` - åˆ†é¡æƒ…å ±
- `createdBy`, `isPublic` - ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ»å…¬é–‹è¨­å®š
- `playCount` - çµ±è¨ˆæƒ…å ±
- `createdAt`, `updatedAt` - ç®¡ç†æƒ…å ±

### éŸ³å£°ãƒœã‚¿ãƒ³ãƒ‡ãƒ¼ã‚¿ (`FirestoreAudioButtonData`) ğŸ†•

- `id`, `title`, `description` - åŸºæœ¬æƒ…å ±
- `audioFileUrl`, `duration`, `fileSize` - éŸ³å£°ãƒ•ã‚¡ã‚¤ãƒ«æƒ…å ±
- `category` - `voice`, `bgm`, `se`, `talk`, `singing`, `other`
- `tags[]`, `isPublic` - åˆ†é¡ãƒ»å…¬é–‹è¨­å®š
- `createdBy`, `uploadedBy` - ä½œæˆè€…ãƒ»ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰è€…
- `playCount`, `downloadCount` - çµ±è¨ˆæƒ…å ±
- `createdAt`, `updatedAt` - ç®¡ç†æƒ…å ±

### ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ‡ãƒ¼ã‚¿ (`FirestoreUserData`)

- `discordId`, `username`, `globalName` - DiscordåŸºæœ¬æƒ…å ±
- `avatar`, `displayName` - è¡¨ç¤ºæƒ…å ±
- `guildMembership` - Discord ã‚®ãƒ«ãƒ‰æ‰€å±ç¢ºèªæƒ…å ±
- `role` - ã‚¢ãƒ—ãƒªå†…æ¨©é™ (member/moderator/admin)
- `audioReferencesCount`, `totalPlayCount` - çµ±è¨ˆæƒ…å ±
- `isActive`, `isPublicProfile`, `showStatistics` - çŠ¶æ…‹ãƒ»ãƒ—ãƒ©ã‚¤ãƒã‚·ãƒ¼è¨­å®š
- `createdAt`, `updatedAt`, `lastLoginAt` - ç®¡ç†æƒ…å ±

## ğŸš€ é–‹ç™ºã‚³ãƒãƒ³ãƒ‰

### ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—

```bash
# ä¾å­˜é–¢ä¿‚ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
pnpm install

# å…±æœ‰å‹ã®ãƒ“ãƒ«ãƒ‰ (å¿…é ˆ)
pnpm --filter @suzumina.click/shared-types build

# Functionsæº–å‚™ (ãƒ‡ãƒ—ãƒ­ã‚¤å‰)
pnpm prepare:functions

# E2Eãƒ†ã‚¹ãƒˆæº–å‚™ (Playwright)
pnpm --filter @suzumina.click/web exec playwright install
```

### é–‹ç™ºã‚µãƒ¼ãƒãƒ¼

```bash
# æœ¬ç•ªWebã‚¢ãƒ—ãƒªé–‹ç™º (å®Ÿéš›ã®Firestoreãƒ‡ãƒ¼ã‚¿ã‚’ä½¿ç”¨)
cd apps/web && pnpm dev


# Storybooké–‹ç™º (UIã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ)
cd apps/web && pnpm storybook        # Webå°‚ç”¨ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ
cd packages/ui && pnpm storybook     # å…±æœ‰UIã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ
```

### é–‹ç™ºç”¨Google Cloudã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—

Webã‚¢ãƒ—ãƒªã¯ `suzumina-click` GCPãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã«æ¥ç¶šã—ã¾ã™:

```bash
# 1. Google Cloud SDKã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
brew install google-cloud-sdk

# 2. Application Default Credentialsã§èªè¨¼
gcloud auth application-default login

# 3. ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚¢ã‚¯ã‚»ã‚¹ã®ç¢ºèª
gcloud firestore databases list --project=suzumina-click

# 4. é–‹ç™ºã‚µãƒ¼ãƒãƒ¼èµ·å‹• (å®Ÿéš›ã®Firestoreãƒ‡ãƒ¼ã‚¿ã«æ¥ç¶š)
cd apps/web && pnpm dev
```

### ãƒ†ã‚¹ãƒˆãƒ»å“è³ªç®¡ç†

```bash
pnpm test              # ãƒ†ã‚¹ãƒˆå®Ÿè¡Œ (388+ä»¶)
pnpm test:coverage     # ã‚«ãƒãƒ¬ãƒƒã‚¸ä»˜ããƒ†ã‚¹ãƒˆå®Ÿè¡Œ
pnpm lint              # å…¨ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã®Lint
pnpm format            # å…¨ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã®ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆ
pnpm check             # Lint + ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆ
pnpm typecheck         # ğŸ†• å‹ãƒã‚§ãƒƒã‚¯
pnpm build             # å…¨ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã®ãƒ“ãƒ«ãƒ‰

# ã‚¯ãƒªãƒ¼ãƒ³ã‚¢ãƒƒãƒ— ğŸ†•
pnpm clean             # ç”Ÿæˆãƒ•ã‚¡ã‚¤ãƒ«ã®ã‚¯ãƒªãƒ¼ãƒ³ã‚¢ãƒƒãƒ— (coverage, dist, .nextç­‰)
pnpm clean:all         # å…¨ã‚¯ãƒªãƒ¼ãƒ³ã‚¢ãƒƒãƒ— (node_moduleså«ã‚€)

# ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸å€‹åˆ¥ã‚¯ãƒªãƒ¼ãƒ³ã‚¢ãƒƒãƒ—
pnpm --filter @suzumina.click/ui clean          # UIãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ (coverage, storybook-staticç­‰)
pnpm --filter @suzumina.click/shared-types clean # å…±æœ‰å‹ (dist, *.tgzç­‰)
pnpm --filter @suzumina.click/web clean         # Webã‚¢ãƒ—ãƒª (.next, test-resultsç­‰)
pnpm --filter @suzumina.click/functions clean   # Functions (lib, *.tgzç­‰)

# E2Eãƒ†ã‚¹ãƒˆ
cd apps/web && pnpm test:e2e        # Playwright E2Eå®Ÿè¡Œ
cd apps/web && pnpm test:e2e:ui     # E2E UIãƒ¢ãƒ¼ãƒ‰
```

### ä¾å­˜é–¢ä¿‚ã®å®‰å…¨ãªæ›´æ–° ğŸ†•

**âš ï¸ é‡è¦: `pnpm update --latest` ã¯ä½¿ç”¨ç¦æ­¢**

```bash
# ğŸ“… æ—¥å¸¸çš„ãªå®‰å…¨æ›´æ–° (é€±æ¬¡æ¨å¥¨)
pnpm update                    # ã‚»ãƒãƒ³ãƒ†ã‚£ãƒƒã‚¯ãƒãƒ¼ã‚¸ãƒ§ãƒ³ç¯„å›²å†…ã®ã¿
pnpm update --dev             # é–‹ç™ºä¾å­˜é–¢ä¿‚ã®ã¿
pnpm audit --fix              # ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ä¿®æ­£ã®ã¿

# ğŸ¯ è¨ˆç”»çš„ãªæ›´æ–° (æœˆæ¬¡æ¨å¥¨)
pnpm outdated                 # æ›´æ–°å¯èƒ½ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ç¢ºèª
pnpm add @types/react@latest  # å‹å®šç¾©ã®å€‹åˆ¥æ›´æ–°
pnpm add typescript@latest    # TypeScriptå€‹åˆ¥æ›´æ–°

# ğŸ›¡ï¸ è‡ªå‹•åŒ–ã‚¹ã‚¯ãƒªãƒ—ãƒˆä½¿ç”¨
./scripts/safe-update.sh patch    # ãƒ‘ãƒƒãƒæ›´æ–°ã®ã¿
./scripts/safe-update.sh minor    # ãƒã‚¤ãƒŠãƒ¼æ›´æ–°å«ã‚€
./scripts/safe-update.sh dev      # é–‹ç™ºä¾å­˜é–¢ä¿‚ã®ã¿
./scripts/safe-update.sh security # ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ä¿®æ­£ã®ã¿

# âš¡ å„æ›´æ–°å¾Œã®å¿…é ˆç¢ºèª
pnpm test && pnpm typecheck && pnpm build
```

**ğŸš¨ ç‰¹ã«æ³¨æ„ãŒå¿…è¦ãªãƒ‘ãƒƒã‚±ãƒ¼ã‚¸:**
- `next-auth@5.0.0-beta.28` + `@auth/core@0.39.1` (å›ºå®šãƒãƒ¼ã‚¸ãƒ§ãƒ³)
- `next`, `react`, `react-dom` (ãƒ¡ã‚¸ãƒ£ãƒ¼ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã¯æ…é‡ã«)
- `recharts` (v3.0.0ã¯å‹äº’æ›æ€§å•é¡Œ)

**ğŸ“‹ æ›´æ–°æ‰‹é †:**
1. ç¾çŠ¶ç¢ºèª: `pnpm outdated`
2. å€‹åˆ¥æ›´æ–°: `pnpm add package@latest` 
3. ãƒ†ã‚¹ãƒˆå®Ÿè¡Œ: `pnpm test && pnpm typecheck && pnpm build`
4. E2Eç¢ºèª: `pnpm test:e2e`
5. ã‚³ãƒŸãƒƒãƒˆãƒ»ãƒ¬ãƒ“ãƒ¥ãƒ¼

è©³ç´°: `docs/DEPENDENCY_UPDATE_STRATEGY.md`

### Cloud Functions

```bash
cd apps/functions
pnpm build             # TypeScriptãƒ“ãƒ«ãƒ‰
pnpm test              # Functionså˜ä½“ãƒ†ã‚¹ãƒˆ
```

## ğŸ”„ ãƒ‡ãƒ¼ã‚¿ãƒ•ãƒ­ãƒ¼

### è‡ªå‹•ãƒ‡ãƒ¼ã‚¿åé›† (æœ¬ç•ª)

**1. å®šæœŸãƒ‡ãƒ¼ã‚¿åé›†ãƒ•ãƒ­ãƒ¼**
```
Cloud Scheduler (å®šæœŸå®Ÿè¡Œ)
    â†“ (Pub/Sub message)
Pub/Sub Topics (éåŒæœŸãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãƒ³ã‚°)
    â†“ (CloudEvent trigger)
Cloud Functions v2 (Node.js 22)
    â”‚
    â”œâ”€ fetchYouTubeVideos (æ¯æ™‚19åˆ†) â†’ YouTube Data API v3
    â””â”€ fetchDLsiteWorks (6,26,46åˆ†/æ™‚é–“) â†’ DLsite Webã‚¹ã‚¯ãƒ¬ã‚¤ãƒ”ãƒ³ã‚°
    â†“ (ãƒ‡ãƒ¼ã‚¿ä¿å­˜)
Firestore Database (Native mode)
    â”œâ”€ videos collection (å‹å®‰å…¨ãƒ‡ãƒ¼ã‚¿ + è¤‡åˆã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹)
    â””â”€ works collection (ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿ + ãƒ©ã‚¤ãƒ•ã‚µã‚¤ã‚¯ãƒ«ç®¡ç†)
```

**2. Discordèªè¨¼ãƒ»ãƒ¦ãƒ¼ã‚¶ãƒ¼ç®¡ç†ãƒ•ãƒ­ãƒ¼**

```console
ãƒ¦ãƒ¼ã‚¶ãƒ¼ â†’ Discord OAuth â†’ NextAuth.js
    â†“ (èªè¨¼æˆåŠŸ)
Discord Guild API â†’ ã‚®ãƒ«ãƒ‰ãƒ¡ãƒ³ãƒãƒ¼ã‚·ãƒƒãƒ—ç¢ºèª
    â†“ (ã‚®ãƒ«ãƒ‰ãƒ¡ãƒ³ãƒãƒ¼ã®å ´åˆ)
Firestore users collection â†’ ãƒ¦ãƒ¼ã‚¶ãƒ¼æƒ…å ±ä½œæˆãƒ»æ›´æ–°
    â†“ (ã‚»ãƒƒã‚·ãƒ§ãƒ³ç¢ºç«‹)
JWT ã‚»ãƒƒã‚·ãƒ§ãƒ³ â†’ èªè¨¼çŠ¶æ…‹ç®¡ç†
```

**3. éŸ³å£°ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ä½œæˆãƒ•ãƒ­ãƒ¼ (äºŒé‡ã‚·ã‚¹ãƒ†ãƒ )**

```console
èªè¨¼æ¸ˆã¿ãƒ¦ãƒ¼ã‚¶ãƒ¼
    â”‚
    â”œâ”€ éŸ³å£°å‚ç…§ä½œæˆ (AudioReferenceCreator)
    â”‚   â”œâ”€ YouTubeå‹•ç”»é¸æŠ
    â”‚   â”œâ”€ æ™‚é–“ç¯„å›²æŒ‡å®š (é–‹å§‹ãƒ»çµ‚äº†æ™‚åˆ»)
    â”‚   â””â”€ ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿å…¥åŠ› (ã‚¿ã‚¤ãƒˆãƒ«ã€ã‚¿ã‚°ç­‰)
    â”‚
    â””â”€ éŸ³å£°ãƒœã‚¿ãƒ³ä½œæˆ (AudioButtonCreator) ğŸ†•
        â”œâ”€ éŸ³å£°ãƒ•ã‚¡ã‚¤ãƒ«ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰
        â”œâ”€ ã‚«ãƒ†ã‚´ãƒªé¸æŠ (voice/bgm/se/talk/singing/other)
        â””â”€ ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿å…¥åŠ› (ã‚¿ã‚¤ãƒˆãƒ«ã€ã‚¿ã‚°ç­‰)
    â†“ (Server Actions + ãƒ¦ãƒ¼ã‚¶ãƒ¼èªè¨¼ç¢ºèª)
Next.js Server Actions
    â”‚ â”œâ”€ ã‚»ãƒƒã‚·ãƒ§ãƒ³æ¤œè¨¼ãƒ»æ¨©é™ç¢ºèª
    â”‚ â”œâ”€ ãƒ•ã‚¡ã‚¤ãƒ«/ã‚¿ã‚¤ãƒ ã‚¹ã‚¿ãƒ³ãƒ—æ¤œè¨¼
    â”‚ â”œâ”€ Cloud Storageä¿å­˜ (éŸ³å£°ãƒœã‚¿ãƒ³ã®å ´åˆ)
    â”‚ â””â”€ ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿ä¿å­˜ (Firestore) + ä½œæˆè€…æƒ…å ±
    â†“ (ä¿å­˜å®Œäº†)
Firestore
    â”œâ”€ audioReferences collection (YouTubeå‚ç…§)
    â”œâ”€ audioButtons collection (å®ŸéŸ³å£°ãƒ•ã‚¡ã‚¤ãƒ«) ğŸ†•
    â””â”€ users collection (çµ±è¨ˆæƒ…å ±æ›´æ–°)
```

### ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰è¡¨ç¤º (Next.js 15 App Router)

**å‹•ç”»ä¸€è¦§ãƒšãƒ¼ã‚¸**

```console
Page (Server Component)
â”œâ”€â”€ ãƒ‡ãƒ¼ã‚¿å–å¾— (Server Actions)
â”œâ”€â”€ VideoList (Server Component)
â”‚   â”œâ”€â”€ å‹•ç”»ãƒªã‚¹ãƒˆè¡¨ç¤º
â”‚   â””â”€â”€ Pagination (Client Component)
â”‚       â””â”€â”€ URLæ›´æ–°ã«ã‚ˆã‚‹ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³
```

**éŸ³å£°æ©Ÿèƒ½ãƒšãƒ¼ã‚¸ (å®Ÿè£…å®Œäº†)**

```console
Audio System Pages (Server Component)
â”œâ”€â”€ éŸ³å£°ãƒ‡ãƒ¼ã‚¿å–å¾— (Server Actions)
â”œâ”€â”€ AudioReferenceCreator (Client Component)
â”‚   â”œâ”€â”€ YouTubeå‹•ç”»é¸æŠãƒ»æ™‚é–“æŒ‡å®š
â”‚   â”œâ”€â”€ ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿å…¥åŠ›ãƒ•ã‚©ãƒ¼ãƒ 
â”‚   â””â”€â”€ Server Actions (å‚ç…§ä½œæˆ)
â”œâ”€â”€ AudioButtonCreator (Client Component) ğŸ†•
â”‚   â”œâ”€â”€ éŸ³å£°ãƒ•ã‚¡ã‚¤ãƒ«ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰
â”‚   â”œâ”€â”€ ã‚«ãƒ†ã‚´ãƒªãƒ»ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿å…¥åŠ›
â”‚   â””â”€â”€ Server Actions (ãƒœã‚¿ãƒ³ä½œæˆ)
â””â”€â”€ AudioContentList (Server Component)
    â”œâ”€â”€ YouTubePlayer (Client Component)
    â”‚   â””â”€â”€ YouTubeåŸ‹ã‚è¾¼ã¿å†ç”Ÿ (ç‰¹å®šåŒºé–“)
    â”œâ”€â”€ AudioPlayer (Client Component) ğŸ†•
    â”‚   â””â”€â”€ å®ŸéŸ³å£°ãƒ•ã‚¡ã‚¤ãƒ«å†ç”Ÿ
    â””â”€â”€ Pagination (Client Component)

ç®¡ç†è€…ãƒšãƒ¼ã‚¸ (Admin Interface) ğŸ†•
â”œâ”€â”€ UserManagement (Server Component)
â”‚   â”œâ”€â”€ ãƒ¦ãƒ¼ã‚¶ãƒ¼ä¸€è¦§ãƒ»æ¤œç´¢ãƒ»ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°
â”‚   â”œâ”€â”€ ãƒ­ãƒ¼ãƒ«å¤‰æ›´ (member/moderator/admin)
â”‚   â””â”€â”€ ã‚¢ã‚«ã‚¦ãƒ³ãƒˆæœ‰åŠ¹åŒ–/ç„¡åŠ¹åŒ–
â”œâ”€â”€ ContentManagement (Server Component)
â”‚   â”œâ”€â”€ å‹•ç”»ç®¡ç† (ã‚¿ã‚¤ãƒˆãƒ«ç·¨é›†)
â”‚   â”œâ”€â”€ ä½œå“ç®¡ç† (DLsiteé€£æº)
â”‚   â””â”€â”€ éŸ³å£°ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ç®¡ç†
â””â”€â”€ AdminStats (Server Component)
    â””â”€â”€ ã‚·ã‚¹ãƒ†ãƒ çµ±è¨ˆãƒ»ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰
```

1. **Server Component**: ãƒšãƒ¼ã‚¸ã§ãƒ‡ãƒ¼ã‚¿å–å¾— (Server Actions)
2. **å‹å¤‰æ›**: `FirestoreData` â†’ `FrontendData` (shared-typesä½¿ç”¨)
3. **Server Component**: VideoListãƒ»AudioReferenceListã§è¡¨ç¤ºãƒ­ã‚¸ãƒƒã‚¯
4. **Client Component**: ã‚¤ãƒ³ã‚¿ãƒ©ã‚¯ã‚·ãƒ§ãƒ³ (Pagination, YouTubePlayer, AudioReferenceCreator)

## ğŸ”’ ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ãƒ»è¨­è¨ˆåŸå‰‡

### ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£

- **Discord Guildèªè¨¼**: ç‰¹å®šDiscordã‚µãƒ¼ãƒãƒ¼ã®ãƒ¡ãƒ³ãƒãƒ¼ã®ã¿ã‚¢ã‚¯ã‚»ã‚¹è¨±å¯
- **NextAuth.js**: JWT ãƒ™ãƒ¼ã‚¹ã®ã‚»ãƒƒã‚·ãƒ§ãƒ³ç®¡ç†ãƒ»CSRFä¿è­·
- **Secret Manager**: APIã‚­ãƒ¼ãƒ»èªè¨¼æƒ…å ±ã®å®‰å…¨ãªç®¡ç†
- **IAM**: æœ€å°æ¨©é™ã®åŸå‰‡
- **ã‚µãƒ¼ãƒãƒ¼ã‚µã‚¤ãƒ‰å„ªå…ˆ**: Firestoreã¯Server Actionsã®ã¿ã§ã‚¢ã‚¯ã‚»ã‚¹
- **æ¨©é™ãƒ™ãƒ¼ã‚¹æ©Ÿèƒ½åˆ¶å¾¡**: ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ­ãƒ¼ãƒ« (member/moderator/admin) ã«ã‚ˆã‚‹æ©Ÿèƒ½åˆ¶é™

### è¨­è¨ˆåŸå‰‡

- **Next.js 15æº–æ‹ **: App Router + Server Components + Client Componentsåˆ†é›¢
- **è²¬ä»»åˆ†é›¢**: Server Componentsï¼ˆè¡¨ç¤ºï¼‰ã¨Client Componentsï¼ˆã‚¤ãƒ³ã‚¿ãƒ©ã‚¯ã‚·ãƒ§ãƒ³ï¼‰ã®æ˜ç¢ºãªåˆ†é›¢
- **ã‚³ãƒ­ã‚±ãƒ¼ã‚·ãƒ§ãƒ³**: ãƒšãƒ¼ã‚¸ã¨Server Actionsã‚’åŒä¸€ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã«é…ç½®
- **å‹å®‰å…¨æ€§**: å…±æœ‰å‹å®šç¾©ã¨Zodã‚¹ã‚­ãƒ¼ãƒ
- **Monorepo**: é–‹ç™ºåŠ¹ç‡ã®ãŸã‚ã®ä¸€å…ƒç®¡ç†
- **Storybookæ´»ç”¨**: UIã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®é–‹ç™ºãƒ»ãƒ†ã‚¹ãƒˆç’°å¢ƒ
- **ãƒ–ãƒ©ã‚¦ã‚¶ãƒ•ã‚¡ãƒ¼ã‚¹ãƒˆ**: YouTubeåŸ‹ã‚è¾¼ã¿APIã‚’ä½¿ç”¨ã—ãŸã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã‚µã‚¤ãƒ‰å‹•ç”»å†ç”Ÿ
- **ãƒ¦ãƒ¼ã‚¶ãƒ¼ä¸»å°**: ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ä½œæˆã§ã®ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚¨ãƒ³ãƒ‘ãƒ¯ãƒ¼ãƒ¡ãƒ³ãƒˆ

## ğŸ¯ ä»Šå¾Œã®äºˆå®š

### å„ªå…ˆåº¦é †ä½

1. **ãƒ¬ã‚¹ãƒãƒ³ã‚·ãƒ–UIå¼·åŒ–**: ãƒ¢ãƒã‚¤ãƒ«ãƒ»ã‚¿ãƒ–ãƒ¬ãƒƒãƒˆå¯¾å¿œã®æ”¹å–„

2. **æ¤œç´¢ãƒ»ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼å¼·åŒ–**: é«˜åº¦ãªæ¤œç´¢æ©Ÿèƒ½ï¼ˆå…¨ã‚³ãƒ³ãƒ†ãƒ³ãƒ„æ¨ªæ–­ï¼‰

3. **éŸ³å£°æ©Ÿèƒ½æ‹¡å¼µ**: 
   - éŸ³å£°ãƒ•ã‚¡ã‚¤ãƒ«ä¸€æ‹¬ç®¡ç†
   - ãƒ—ãƒ¬ã‚¤ãƒªã‚¹ãƒˆæ©Ÿèƒ½
   - éŸ³å£°å“è³ªæœ€é©åŒ–

4. **ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æœ€é©åŒ–**: 
   - ç”»åƒãƒ»éŸ³å£°ãƒ•ã‚¡ã‚¤ãƒ«é…ä¿¡æœ€é©åŒ–
   - ã‚­ãƒ£ãƒƒã‚·ãƒ¥æˆ¦ç•¥æ”¹å–„

### éŸ³å£°ã‚·ã‚¹ãƒ†ãƒ è©³ç´° (å®Ÿè£…å®Œäº†)

**ã‚³ã‚¢æ©Ÿèƒ½**
- **éŸ³å£°å‚ç…§**: YouTubeå‹•ç”»ã‚¿ã‚¤ãƒ ã‚¹ã‚¿ãƒ³ãƒ—ãƒ™ãƒ¼ã‚¹
- **éŸ³å£°ãƒœã‚¿ãƒ³**: å®ŸéŸ³å£°ãƒ•ã‚¡ã‚¤ãƒ«ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ãƒ»å†ç”Ÿ
- **äºŒé‡ã‚·ã‚¹ãƒ†ãƒ **: å‚ç…§ã¨ãƒ•ã‚¡ã‚¤ãƒ«ã®çµ±åˆç®¡ç†
- **ã‚«ãƒ†ã‚´ãƒªç®¡ç†**: voice/bgm/se/talk/singing/other
- **Cloud Storageé€£æº**: éŸ³å£°ãƒ•ã‚¡ã‚¤ãƒ«å®‰å…¨ä¿å­˜

**ç®¡ç†è€…æ©Ÿèƒ½ (æ–°è¦è¿½åŠ )**
- **ãƒ¦ãƒ¼ã‚¶ãƒ¼ç®¡ç†**: ãƒ­ãƒ¼ãƒ«å¤‰æ›´ãƒ»ã‚¢ã‚«ã‚¦ãƒ³ãƒˆåˆ¶å¾¡
- **ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ç®¡ç†**: éŸ³å£°ãƒ»å‹•ç”»ãƒ»ä½œå“ã®ä¸€å…ƒç®¡ç†
- **çµ±è¨ˆãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰**: ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ åˆ©ç”¨çŠ¶æ³
- **æ¤œç´¢ãƒ»ãƒ•ã‚£ãƒ«ã‚¿**: ç®¡ç†è€…å‘ã‘é«˜åº¦æ¤œç´¢

**ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹**
- éŸ³å£°å‚ç…§ä½œæˆãƒ•ã‚©ãƒ¼ãƒ  (AudioReferenceCreator)
- éŸ³å£°ãƒœã‚¿ãƒ³ä½œæˆãƒ•ã‚©ãƒ¼ãƒ  (AudioButtonCreator) ğŸ†•
- YouTubeåŸ‹ã‚è¾¼ã¿ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼ (ç‰¹å®šåŒºé–“å†ç”Ÿ)
- éŸ³å£°ãƒ•ã‚¡ã‚¤ãƒ«ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼ (AudioPlayer) ğŸ†•
- çµ±åˆæ¤œç´¢ãƒ»ä¸€è¦§è¡¨ç¤º
- å…¬é–‹è¨­å®šãƒ»ãƒ—ãƒ©ã‚¤ãƒã‚·ãƒ¼ç®¡ç†

## ğŸ“ é‡è¦ãƒ•ã‚¡ã‚¤ãƒ«

- `docs/README.md` - è©³ç´°ä»•æ§˜
- `docs/FIRESTORE_STRUCTURE.md` - Firestoreãƒ‡ãƒ¼ã‚¿æ§‹é€ 
- `packages/shared-types/` - ã‚³ã‚¢å‹å®šç¾© (éŸ³å£°å‚ç…§å‹ãƒ»ãƒ¦ãƒ¼ã‚¶ãƒ¼å‹å«ã‚€)
- `apps/web/src/auth.ts` - Discordèªè¨¼ãƒ»NextAuthè¨­å®š
- `apps/web/src/lib/user-firestore.ts` - ãƒ¦ãƒ¼ã‚¶ãƒ¼ç®¡ç†Firestoreæ“ä½œ
- `apps/functions/src/` - ãƒ‡ãƒ¼ã‚¿åé›†ãƒ­ã‚¸ãƒƒã‚¯
- `apps/web/src/app/buttons/` - éŸ³å£°æ©Ÿèƒ½ (å‚ç…§+ãƒœã‚¿ãƒ³ãƒ»å®Ÿè£…å®Œäº†)
- `apps/web/src/app/admin/` - ç®¡ç†è€…ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹ (å®Ÿè£…å®Œäº†) ğŸ†•
- `apps/web/src/app/auth/` - èªè¨¼é–¢é€£ãƒšãƒ¼ã‚¸ (signin/error)
- `apps/web/src/components/Admin*` - ç®¡ç†è€…ç”¨UIã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ ğŸ†•
- `apps/web/src/components/Auth*` - èªè¨¼é–¢é€£UIã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ
- `apps/web/src/components/Audio*` - éŸ³å£°é–¢é€£UIã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ
- `apps/web/e2e/` - E2Eãƒ†ã‚¹ãƒˆ (Playwright) ğŸ†•
- `packages/shared-types/src/audio-button.ts` - éŸ³å£°ãƒœã‚¿ãƒ³å‹å®šç¾© ğŸ†•
- `packages/ui/src/components/audio-player.tsx` - éŸ³å£°ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼ ğŸ†•
- `terraform/AUTH_DEPLOYMENT_GUIDE.md` - Discordèªè¨¼ãƒ‡ãƒ—ãƒ­ã‚¤ã‚¬ã‚¤ãƒ‰
- `terraform/` - ã‚¤ãƒ³ãƒ•ãƒ©è¨­å®š (Discordèªè¨¼å«ã‚€)
- `biome.json` - ã‚³ãƒ¼ãƒ‰å“è³ªè¨­å®š

ã“ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã¯ã€ãƒ‡ãƒ¼ã‚¿åé›†ã‚¤ãƒ³ãƒ•ãƒ©ã¨ãƒ¦ãƒ¼ã‚¶ãƒ¼ä½œæˆã‚³ãƒ³ãƒ†ãƒ³ãƒ„æ©Ÿèƒ½ã‚’çµ„ã¿åˆã‚ã›ãŸãƒ•ã‚¡ãƒ³ã‚³ãƒŸãƒ¥ãƒ‹ãƒ†ã‚£ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ ã§ã€å‹å®‰å…¨ãªãƒ•ãƒ«ã‚¹ã‚¿ãƒƒã‚¯é–‹ç™ºã‚’é‡è¦–ã—ã¦ã„ã¾ã™ã€‚

## ğŸ”§ é–‹ç™ºã‚¬ã‚¤ãƒ‰ãƒ©ã‚¤ãƒ³

### Next.js 15 ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆè¨­è¨ˆ

**Server Components (æ¨å¥¨)**

- ãƒ‡ãƒ¼ã‚¿å–å¾—ãƒ»è¡¨ç¤ºãƒ­ã‚¸ãƒƒã‚¯
- SEOå¯¾å¿œãŒå¿…è¦ãªéƒ¨åˆ†
- é™çš„ãªUIéƒ¨åˆ†

**Client Components (å¿…è¦æ™‚ã®ã¿)**

- ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚¤ãƒ³ã‚¿ãƒ©ã‚¯ã‚·ãƒ§ãƒ³
- ãƒ–ãƒ©ã‚¦ã‚¶APIã®ä½¿ç”¨
- çŠ¶æ…‹ç®¡ç†ãŒå¿…è¦ãªéƒ¨åˆ†

**ã‚¢ãƒ³ãƒãƒ‘ã‚¿ãƒ¼ãƒ³**

- âŒ Client Componentã§Server Actionsã‚’ç›´æ¥å‘¼ã³å‡ºã—
- âŒ UIã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆå†…ã§ã®ãƒ‡ãƒ¼ã‚¿å–å¾—ãƒ­ã‚¸ãƒƒã‚¯
- âŒ é‡ã„ã‚µãƒ¼ãƒãƒ¼ã‚µã‚¤ãƒ‰éŸ³å£°å‡¦ç†
- âœ… Server Componentã§ã®ãƒ‡ãƒ¼ã‚¿ãƒ—ãƒªãƒ­ãƒ¼ãƒ‰ã¨Propsæ¸¡ã—
- âœ… YouTubeåŸ‹ã‚è¾¼ã¿APIã§ã®ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã‚µã‚¤ãƒ‰å‹•ç”»å†ç”Ÿ

### Storybooké–‹ç™º

- **apps/web/.storybook**: Webå°‚ç”¨ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ
- **packages/ui/.storybook**: å…±æœ‰UIã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ
- Next.js App Routerãƒ¢ãƒƒã‚¯è¨­å®šæ¸ˆã¿ï¼ˆ`useRouter`å¯¾å¿œï¼‰

### ã‚³ãƒ¼ãƒ‰å“è³ª

- ã‚³ãƒŸãƒƒãƒˆå‰ã« `pnpm check` ã‚’å®Ÿè¡Œ
- TypeScript strict modeã«å¾“ã†
- å…¨ãƒ‡ãƒ¼ã‚¿æ§‹é€ ã§å…±æœ‰å‹ã‚’ä½¿ç”¨
- é‡è¦ãªæ©Ÿèƒ½ã«ã¯ãƒ†ã‚¹ãƒˆã‚’è¨˜è¿°
- Storybookã§ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆãƒ†ã‚¹ãƒˆ

### Gitãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼

- conventional commitsã‚’ä½¿ç”¨
- pre-commitãƒ•ãƒƒã‚¯ (Lefthook) ã‚’å®Ÿè¡Œ
- ã‚³ãƒŸãƒƒãƒˆã¯é›†ä¸­çš„ã§åŸå­çš„ã«ä¿ã¤

### ãƒ†ã‚¹ãƒˆæˆ¦ç•¥

ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã§ã¯ **ãƒã‚¤ãƒ–ãƒªãƒƒãƒ‰ãƒ†ã‚¹ãƒˆã‚¢ãƒ—ãƒ­ãƒ¼ãƒ** ã‚’æ¡ç”¨ã—ã€ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®æ€§è³ªã«å¿œã˜ã¦æœ€é©ãªãƒ†ã‚¹ãƒˆæ‰‹æ³•ã‚’ä½¿ã„åˆ†ã‘ã¦ã„ã¾ã™ã€‚

#### **1. Server Actions & ãƒ“ã‚¸ãƒã‚¹ãƒ­ã‚¸ãƒƒã‚¯ â†’ Vitest + å˜ä½“ãƒ†ã‚¹ãƒˆ**

**å¯¾è±¡:**
- `apps/functions/src/` - Cloud Functions (ãƒ‡ãƒ¼ã‚¿åé›†ãƒ­ã‚¸ãƒƒã‚¯)
- `apps/web/src/app/*/actions.ts` - Server Actions
- `packages/shared-types/src/` - å…±æœ‰ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£

**é‡ç‚¹ãƒ†ã‚¹ãƒˆé …ç›®:**
- DLsite IDä¸¦ã³æ›¿ãˆã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ  (æ–‡å­—åˆ—é•· + è¾æ›¸é †)
- è¤‡é›‘ãªãƒšãƒ¼ã‚¸ãƒãƒ¼ã‚·ãƒ§ãƒ³ãƒ­ã‚¸ãƒƒã‚¯ (cursor + offset)
- Firestore Timestampå¤‰æ›ã¨ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°
- ãƒ‡ãƒ¼ã‚¿å¤‰æ›ãƒ»æ¤œç´¢ãƒ»ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°æ©Ÿèƒ½

```bash
# Server Actions & Functions ãƒ†ã‚¹ãƒˆå®Ÿè¡Œ
pnpm test                    # å…¨ä½“ãƒ†ã‚¹ãƒˆå®Ÿè¡Œ
pnpm test:coverage          # ã‚«ãƒãƒ¬ãƒƒã‚¸ä»˜ããƒ†ã‚¹ãƒˆå®Ÿè¡Œ
cd apps/functions && pnpm test  # Functionså€‹åˆ¥ãƒ†ã‚¹ãƒˆ
```

#### **2. UIã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ â†’ Storybook (ãƒ“ã‚¸ãƒ¥ã‚¢ãƒ«ãƒ†ã‚¹ãƒˆ)**

**å¯¾è±¡:**

- `packages/ui/src/components/` - å…±æœ‰UIã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ
- ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆãƒ»ãƒ‡ã‚¶ã‚¤ãƒ³ãŒé‡è¦ãªã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ

**é‡ç‚¹é …ç›®:**

- ãƒ‡ã‚¶ã‚¤ãƒ³ã‚·ã‚¹ãƒ†ãƒ ã®ä¸€è²«æ€§
- ç•°ãªã‚‹propsãƒ»çŠ¶æ…‹ã§ã®è¦‹ãŸç›®ç¢ºèª
- ã‚¢ã‚¯ã‚»ã‚·ãƒ“ãƒªãƒ†ã‚£ã®è¦–è¦šçš„æ¤œè¨¼
- ãƒ¬ã‚¹ãƒãƒ³ã‚·ãƒ–ãƒ‡ã‚¶ã‚¤ãƒ³ã®ç¢ºèª

```bash
# Storybooké–‹ç™ºã‚µãƒ¼ãƒãƒ¼
cd packages/ui && pnpm storybook     # å…±æœ‰UIã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ
cd apps/web && pnpm storybook       # Webå°‚ç”¨ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ

# å¯¾è±¡ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆä¾‹
packages/ui/src/components/
â”œâ”€â”€ button.tsx âœ… Storybook
â”œâ”€â”€ pagination.tsx âœ… Storybook
â”œâ”€â”€ card.tsx âœ… Storybook
â””â”€â”€ form-fields.tsx âœ… Storybook
```

#### **3. ã‚¤ãƒ³ã‚¿ãƒ©ã‚¯ãƒ†ã‚£ãƒ–ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ â†’ React Testing Library**

**å¯¾è±¡:**

- ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚¤ãƒ³ã‚¿ãƒ©ã‚¯ã‚·ãƒ§ãƒ³ãƒ­ã‚¸ãƒƒã‚¯
- æ¡ä»¶åˆ†å²ãƒ»ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°ã‚’å«ã‚€ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ
- çŠ¶æ…‹ç®¡ç†ãŒé‡è¦ãªã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ

**é‡ç‚¹é …ç›®:**

- ãƒšãƒ¼ã‚¸ãƒãƒ¼ã‚·ãƒ§ãƒ³ã®æ¬¡/å‰ãƒšãƒ¼ã‚¸ãƒ­ã‚¸ãƒƒã‚¯
- æ¤œç´¢ãƒ»ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°æ©Ÿèƒ½
- ãƒ•ã‚©ãƒ¼ãƒ å…¥åŠ›ãƒ»ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³
- ã‚¨ãƒ©ãƒ¼ãƒã‚¦ãƒ³ãƒ€ãƒª

```bash
# React Testing Library ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—
cd apps/web
npm install -D @testing-library/react @testing-library/jest-dom happy-dom

# å®Ÿè£…å®Œäº†ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ âœ…
apps/web/src/components/
â”œâ”€â”€ Pagination.tsx âœ… RTL (10ä»¶: ãƒšãƒ¼ã‚¸ãƒãƒ¼ã‚·ãƒ§ãƒ³ãƒ­ã‚¸ãƒƒã‚¯)
â”œâ”€â”€ SearchForm.tsx âœ… RTL (15ä»¶: æ¤œç´¢ãƒ»ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°)
â”œâ”€â”€ YouTubePlayer.tsx âœ… RTL (44ä»¶: åŒ…æ‹¬çš„ãƒ†ã‚¹ãƒˆ)
â”œâ”€â”€ AudioReferenceCreator.tsx âœ… RTL (15ä»¶: éŸ³å£°å‚ç…§ä½œæˆ)
â”œâ”€â”€ AudioReferenceCard.tsx âœ… RTL (10ä»¶: éŸ³å£°å‚ç…§è¡¨ç¤º)
â”œâ”€â”€ ThumbnailImage.tsx âœ… RTL (15ä»¶: ç”»åƒãƒ»ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°)
â”œâ”€â”€ SiteHeader.tsx âœ… RTL (10ä»¶: ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³)
â””â”€â”€ SiteFooter.tsx âœ… RTL (9ä»¶: ãƒ•ãƒƒã‚¿ãƒ¼)
```

#### **4. çµ±åˆãƒ†ã‚¹ãƒˆ â†’ Next.js Testing + E2E**

**å¯¾è±¡:**

- Page Components + Server Actions
- Client/Server Componentå¢ƒç•Œ
- å®Ÿéš›ã®ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ•ãƒ­ãƒ¼

**é‡ç‚¹é …ç›®:**

- Server Componentã¨Client Componentã®é€£æº
- Server Actionsã‹ã‚‰ã®ãƒ‡ãƒ¼ã‚¿ãƒ•ãƒ­ãƒ¼
- ã‚¨ãƒ©ãƒ¼ãƒã‚¦ãƒ³ãƒ€ãƒªã¨Suspenseã®å‹•ä½œ

#### **ãƒ†ã‚¹ãƒˆå®Ÿè£…çŠ¶æ³**

**âœ… Phase 1: Core Testing Complete** (é‡è¦æ©Ÿèƒ½100%ã‚«ãƒãƒ¬ãƒƒã‚¸)

```bash
# å®Œäº†æ¸ˆã¿ - å…¨é‡è¦æ©Ÿèƒ½ãŒãƒ†ã‚¹ãƒˆæ¸ˆã¿
âœ… Server Actions & ãƒ“ã‚¸ãƒã‚¹ãƒ­ã‚¸ãƒƒã‚¯ (78ä»¶)
âœ… é‡è¦UIã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ (128ä»¶)
âœ… çµ±åˆãƒ†ã‚¹ãƒˆ (Page Components - 20ä»¶)
âœ… ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚° & ã‚¨ãƒƒã‚¸ã‚±ãƒ¼ã‚¹
```

**ğŸ¯ Phase 2: Storybookå¼·åŒ–** (æ¬¡ã®æ”¹å–„ç›®æ¨™)

```bash
# ä»Šå¾Œã®æ‹¡å¼µå€™è£œ
- Visual Regression Testingè¿½åŠ 
- ã‚¢ã‚¯ã‚»ã‚·ãƒ“ãƒªãƒ†ã‚£ãƒ†ã‚¹ãƒˆå¼·åŒ–
- ãƒ¬ã‚¹ãƒãƒ³ã‚·ãƒ–ãƒ‡ã‚¶ã‚¤ãƒ³ãƒ†ã‚¹ãƒˆ
```

**ğŸ¯ Phase 3: Advanced Testing** (é«˜åº¦ãªãƒ†ã‚¹ãƒˆæ©Ÿèƒ½)

```bash
# Next.js App Routerç‰¹æœ‰ã®ãƒ†ã‚¹ãƒˆ
- Page Components + Server Actions
- Client/Server Componentå¢ƒç•Œã®ãƒ†ã‚¹ãƒˆ
- ã‚¨ãƒ©ãƒ¼ãƒã‚¦ãƒ³ãƒ€ãƒªã¨Suspenseã®ãƒ†ã‚¹ãƒˆ
```

#### **ãƒ†ã‚¹ãƒˆç’°å¢ƒè¨­å®š**

**Vitest Workspace**

```typescript
// vitest.workspace.ts
export default defineWorkspace([
  "apps/functions/vitest.config.ts",      // Cloud Functions
  "apps/web/vitest.config.ts",            // Web App (RTL)
  "packages/shared-types/vitest.config.ts", // å…±æœ‰å‹ãƒ»ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£
]);
```

**React Testing Libraryè¨­å®šä¾‹**

```typescript
// apps/web/vitest.config.ts
export default defineConfig({
  test: {
    globals: true,
    environment: "happy-dom", // jsdomã‚ˆã‚Šé«˜é€Ÿ
    setupFiles: ["./test-setup.ts"],
  },
});
```

### ç¾åœ¨ã®ãƒ†ã‚¹ãƒˆã‚«ãƒãƒ¬ãƒƒã‚¸çŠ¶æ³

- **ãƒ†ã‚¹ãƒˆä»¶æ•°**: **388+ä»¶** (é«˜å“è³ªãƒ»åŒ…æ‹¬çš„)
- **ãƒ†ã‚¹ãƒˆãƒ•ã‚¡ã‚¤ãƒ«**: **21ãƒ•ã‚¡ã‚¤ãƒ«** (ã™ã¹ã¦é€šé)
- **E2Eãƒ†ã‚¹ãƒˆ**: **4ä»¶** (Playwright + è¤‡æ•°ãƒ–ãƒ©ã‚¦ã‚¶)
- **ã‚«ãƒãƒ¼æ¸ˆã¿**:
  - âœ… **Cloud Functions**: 157ä»¶ãƒ†ã‚¹ãƒˆ (ãƒ‡ãƒ¼ã‚¿åé›†ãƒ»å¤‰æ›ãƒ­ã‚¸ãƒƒã‚¯)
  - âœ… **Web App**: 229ä»¶ãƒ†ã‚¹ãƒˆ (UIãƒ»Server Actionsãƒ»çµ±åˆ)
  - âœ… **UI Package**: 4ä»¶ãƒ†ã‚¹ãƒˆ (éŸ³å£°ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼)
  - âœ… **E2E**: 4ä»¶ãƒ†ã‚¹ãƒˆ (ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ•ãƒ­ãƒ¼å…¨ä½“)
  - âœ… **ç®¡ç†è€…æ©Ÿèƒ½**: æ–°è¦è¿½åŠ æ©Ÿèƒ½ã®å®Œå…¨ãƒ†ã‚¹ãƒˆ ğŸ†•
- **æœ€æ–°ã®æˆæœ**: 
  - ç®¡ç†è€…ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹ã®åŒ…æ‹¬çš„ãƒ†ã‚¹ãƒˆè¿½åŠ 
  - E2Eãƒ†ã‚¹ãƒˆã«ã‚ˆã‚‹ãƒ–ãƒ©ã‚¦ã‚¶æ¨ªæ–­æ¤œè¨¼
  - éŸ³å£°ã‚·ã‚¹ãƒ†ãƒ ã®çµ±åˆãƒ†ã‚¹ãƒˆå¼·åŒ–
- **å“è³ª**: Biome 2.0 + Lefthook ã«ã‚ˆã‚‹å³æ ¼ãªå“è³ªç®¡ç†

## ğŸš¨ é‡è¦: ãƒªãƒ³ãƒˆãƒ»ãƒ†ã‚¹ãƒˆå®Ÿè¡Œã‚³ãƒãƒ³ãƒ‰

ã‚³ãƒŸãƒƒãƒˆå‰ã¾ãŸã¯PRä½œæˆå‰ã«ã¯å¿…ãšä»¥ä¸‹ã‚’å®Ÿè¡Œã—ã¦ãã ã•ã„:

```bash
# å…¨ä½“ãƒã‚§ãƒƒã‚¯ (æ¨å¥¨)
pnpm check

# å€‹åˆ¥å®Ÿè¡Œ
pnpm lint              # å…¨ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã®Lint
pnpm format            # å…¨ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã®ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆ
pnpm test              # å…¨ä½“ãƒ†ã‚¹ãƒˆå®Ÿè¡Œ
```
