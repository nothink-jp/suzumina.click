# TODO・タスク管理

## 📋 概要

suzumina.clickプロジェクトのタスク管理、機能開発ロードマップ、および進行中の課題を管理するドキュメントです。

## 🎯 現在の開発フェーズ

**Phase 1: 基盤構築** (完了済み ✅)

- ✅ インフラ基盤の確立 (Terraform + GCP)
- ✅ データ収集機能の安定化 (Cloud Functions)
- ✅ 開発環境・ツール整備 (Monorepo + pnpm)

**Phase 2: 本格Webアプリ開発** (進行中 🚧)

- 🚧 **apps/web の新規作成・実装** (最重要)
- 🚧 実用的なUI/UXの設計・開発
- 🚧 データ表示・検索機能の実装

## 🚀 優先度別タスク

### 🔴 緊急・重要 (P0) - **apps/web 作成**

#### **本格Webアプリケーション基盤構築**

- [ ] **apps/web プロジェクト新規作成**
  - [ ] Next.js 15 + TypeScript プロジェクト初期化
  - [ ] Tailwind CSS + Radix UI セットアップ
  - [ ] pnpm workspace 統合
  - [ ] 基本的なディレクトリ構造設計
  - 期限: 2025年6月11日
  - **最重要タスク**

- [ ] **アーキテクチャ設計・実装**
  - [ ] App Router 構成設計
  - [ ] コンポーネント設計システム
  - [ ] Server Actions によるサーバーサイドデータ取得層設計
  - [ ] クライアントサイド状態管理戦略 (必要最小限)
  - 期限: 2025年6月12日
  - **最重要タスク**

- [ ] **Firestore連携実装 (サーバーサイド限定)**
  - [ ] @google-cloud/firestore をサーバーサイドに導入
  - [ ] Next.js 15 Server Actions によるデータ取得関数作成
  - [ ] 共有型定義の活用
  - [ ] サーバーサイドエラーハンドリング実装
  - [ ] クライアントサイドでのFirebase SDK使用禁止
  - 期限: 2025年6月13日
  - **最重要タスク**

#### **核心機能実装**

- [ ] **作品一覧表示機能**
  - [ ] DLsite作品データの表示
  - [ ] グリッド・リスト表示切り替え
  - [ ] ページネーション実装
  - [ ] ローディング・エラーステート
  - 期限: 2025年6月15日

- [ ] **作品詳細ページ**
  - [ ] 作品情報の詳細表示
  - [ ] 画像ギャラリー機能
  - [ ] 関連作品表示
  - [ ] SNS共有機能
  - 期限: 2025年6月20日

- [ ] **検索・フィルタリング機能**
  - [ ] 全文検索実装
  - [ ] カテゴリ・価格帯フィルタ
  - [ ] 並び替え機能
  - [ ] 検索結果ハイライト
  - 期限: 2025年6月21日

### 🟡 重要 (P1) - 基盤安定化

#### **システム安定性向上**

- [ ] **Cloud Functions エラーハンドリング強化**
  - [ ] YouTube API クォータ超過時の適切な処理
  - [ ] DLsite スクレイピング失敗時のリトライ機能
  - [ ] Firestore書き込み失敗時の復旧処理
  - 期限: 2025年7月31日
  - 担当者: Backend Team

- [ ] **モニタリング・アラート設定**
  - [ ] Cloud Functions実行失敗時のアラート
  - [ ] Firestore書き込みエラーの通知
  - [ ] YouTube APIクォータ使用量の監視
  - 期限: 2025年8月15日
  - 担当者: DevOps Team

#### **セキュリティ強化**

- [ ] **Firestore セキュリティルール実装**
  - [ ] 読み取り専用アクセス制御
  - [ ] レート制限の実装
  - [ ] 不正アクセス検知
  - 期限: 2025年8月31日
  - 担当者: Backend Team

### 🟢 通常 (P2) - 機能拡張

#### **YouTube動画表示機能**

- [ ] **動画一覧表示**
  - [ ] YouTube動画データの表示
  - [ ] 埋め込み動画プレイヤー
  - [ ] 再生リスト機能
  - [ ] お気に入り機能 (将来)
  - 期限: 2025年9月15日
  - 担当者: Frontend Team

- [ ] **音声ボタン作成機能** (将来実装)
  - [ ] YouTube動画からの音声切り出し
  - [ ] タイムスタンプ指定機能
  - [ ] 音声ファイルの保存・管理
  - [ ] ユーザー作成ボタンの共有機能
  - 期限: 2025年10月31日
  - 担当者: Full Stack Team

#### **UI/UX改善**

- [ ] **レスポンシブデザイン最適化**
  - [ ] モバイル向けUI改善
  - [ ] タブレット表示対応
  - [ ] タッチジェスチャー対応
  - [ ] PWA対応検討
  - 期限: 2025年9月30日
  - 担当者: Frontend Team

- [ ] **ダークモード対応**
  - [ ] カラーテーマの実装
  - [ ] ユーザー設定の保存
  - [ ] システム設定連動
  - 期限: 2025年10月15日
  - 担当者: Frontend Team

### 🔵 将来対応 (P3) - 高度機能

#### **ユーザー機能**

- [ ] **ユーザー認証システム**
  - [ ] Google OAuth連携
  - [ ] ユーザープロフィール機能
  - [ ] お気に入り・ブックマーク機能
  - 期限: 2025年12月31日
  - 担当者: Full Stack Team

- [ ] **コメント・レビュー機能**
  - [ ] 作品レビュー投稿
  - [ ] 音声ボタンコメント
  - [ ] レーティングシステム
  - 期限: 2026年2月28日
  - 担当者: Full Stack Team

## 🚧 **apps/web 設計仕様**

### **推奨技術スタック**

```typescript
// 核心技術
- Next.js 15 (App Router)
- TypeScript 5.8+
- React 19
- Tailwind CSS 3.4+

// UI/UX
- Radix UI (アクセシブルコンポーネント)
- Framer Motion (アニメーション)
- Lucide React (アイコン)

// データ取得・状態管理
- Next.js 15 Server Actions (サーバーサイドデータ取得)
- @google-cloud/firestore (サーバーサイドのみ)
- React 19 use() Hook (クライアントサイド非同期処理)
- 必要最小限のクライアント状態管理

// 開発支援
- @suzumina.click/shared-types (共有型定義)
- Biome (Lint/Format)
- Vitest (テスト)
```

### **ディレクトリ構造案**

```
apps/web/
├── src/
│   ├── app/                   # Next.js App Router
│   │   ├── globals.css       # グローバルスタイル
│   │   ├── layout.tsx        # ルートレイアウト
│   │   ├── page.tsx          # ホームページ
│   │   ├── loading.tsx       # ローディングUI
│   │   ├── error.tsx         # エラーUI
│   │   ├── not-found.tsx     # 404ページ
│   │   ├── (dashboard)/      # ダッシュボードページ群
│   │   ├── works/            # 作品関連ページ
│   │   │   ├── page.tsx      # 作品一覧
│   │   │   ├── actions.ts    # 作品関連Server Actions
│   │   │   └── [id]/page.tsx # 作品詳細
│   │   ├── videos/           # 動画関連ページ
│   │   │   ├── page.tsx      # 動画一覧
│   │   │   ├── actions.ts    # 動画関連Server Actions
│   │   │   └── [id]/page.tsx # 動画詳細
│   │   └── search/           # 検索ページ
│   │       ├── page.tsx      # 検索結果
│   │       └── actions.ts    # 検索関連Server Actions
│   ├── components/           # Reactコンポーネント
│   │   ├── ui/               # 基本UIコンポーネント
│   │   ├── work/             # 作品関連コンポーネント
│   │   ├── video/            # 動画関連コンポーネント
│   │   └── layout/           # レイアウトコンポーネント
│   └── lib/                  # ビジネスロジック・ユーティリティ
│       ├── firestore.ts      # Firestore接続 (サーバーサイドのみ)
│       ├── utils.ts          # 汎用ユーティリティ
│       ├── constants.ts      # 定数定義
│       ├── types.ts          # アプリケーション固有型定義
│       └── validations.ts    # Zod スキーマ・バリデーション
├── public/                   # 静的ファイル
│   ├── favicon.ico
│   └── images/
├── package.json
├── tailwind.config.ts
├── next.config.mjs
└── tsconfig.json
```

### **Vercel公式準拠の設計改善ポイント**

**✅ 改善された点**
- **Server Actions配置**: 各機能ページと同じディレクトリに`actions.ts`を配置
- **App Router準拠**: `app/`内にページ固有ファイル（`layout.tsx`, `loading.tsx`, `error.tsx`）を配置
- **スタイル配置**: `app/globals.css` でグローバルスタイル管理
- **lib/簡素化**: 必要最小限のユーティリティとFirestore接続に集約

**🎯 Server Actions設計原則**
- ページ固有のActionsは同じディレクトリに配置
- 共通のActionsのみ`lib/`に配置検討
- コロケーション原則による保守性向上

### **実装優先順位**

1. **Phase 2.1** (6月下旬): プロジェクト初期化・基盤構築
2. **Phase 2.2** (7月): 作品表示機能・基本UI
3. **Phase 2.3** (8月): 検索・フィルタリング・詳細機能
4. **Phase 2.4** (9月): 動画表示・レスポンシブ対応

## 🐛 既知の課題・バグ

### 🟡 Medium (apps/web作成後に対応)

- [ ] **v0モックからの移行作業**
  - 問題: apps/v0-suzumina.click のモックコードの参考活用
  - 影響: デザイン・機能要件の整理が必要
  - 対応策: コンポーネント・デザインパターンの再利用
  - 期限: 2025年7月15日

- [ ] **Mobile Safari レイアウト崩れ** (将来対応)
  - 問題: iOS Safariでの一部UI不具合
  - 影響: モバイルユーザビリティ
  - 対応策: CSS修正、クロスブラウザテスト強化
  - 期限: 2025年9月30日

### 🔴 Critical (継続監視)

- [ ] **YouTube API クォータ制限**
  - 問題: 1日のクォータ制限により動画取得が停止する
  - 影響: データ収集の停止
  - 対応策: クォータ効率化、複数APIキー対応検討
  - 期限: 2025年7月31日

- [ ] **DLsite スクレイピング安定性**
  - 問題: DLsiteのHTML構造変更でパース失敗
  - 影響: 作品情報の取得停止
  - 対応策: パーサーの堅牢性向上、構造変化検知
  - 期限: 2025年8月15日

## 📊 技術的負債

### **最優先**

- [ ] **apps/web テストカバレッジ確保**
  - 目標: 新規作成時点から80%以上
  - 対象: コンポーネント、hooks、ビジネスロジック
  - 期限: 各機能実装と同時

- [ ] **型安全性の完全確保**
  - [ ] 共有型定義の最大活用
  - [ ] strict TypeScript設定
  - [ ] Runtime型検証 (Zod活用)
  - 期限: 2025年8月31日

## 📅 マイルストーン

### **2025年 Q3 (7-9月) - apps/web 集中開発期**

**Phase 2.1: 基盤完成** (6月20日〜7月10日)

- [ ] apps/web プロジェクト作成
- [ ] 基本アーキテクチャ実装
- [ ] Firestore連携確立

**Phase 2.2: 核心機能実装** (7月10日〜8月10日)

- [ ] 作品一覧・詳細表示
- [ ] 検索・フィルタリング
- [ ] 基本的なユーザビリティ確保

**Phase 2.3: UI/UX完成** (8月10日〜9月30日)

- [ ] レスポンシブ対応
- [ ] パフォーマンス最適化
- [ ] アクセシビリティ対応

### **2025年 Q4 (10-12月) - 機能拡充**

**Phase 3: 高度機能** (10月〜12月)

- [ ] YouTube動画表示機能
- [ ] ユーザー認証実装
- [ ] 音声ボタン作成機能 (プロトタイプ)

## 🎯 成功指標 (KPI)

### **apps/web 開発成功指標**

- **開発スピード**: Phase 2完了までに3ヶ月以内
- **コード品質**: テストカバレッジ 80%以上
- **パフォーマンス**: Lighthouse スコア 90+
- **使いやすさ**: モバイル・デスクトップ両対応

### **ビジネス指標**

- **プロトタイプ公開**: 2025年8月末
- **ベータ版リリース**: 2025年10月末
- **正式版リリース**: 2025年12月末

## 📝 チーム体制・責任分担

### **apps/web 開発チーム**

- **Frontend Lead**: apps/web アーキテクチャ・実装責任
- **UI/UX Designer**: デザインシステム・ユーザビリティ
- **Full Stack Developer**: Firebase連携・API統合
- **QA Engineer**: テスト戦略・品質保証

### **支援チーム**

- **Backend Team**: Cloud Functions安定性保証
- **DevOps Team**: インフラ・モニタリング
- **Product Owner**: 要件定義・優先度判断

---

**最終更新**: 2025年6月10日  
**次回レビュー**: 2025年6月17日 (週次apps/web進捗確認)  
**マイルストーン見直し**: 2025年7月1日 (Phase 2.1完了確認)
