# éŸ³å£°ãƒœã‚¿ãƒ³æ©Ÿèƒ½ è¨­è¨ˆãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆï¼ˆã‚¿ã‚¤ãƒ ã‚¹ã‚¿ãƒ³ãƒ—å‚ç…§ã‚·ã‚¹ãƒ†ãƒ ï¼‰

## æ¦‚è¦

suzumina.clickãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®éŸ³å£°ãƒœã‚¿ãƒ³æ©Ÿèƒ½ã¨ã—ã¦ã€**ã‚¿ã‚¤ãƒ ã‚¹ã‚¿ãƒ³ãƒ—å‚ç…§ã‚·ã‚¹ãƒ†ãƒ **ã‚’å®Ÿè£…ã—ã¾ã™ã€‚YouTubeå‹•ç”»ã®éŸ³å£°ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä¿å­˜ã›ãšã€ç‰¹å®šæ™‚é–“ã¸ã®å‚ç…§æƒ…å ±ã®ã¿ã‚’ä¿å­˜ã™ã‚‹ã“ã¨ã§ã€æ³•çš„ãƒªã‚¹ã‚¯ã‚’å›é¿ã—ã¤ã¤å®Ÿç”¨çš„ãªéŸ³å£°ãƒœã‚¿ãƒ³æ©Ÿèƒ½ã‚’æä¾›ã—ã¾ã™ã€‚

## ğŸ¯ è¨­è¨ˆæ–¹é‡

### æ‰¿èªã•ã‚ŒãŸè¨­è¨ˆã‚³ãƒ³ã‚»ãƒ—ãƒˆ
- **éŸ³å£°ãƒ•ã‚¡ã‚¤ãƒ«ä¿å­˜ãªã—**: YouTubeè¦ç´„ã«å®Œå…¨æº–æ‹ 
- **ã‚¿ã‚¤ãƒ ã‚¹ã‚¿ãƒ³ãƒ—å‚ç…§**: å‹•ç”»ã®ç‰¹å®šæ™‚é–“åŒºé–“ã¸ã®å‚ç…§ã®ã¿
- **ãƒ¦ãƒ¼ã‚¶ãƒ¼ä¸»å°ä½œæˆ**: å‹•ç”»è¦–è´ä¸­ã«ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ã§ãƒœã‚¿ãƒ³ä½œæˆ
- **ã‚³ãƒŸãƒ¥ãƒ‹ãƒ†ã‚£å…±æœ‰**: ãƒ•ã‚¡ãƒ³åŒå£«ã§ã®åå ´é¢å…±æœ‰

### æŠ€è¡“çš„å„ªä½æ€§
- âœ… æ³•çš„ã‚³ãƒ³ãƒ—ãƒ©ã‚¤ã‚¢ãƒ³ã‚¹ç¢ºä¿
- âœ… å®Ÿè£…ç°¡å˜ï¼ˆ2é€±é–“ã§å®Œæˆï¼‰
- âœ… ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ã‚³ã‚¹ãƒˆä¸è¦
- âœ… æ—¢å­˜ã‚¤ãƒ³ãƒ•ãƒ©æ´»ç”¨

## ğŸ“± ç”»é¢è¨­è¨ˆãƒ»ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ•ãƒ­ãƒ¼

### 1. **å‹•ç”»è©³ç´°ãƒšãƒ¼ã‚¸ï¼ˆæ‹¡å¼µï¼‰**
`/videos/[videoId]`

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ğŸ“º å‹•ç”»è©³ç´°ãƒšãƒ¼ã‚¸                                     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ [å‹•ç”»ã‚µãƒ ãƒã‚¤ãƒ«ãƒ»ãƒ¡ã‚¿æƒ…å ±] (æ—¢å­˜)                     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ğŸµ éŸ³å£°ãƒœã‚¿ãƒ³ã‚»ã‚¯ã‚·ãƒ§ãƒ³                              â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ â­ ã“ã®å‹•ç”»ã®éŸ³å£°ãƒœã‚¿ãƒ³ (3å€‹)                    â”‚ â”‚
â”‚ â”‚ [â–¶ï¸ ãŠã¯ã‚ˆã†] [â–¶ï¸ ã‚ã‚ŠãŒã¨ã†] [â–¶ï¸ ãŠç–²ã‚Œæ§˜]       â”‚ â”‚
â”‚ â”‚                                                 â”‚ â”‚
â”‚ â”‚ [+ æ–°ã—ã„éŸ³å£°ãƒœã‚¿ãƒ³ã‚’ä½œæˆ]                       â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ğŸ¬ YouTube Player (åŸ‹ã‚è¾¼ã¿)                         â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ [YouTubeå‹•ç”»ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼]                          â”‚ â”‚
â”‚ â”‚                                                 â”‚ â”‚
â”‚ â”‚ å†ç”Ÿæ™‚é–“: 2:45 / 10:30                          â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 2. **éŸ³å£°ãƒœã‚¿ãƒ³ä½œæˆãƒšãƒ¼ã‚¸**
`/buttons/create?video_id={videoId}`

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ğŸµ éŸ³å£°ãƒœã‚¿ãƒ³ä½œæˆ                                     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ğŸ“¹ å¯¾è±¡å‹•ç”»: ã€Œæœã®æŒ¨æ‹¶é…ä¿¡ã€                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ğŸ¬ YouTube Player                                    â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ [YouTubeå‹•ç”»ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼]                          â”‚ â”‚
â”‚ â”‚ ç¾åœ¨æ™‚é–“: 1:23 / 10:30                          â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ â° ã‚¿ã‚¤ãƒ ã‚¹ã‚¿ãƒ³ãƒ—é¸æŠ                                 â”‚
â”‚                                                     â”‚
â”‚ é–‹å§‹æ™‚é–“: 1:20 [â”â”â”â”â”â”|â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”] 10:30       â”‚
â”‚ çµ‚äº†æ™‚é–“: 1:25 [â”â”â”â”â”â”â”â”|â”â”â”â”â”â”â”â”â”â”â”â”â”â”] 10:30       â”‚
â”‚ é•·ã•: 5ç§’                                           â”‚
â”‚                                                     â”‚
â”‚ [ğŸ“ ç¾åœ¨æ™‚é–“ã‚’é–‹å§‹ã«] [â¯ï¸ ç¯„å›²ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼]            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ğŸ“ éŸ³å£°ãƒœã‚¿ãƒ³æƒ…å ±                                     â”‚
â”‚                                                     â”‚
â”‚ ã‚¿ã‚¤ãƒˆãƒ«: [ãŠã¯ã‚ˆã†ã”ã–ã„ã¾ã™________]               â”‚
â”‚ ã‚«ãƒ†ã‚´ãƒª: [æŒ¨æ‹¶ â–¼]                                  â”‚
â”‚ ã‚¿ã‚°: [æœ] [æŒ¨æ‹¶] [+ã‚¿ã‚°è¿½åŠ ]                       â”‚
â”‚ èª¬æ˜: [æœã®é…ä¿¡ã§ã®æŒ¨æ‹¶ã‚·ãƒ¼ãƒ³ã§ã™___________]        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ğŸ” ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼                                        â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ ğŸµ ãŠã¯ã‚ˆã†ã”ã–ã„ã¾ã™ (5ç§’)                     â”‚ â”‚
â”‚ â”‚ å‹•ç”»: æœã®æŒ¨æ‹¶é…ä¿¡                              â”‚ â”‚
â”‚ â”‚ æ™‚é–“: 1:20-1:25                                â”‚ â”‚
â”‚ â”‚ ã‚¿ã‚°: [æœ] [æŒ¨æ‹¶]                              â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ [ã‚­ãƒ£ãƒ³ã‚»ãƒ«] [ä¸‹æ›¸ãä¿å­˜] [éŸ³å£°ãƒœã‚¿ãƒ³ã‚’ä½œæˆ] ğŸ¯      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 3. **éŸ³å£°ãƒœã‚¿ãƒ³ä¸€è¦§ãƒšãƒ¼ã‚¸ï¼ˆæ‹¡å¼µï¼‰**
`/buttons`

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ğŸµ éŸ³å£°ãƒœã‚¿ãƒ³ä¸€è¦§                                     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ğŸ” [æ¤œç´¢ãƒ»ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼] [ã‚«ãƒ†ã‚´ãƒª] [ä¸¦ã³é †] [ä½œæˆ+]     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ğŸ“Š äººæ°—ã®éŸ³å£°ãƒœã‚¿ãƒ³                                  â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”         â”‚
â”‚ â”‚ ğŸµ  â”‚ ğŸµ  â”‚ ğŸµ  â”‚ ğŸµ  â”‚ ğŸµ  â”‚ ğŸµ  â”‚         â”‚
â”‚ â”‚ãŠã¯ â”‚ã‚ã‚Š â”‚ãŠç–² â”‚ã“ã‚“ â”‚ã„ãŸ â”‚ãŠã‚„ â”‚         â”‚
â”‚ â”‚ã‚ˆã† â”‚ãŒã¨ã†â”‚ã‚Œæ§˜ â”‚ã«ã¡ã¯â”‚ã ã â”‚ã™ã¿ â”‚         â”‚
â”‚ â”‚ğŸ”¥125â”‚ğŸ”¥98 â”‚ğŸ”¥87 â”‚ğŸ”¥76 â”‚ğŸ”¥65 â”‚ğŸ”¥54 â”‚         â”‚
â”‚ â””â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”˜         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ğŸ†• æœ€æ–°ã®éŸ³å£°ãƒœã‚¿ãƒ³                                  â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ ğŸµ ãŠã¯ã‚ˆã† (3ç§’) ğŸ‘¤åŒ¿å â°2åˆ†å‰                â”‚ â”‚
â”‚ â”‚ ğŸ“¹ æœã®æŒ¨æ‹¶é…ä¿¡ | â±ï¸ 1:20-1:23              â”‚ â”‚
â”‚ â”‚ ğŸ·ï¸ [æœ] [æŒ¨æ‹¶] | ğŸ”¥ 5å›å†ç”Ÿ                   â”‚ â”‚
â”‚ â”‚ [â–¶ï¸ å†ç”Ÿ] [ğŸ”— å‹•ç”»ã¸] [ğŸ’— ã„ã„ã­]              â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ ğŸµ ã‚ã‚ŠãŒã¨ã†ã”ã–ã„ã¾ã™ (4ç§’) ğŸ‘¤åŒ¿å â°5åˆ†å‰      â”‚ â”‚
â”‚ â”‚ ğŸ“¹ æ„Ÿè¬ã®é…ä¿¡ | â±ï¸ 3:45-3:49                â”‚ â”‚
â”‚ â”‚ ğŸ·ï¸ [æ„Ÿè¬] [ãŠç¤¼] | ğŸ”¥ 12å›å†ç”Ÿ                â”‚ â”‚
â”‚ â”‚ [â–¶ï¸ å†ç”Ÿ] [ğŸ”— å‹•ç”»ã¸] [ğŸ’— ã„ã„ã­]              â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 4. **éŸ³å£°ãƒœã‚¿ãƒ³å†ç”Ÿãƒ•ãƒ­ãƒ¼**

```
ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒãƒœã‚¿ãƒ³ã‚¯ãƒªãƒƒã‚¯
         â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ğŸµ ãŠã¯ã‚ˆã† (3ç§’)        â”‚
â”‚ ğŸ“¹ æœã®æŒ¨æ‹¶é…ä¿¡          â”‚
â”‚ â±ï¸ 1:20-1:23           â”‚
â”‚                        â”‚
â”‚ [â–¶ï¸ YouTubeå‹•ç”»ã§å†ç”Ÿ]  â”‚ â† ãƒ¡ã‚¤ãƒ³æ©Ÿèƒ½
â”‚ [ğŸ”— å‹•ç”»è©³ç´°ã¸]        â”‚
â”‚ [ğŸ’— ã„ã„ã­] [ğŸ’¬ ã‚³ãƒ¡ãƒ³ãƒˆ] â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â†“
YouTubeå‹•ç”»ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼ãŒé–‹ã
æŒ‡å®šæ™‚é–“ï¼ˆ1:20ï¼‰ã‹ã‚‰å†ç”Ÿé–‹å§‹
```

## ğŸ—ï¸ ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£è¨­è¨ˆ

### ã‚·ã‚¹ãƒ†ãƒ å…¨ä½“æ§‹æˆ

```mermaid
graph TB
    A[ãƒ¦ãƒ¼ã‚¶ãƒ¼] --> B[å‹•ç”»è©³ç´°ãƒšãƒ¼ã‚¸]
    B --> C[éŸ³å£°ãƒœã‚¿ãƒ³ä½œæˆãƒšãƒ¼ã‚¸]
    C --> D[YouTube Player API]
    C --> E[ã‚¿ã‚¤ãƒ ã‚¹ã‚¿ãƒ³ãƒ—é¸æŠUI]
    E --> F[éŸ³å£°ãƒœã‚¿ãƒ³æƒ…å ±å…¥åŠ›]
    F --> G[Server Actions]
    G --> H[Firestore]
    H --> I[éŸ³å£°ãƒœã‚¿ãƒ³ä¸€è¦§]
    I --> J[YouTubeå‹•ç”»å†ç”Ÿ]
    
    subgraph "ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰"
        B
        C
        D
        E
        F
        I
    end
    
    subgraph "ã‚µãƒ¼ãƒãƒ¼ã‚µã‚¤ãƒ‰"
        G
        H
    end
    
    subgraph "å¤–éƒ¨ã‚µãƒ¼ãƒ“ã‚¹"
        D
        J
    end
```

### ãƒ‡ãƒ¼ã‚¿ãƒ•ãƒ­ãƒ¼

#### 1. éŸ³å£°ãƒœã‚¿ãƒ³ä½œæˆãƒ•ãƒ­ãƒ¼
```
å‹•ç”»è¦–è´ â†’ æ°—ã«ãªã‚‹ã‚»ãƒªãƒ•ç™ºè¦‹ â†’ ä½œæˆãƒšãƒ¼ã‚¸é·ç§» â†’ 
ã‚¿ã‚¤ãƒ ã‚¹ã‚¿ãƒ³ãƒ—æŒ‡å®š â†’ ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿å…¥åŠ› â†’ ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼ç¢ºèª â†’ 
Server Actions â†’ Firestoreä¿å­˜ â†’ ä¸€è¦§ã«è¡¨ç¤º
```

#### 2. éŸ³å£°ãƒœã‚¿ãƒ³å†ç”Ÿãƒ•ãƒ­ãƒ¼
```
ä¸€è¦§ãƒšãƒ¼ã‚¸ â†’ ãƒœã‚¿ãƒ³ã‚¯ãƒªãƒƒã‚¯ â†’ YouTube Playeré–‹ã â†’ 
æŒ‡å®šæ™‚é–“ã‹ã‚‰å†ç”Ÿ â†’ çµ±è¨ˆæƒ…å ±æ›´æ–°
```

## ğŸ§© ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆè¨­è¨ˆ

### 1. **AudioReferenceCreator**ï¼ˆéŸ³å£°ãƒœã‚¿ãƒ³ä½œæˆï¼‰

```tsx
// apps/web/src/components/AudioReferenceCreator.tsx
'use client';

import { useState, useCallback, useRef } from 'react';
import { createAudioReference } from '../app/buttons/actions';

interface AudioReferenceCreatorProps {
  videoId: string;
  videoTitle: string;
  videoDuration: number;
  initialStartTime?: number;
}

export default function AudioReferenceCreator({
  videoId,
  videoTitle,
  videoDuration,
  initialStartTime = 0,
}: AudioReferenceCreatorProps) {
  // State management
  const [startTime, setStartTime] = useState(initialStartTime);
  const [endTime, setEndTime] = useState(initialStartTime + 5);
  const [title, setTitle] = useState('');
  const [category, setCategory] = useState<AudioButtonCategory>('other');
  const [tags, setTags] = useState<string[]>([]);
  const [description, setDescription] = useState('');
  const [isCreating, setIsCreating] = useState(false);
  
  const youtubePlayerRef = useRef<any>(null);
  
  // YouTube Playerçµ±åˆ
  const handlePlayerReady = useCallback((player: any) => {
    youtubePlayerRef.current = player;
  }, []);
  
  // ç¾åœ¨æ™‚é–“ã‚’é–‹å§‹æ™‚é–“ã«è¨­å®š
  const setCurrentTimeAsStart = useCallback(() => {
    if (youtubePlayerRef.current) {
      const currentTime = youtubePlayerRef.current.getCurrentTime();
      setStartTime(Math.floor(currentTime));
      setEndTime(Math.floor(currentTime) + 5);
    }
  }, []);
  
  // é¸æŠç¯„å›²ã‚’ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼å†ç”Ÿ
  const previewRange = useCallback(() => {
    if (youtubePlayerRef.current) {
      youtubePlayerRef.current.seekTo(startTime);
      youtubePlayerRef.current.playVideo();
      
      // çµ‚äº†æ™‚é–“ã§åœæ­¢
      setTimeout(() => {
        youtubePlayerRef.current.pauseVideo();
      }, (endTime - startTime) * 1000);
    }
  }, [startTime, endTime]);
  
  // éŸ³å£°ãƒœã‚¿ãƒ³ä½œæˆ
  const handleCreate = useCallback(async () => {
    if (!title.trim() || startTime >= endTime) return;
    
    setIsCreating(true);
    try {
      const result = await createAudioReference({
        videoId,
        title: title.trim(),
        startTime,
        endTime,
        category,
        tags,
        description: description.trim(),
      });
      
      if (result.success) {
        // æˆåŠŸæ™‚ã®å‡¦ç†
        router.push(`/buttons/${result.audioReference.id}`);
      } else {
        // ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°
        setError(result.error || 'ä½œæˆã«å¤±æ•—ã—ã¾ã—ãŸ');
      }
    } catch (error) {
      console.error('ä½œæˆã‚¨ãƒ©ãƒ¼:', error);
      setError('äºˆæœŸã—ãªã„ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¾ã—ãŸ');
    } finally {
      setIsCreating(false);
    }
  }, [videoId, title, startTime, endTime, category, tags, description]);
  
  return (
    <div className="max-w-4xl mx-auto space-y-6">
      {/* ãƒšãƒ¼ã‚¸ãƒ˜ãƒƒãƒ€ãƒ¼ */}
      <div>
        <h1 className="text-3xl font-bold text-gray-900">éŸ³å£°ãƒœã‚¿ãƒ³ã‚’ä½œæˆ</h1>
        <p className="text-gray-600 mt-2">
          å‹•ç”»ã€Œ{videoTitle}ã€ã‹ã‚‰éŸ³å£°ãƒœã‚¿ãƒ³ã‚’ä½œæˆã—ã¾ã™
        </p>
      </div>
      
      {/* YouTube Player */}
      <Card>
        <CardHeader>
          <CardTitle>å¯¾è±¡å‹•ç”»</CardTitle>
        </CardHeader>
        <CardContent>
          <YouTubePlayer
            videoId={videoId}
            onReady={handlePlayerReady}
            onTimeUpdate={setCurrentTime}
          />
        </CardContent>
      </Card>
      
      {/* ã‚¿ã‚¤ãƒ ã‚¹ã‚¿ãƒ³ãƒ—é¸æŠ */}
      <Card>
        <CardHeader>
          <CardTitle>ã‚¿ã‚¤ãƒ ã‚¹ã‚¿ãƒ³ãƒ—é¸æŠ</CardTitle>
          <CardDescription>
            éŸ³å£°ãƒœã‚¿ãƒ³ã«ã—ãŸã„éƒ¨åˆ†ã®é–‹å§‹ãƒ»çµ‚äº†æ™‚é–“ã‚’æŒ‡å®šã—ã¦ãã ã•ã„
          </CardDescription>
        </CardHeader>
        <CardContent className="space-y-4">
          {/* é–‹å§‹æ™‚é–“ */}
          <div>
            <label className="block text-sm font-medium mb-2">
              é–‹å§‹æ™‚é–“: {formatTime(startTime)}
            </label>
            <Slider
              value={[startTime]}
              onValueChange={([value]) => setStartTime(value)}
              max={videoDuration}
              step={1}
              className="w-full"
            />
          </div>
          
          {/* çµ‚äº†æ™‚é–“ */}
          <div>
            <label className="block text-sm font-medium mb-2">
              çµ‚äº†æ™‚é–“: {formatTime(endTime)}
            </label>
            <Slider
              value={[endTime]}
              onValueChange={([value]) => setEndTime(value)}
              min={startTime + 1}
              max={Math.min(startTime + 30, videoDuration)}
              step={1}
              className="w-full"
            />
          </div>
          
          {/* ã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ«ãƒœã‚¿ãƒ³ */}
          <div className="flex gap-3">
            <Button onClick={setCurrentTimeAsStart} variant="outline">
              ğŸ“ ç¾åœ¨æ™‚é–“ã‚’é–‹å§‹ã«
            </Button>
            <Button onClick={previewRange} variant="outline">
              â¯ï¸ ç¯„å›²ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼
            </Button>
          </div>
          
          {/* æƒ…å ±è¡¨ç¤º */}
          <div className="p-3 bg-gray-50 rounded-lg">
            <p className="text-sm text-gray-600">
              é¸æŠç¯„å›²: {formatTime(startTime)} - {formatTime(endTime)} 
              ({endTime - startTime}ç§’)
            </p>
          </div>
        </CardContent>
      </Card>
      
      {/* ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿å…¥åŠ› */}
      <Card>
        <CardHeader>
          <CardTitle>éŸ³å£°ãƒœã‚¿ãƒ³æƒ…å ±</CardTitle>
        </CardHeader>
        <CardContent className="space-y-4">
          {/* ã‚¿ã‚¤ãƒˆãƒ« */}
          <div>
            <label className="block text-sm font-medium mb-2">
              ã‚¿ã‚¤ãƒˆãƒ« *
            </label>
            <Input
              value={title}
              onChange={(e) => setTitle(e.target.value)}
              placeholder="ä¾‹: ãŠã¯ã‚ˆã†ã”ã–ã„ã¾ã™"
              maxLength={50}
            />
          </div>
          
          {/* ã‚«ãƒ†ã‚´ãƒª */}
          <div>
            <label className="block text-sm font-medium mb-2">
              ã‚«ãƒ†ã‚´ãƒª
            </label>
            <Select value={category} onValueChange={setCategory}>
              <SelectTrigger>
                <SelectValue />
              </SelectTrigger>
              <SelectContent>
                <SelectItem value="greeting">æŒ¨æ‹¶</SelectItem>
                <SelectItem value="thanks">æ„Ÿè¬</SelectItem>
                <SelectItem value="emotion">æ„Ÿæƒ…è¡¨ç¾</SelectItem>
                <SelectItem value="other">ãã®ä»–</SelectItem>
              </SelectContent>
            </Select>
          </div>
          
          {/* ã‚¿ã‚° */}
          <div>
            <label className="block text-sm font-medium mb-2">
              ã‚¿ã‚°
            </label>
            <TagInput
              tags={tags}
              onChange={setTags}
              placeholder="ã‚¿ã‚°ã‚’å…¥åŠ›..."
              maxTags={10}
            />
          </div>
          
          {/* èª¬æ˜ */}
          <div>
            <label className="block text-sm font-medium mb-2">
              èª¬æ˜ï¼ˆä»»æ„ï¼‰
            </label>
            <Textarea
              value={description}
              onChange={(e) => setDescription(e.target.value)}
              placeholder="ã“ã®éŸ³å£°ãƒœã‚¿ãƒ³ã®èª¬æ˜..."
              maxLength={200}
              rows={3}
            />
          </div>
        </CardContent>
      </Card>
      
      {/* ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼ */}
      <Card>
        <CardHeader>
          <CardTitle>ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼</CardTitle>
        </CardHeader>
        <CardContent>
          <AudioReferenceCard
            audioReference={{
              id: 'preview',
              title: title || '(ã‚¿ã‚¤ãƒˆãƒ«ãªã—)',
              videoId,
              videoTitle,
              startTime,
              endTime,
              duration: endTime - startTime,
              category,
              tags,
              description,
              createdBy: 'anonymous',
              createdAt: new Date(),
              updatedAt: new Date(),
              playCount: 0,
              likeCount: 0,
            }}
            isPreview={true}
          />
        </CardContent>
      </Card>
      
      {/* ä½œæˆãƒœã‚¿ãƒ³ */}
      <div className="flex justify-end gap-3">
        <Button variant="outline" asChild>
          <Link href={`/videos/${videoId}`}>ã‚­ãƒ£ãƒ³ã‚»ãƒ«</Link>
        </Button>
        <Button
          onClick={handleCreate}
          disabled={!title.trim() || startTime >= endTime || isCreating}
          className="min-w-[200px]"
        >
          {isCreating ? (
            <>
              <Loader2 className="h-4 w-4 mr-2 animate-spin" />
              ä½œæˆä¸­...
            </>
          ) : (
            <>
              <Plus className="h-4 w-4 mr-2" />
              éŸ³å£°ãƒœã‚¿ãƒ³ã‚’ä½œæˆ
            </>
          )}
        </Button>
      </div>
    </div>
  );
}
```

### 2. **AudioReferenceCard**ï¼ˆéŸ³å£°ãƒœã‚¿ãƒ³è¡¨ç¤ºï¼‰

```tsx
// apps/web/src/components/AudioReferenceCard.tsx
'use client';

import { useState } from 'react';
import { updateAudioReferenceStats } from '../app/buttons/actions';

interface AudioReferenceCardProps {
  audioReference: AudioReference;
  size?: 'sm' | 'md' | 'lg';
  variant?: 'default' | 'compact' | 'detailed';
  showSourceVideo?: boolean;
  isPreview?: boolean;
}

export default function AudioReferenceCard({
  audioReference,
  size = 'md',
  variant = 'default',
  showSourceVideo = true,
  isPreview = false,
}: AudioReferenceCardProps) {
  const [isPlaying, setIsPlaying] = useState(false);
  const [playCount, setPlayCount] = useState(audioReference.playCount);
  const [likeCount, setLikeCount] = useState(audioReference.likeCount);
  const [isLiked, setIsLiked] = useState(false);
  
  // YouTubeå‹•ç”»ã‚’é–‹ã„ã¦æŒ‡å®šæ™‚é–“ã‹ã‚‰å†ç”Ÿ
  const handlePlay = async () => {
    if (isPreview) return;
    
    setIsPlaying(true);
    
    // çµ±è¨ˆæƒ…å ±æ›´æ–°
    try {
      await updateAudioReferenceStats(audioReference.id, 'play');
      setPlayCount(prev => prev + 1);
    } catch (error) {
      console.error('çµ±è¨ˆæ›´æ–°ã‚¨ãƒ©ãƒ¼:', error);
    }
    
    // YouTubeå‹•ç”»ã‚’æ–°ã—ã„ã‚¿ãƒ–ã§é–‹ã
    const youtubeUrl = `https://youtube.com/watch?v=${audioReference.videoId}&t=${audioReference.startTime}s`;
    window.open(youtubeUrl, '_blank');
    
    setTimeout(() => {
      setIsPlaying(false);
    }, 1000);
  };
  
  // ã„ã„ã­æ©Ÿèƒ½
  const handleLike = async () => {
    if (isPreview) return;
    
    try {
      const action = isLiked ? 'unlike' : 'like';
      await updateAudioReferenceStats(audioReference.id, action);
      
      setIsLiked(!isLiked);
      setLikeCount(prev => isLiked ? prev - 1 : prev + 1);
    } catch (error) {
      console.error('ã„ã„ã­æ›´æ–°ã‚¨ãƒ©ãƒ¼:', error);
    }
  };
  
  // å‹•ç”»è©³ç´°ãƒšãƒ¼ã‚¸ã¸é·ç§»
  const goToVideo = () => {
    if (isPreview) return;
    router.push(`/videos/${audioReference.videoId}?t=${audioReference.startTime}`);
  };
  
  const cardClassName = cn(
    'border rounded-lg transition-all duration-200',
    {
      'p-3': size === 'sm',
      'p-4': size === 'md',
      'p-6': size === 'lg',
      'hover:shadow-md hover:border-primary/20': !isPreview,
      'bg-gray-50 border-dashed': isPreview,
    }
  );
  
  return (
    <Card className={cardClassName}>
      <CardContent className="space-y-3">
        {/* ãƒ˜ãƒƒãƒ€ãƒ¼ */}
        <div className="flex items-start justify-between">
          <div className="flex-1 min-w-0">
            <h3 className={cn(
              'font-medium text-gray-900 truncate',
              {
                'text-sm': size === 'sm',
                'text-base': size === 'md',
                'text-lg': size === 'lg',
              }
            )}>
              ğŸµ {audioReference.title}
            </h3>
            <p className="text-sm text-gray-500">
              {audioReference.duration}ç§’
            </p>
          </div>
          <Badge variant="secondary" className="ml-2">
            {getCategoryLabel(audioReference.category)}
          </Badge>
        </div>
        
        {/* å‹•ç”»æƒ…å ± */}
        {showSourceVideo && (
          <div className="text-sm text-gray-600">
            <p className="flex items-center">
              ğŸ“¹ {audioReference.videoTitle}
            </p>
            <p className="flex items-center mt-1">
              â±ï¸ {formatTime(audioReference.startTime)} - {formatTime(audioReference.endTime)}
            </p>
          </div>
        )}
        
        {/* ã‚¿ã‚° */}
        {audioReference.tags && audioReference.tags.length > 0 && (
          <div className="flex flex-wrap gap-1">
            {audioReference.tags.map((tag) => (
              <Badge key={tag} variant="outline" className="text-xs">
                {tag}
              </Badge>
            ))}
          </div>
        )}
        
        {/* çµ±è¨ˆæƒ…å ± */}
        <div className="flex items-center gap-4 text-sm text-gray-500">
          <span className="flex items-center">
            ğŸ”¥ {playCount}å›å†ç”Ÿ
          </span>
          <span className="flex items-center">
            ğŸ’— {likeCount}
          </span>
          <span>
            â° {formatRelativeTime(audioReference.createdAt)}
          </span>
        </div>
        
        {/* ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ãƒœã‚¿ãƒ³ */}
        <div className="flex gap-2">
          <Button
            onClick={handlePlay}
            disabled={isPlaying || isPreview}
            className="flex-1"
            size={size === 'sm' ? 'sm' : 'default'}
          >
            {isPlaying ? (
              <>
                <Loader2 className="h-4 w-4 mr-2 animate-spin" />
                å†ç”Ÿä¸­...
              </>
            ) : (
              <>
                <Play className="h-4 w-4 mr-2" />
                YouTube ã§å†ç”Ÿ
              </>
            )}
          </Button>
          
          {variant === 'detailed' && (
            <>
              <Button
                variant="outline"
                onClick={goToVideo}
                disabled={isPreview}
                size={size === 'sm' ? 'sm' : 'default'}
              >
                <ExternalLink className="h-4 w-4" />
              </Button>
              <Button
                variant="outline"
                onClick={handleLike}
                disabled={isPreview}
                size={size === 'sm' ? 'sm' : 'default'}
                className={cn(isLiked && 'text-red-500')}
              >
                <Heart className={cn('h-4 w-4', isLiked && 'fill-current')} />
              </Button>
            </>
          )}
        </div>
        
        {/* èª¬æ˜ï¼ˆè©³ç´°è¡¨ç¤ºæ™‚ã®ã¿ï¼‰ */}
        {variant === 'detailed' && audioReference.description && (
          <div className="pt-3 border-t">
            <p className="text-sm text-gray-600">
              {audioReference.description}
            </p>
          </div>
        )}
      </CardContent>
    </Card>
  );
}
```

### 3. **YouTubePlayer**ï¼ˆYouTubeçµ±åˆï¼‰

```tsx
// apps/web/src/components/YouTubePlayer.tsx
'use client';

import { useCallback, useEffect, useRef } from 'react';

interface YouTubePlayerProps {
  videoId: string;
  onReady?: (player: any) => void;
  onTimeUpdate?: (currentTime: number) => void;
  onStateChange?: (state: number) => void;
  startTime?: number;
  autoplay?: boolean;
  controls?: boolean;
  height?: number;
  width?: string | number;
}

declare global {
  interface Window {
    YT: any;
    onYouTubeIframeAPIReady: () => void;
  }
}

export default function YouTubePlayer({
  videoId,
  onReady,
  onTimeUpdate,
  onStateChange,
  startTime = 0,
  autoplay = false,
  controls = true,
  height = 400,
  width = '100%',
}: YouTubePlayerProps) {
  const playerRef = useRef<any>(null);
  const containerRef = useRef<HTMLDivElement>(null);
  const timeUpdateIntervalRef = useRef<NodeJS.Timeout | null>(null);
  
  // YouTube IFrame API ã‚’ãƒ­ãƒ¼ãƒ‰
  const loadYouTubeAPI = useCallback(() => {
    if (window.YT && window.YT.Player) {
      initializePlayer();
      return;
    }
    
    const tag = document.createElement('script');
    tag.src = 'https://www.youtube.com/iframe_api';
    const firstScriptTag = document.getElementsByTagName('script')[0];
    firstScriptTag.parentNode?.insertBefore(tag, firstScriptTag);
    
    window.onYouTubeIframeAPIReady = initializePlayer;
  }, []);
  
  // ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼åˆæœŸåŒ–
  const initializePlayer = useCallback(() => {
    if (!containerRef.current || playerRef.current) return;
    
    playerRef.current = new window.YT.Player(containerRef.current, {
      height,
      width,
      videoId,
      playerVars: {
        autoplay: autoplay ? 1 : 0,
        controls: controls ? 1 : 0,
        modestbranding: 1,
        rel: 0,
        showinfo: 0,
        start: startTime,
      },
      events: {
        onReady: handlePlayerReady,
        onStateChange: handleStateChange,
      },
    });
  }, [videoId, height, width, autoplay, controls, startTime]);
  
  const handlePlayerReady = useCallback((event: any) => {
    onReady?.(event.target);
  }, [onReady]);
  
  const handleStateChange = useCallback((event: any) => {
    const state = event.data;
    onStateChange?.(state);
    
    // å†ç”Ÿä¸­ã¯æ™‚é–“æ›´æ–°ã‚’ç›£è¦–
    if (state === window.YT.PlayerState.PLAYING) {
      startTimeUpdateTracking();
    } else {
      stopTimeUpdateTracking();
    }
  }, [onStateChange]);
  
  const startTimeUpdateTracking = useCallback(() => {
    if (timeUpdateIntervalRef.current) return;
    
    timeUpdateIntervalRef.current = setInterval(() => {
      if (playerRef.current && onTimeUpdate) {
        const currentTime = playerRef.current.getCurrentTime();
        onTimeUpdate(currentTime);
      }
    }, 100); // 100msã”ã¨ã«æ›´æ–°
  }, [onTimeUpdate]);
  
  const stopTimeUpdateTracking = useCallback(() => {
    if (timeUpdateIntervalRef.current) {
      clearInterval(timeUpdateIntervalRef.current);
      timeUpdateIntervalRef.current = null;
    }
  }, []);
  
  useEffect(() => {
    loadYouTubeAPI();
    
    return () => {
      stopTimeUpdateTracking();
      if (playerRef.current?.destroy) {
        playerRef.current.destroy();
      }
    };
  }, [loadYouTubeAPI, stopTimeUpdateTracking]);
  
  // videoId ãŒå¤‰æ›´ã•ã‚ŒãŸæ™‚ã®å‡¦ç†
  useEffect(() => {
    if (playerRef.current?.loadVideoById) {
      playerRef.current.loadVideoById({
        videoId,
        startSeconds: startTime,
      });
    }
  }, [videoId, startTime]);
  
  return (
    <div className="relative w-full">
      <div
        ref={containerRef}
        className="w-full"
        style={{ aspectRatio: '16 / 9' }}
      />
    </div>
  );
}
```

## ğŸ—„ï¸ ãƒ‡ãƒ¼ã‚¿æ§‹é€ è¨­è¨ˆ

### AudioReferenceå‹å®šç¾©

```typescript
// packages/shared-types/src/audio-reference.ts

import { z } from 'zod';

export const AudioReferenceCategorySchema = z.enum([
  'greeting',    // æŒ¨æ‹¶
  'thanks',      // æ„Ÿè¬
  'emotion',     // æ„Ÿæƒ…è¡¨ç¾
  'reaction',    // ãƒªã‚¢ã‚¯ã‚·ãƒ§ãƒ³
  'catchphrase', // æ±ºã¾ã‚Šæ–‡å¥
  'other',       // ãã®ä»–
]);

export type AudioReferenceCategory = z.infer<typeof AudioReferenceCategorySchema>;

export const AudioReferenceSchema = z.object({
  id: z.string().min(1),
  title: z.string().min(1).max(50),
  videoId: z.string().min(1),
  videoTitle: z.string().min(1),
  startTime: z.number().min(0),
  endTime: z.number().min(0),
  duration: z.number().positive().max(30), // æœ€å¤§30ç§’
  category: AudioReferenceCategorySchema,
  tags: z.array(z.string().max(20)).max(10).optional(),
  description: z.string().max(200).optional(),
  createdBy: z.string().optional(), // èªè¨¼ãªã—ã§ã¯åŒ¿å
  createdAt: z.string().datetime(),
  updatedAt: z.string().datetime(),
  playCount: z.number().default(0),
  likeCount: z.number().default(0),
  isPublic: z.boolean().default(true),
});

export type AudioReference = z.infer<typeof AudioReferenceSchema>;

// Firestoreç”¨ã®å‹
export const FirestoreAudioReferenceSchema = AudioReferenceSchema.omit({
  createdAt: true,
  updatedAt: true,
}).extend({
  createdAt: z.custom<Timestamp>(),
  updatedAt: z.custom<Timestamp>(),
});

export type FirestoreAudioReference = z.infer<typeof FirestoreAudioReferenceSchema>;

// ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰è¡¨ç¤ºç”¨ã®å‹
export const FrontendAudioReferenceSchema = AudioReferenceSchema.omit({
  createdAt: true,
  updatedAt: true,
}).extend({
  createdAt: z.date(),
  updatedAt: z.date(),
});

export type FrontendAudioReference = z.infer<typeof FrontendAudioReferenceSchema>;

// æ¤œç´¢ãƒ»ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼ç”¨ã®å‹
export const AudioReferenceQuerySchema = z.object({
  searchText: z.string().optional(),
  category: AudioReferenceCategorySchema.optional(),
  tags: z.array(z.string()).optional(),
  videoId: z.string().optional(),
  createdBy: z.string().optional(),
  sortBy: z.enum(['newest', 'oldest', 'popular', 'mostPlayed']).default('newest'),
  limit: z.number().min(1).max(100).default(20),
  offset: z.number().min(0).default(0),
  onlyPublic: z.boolean().default(true),
});

export type AudioReferenceQuery = z.infer<typeof AudioReferenceQuerySchema>;

// ä½œæˆç”¨ã®å‹
export const CreateAudioReferenceSchema = AudioReferenceSchema.omit({
  id: true,
  createdAt: true,
  updatedAt: true,
  playCount: true,
  likeCount: true,
  createdBy: true, // ã‚µãƒ¼ãƒãƒ¼ã‚µã‚¤ãƒ‰ã§'anonymous'ã‚’è¨­å®š
});

export type CreateAudioReference = z.infer<typeof CreateAudioReferenceSchema>;

// ã‚«ãƒ†ã‚´ãƒªãƒ©ãƒ™ãƒ«å®šç¾©
export const AUDIO_REFERENCE_CATEGORY_LABELS: Record<AudioReferenceCategory, string> = {
  greeting: 'æŒ¨æ‹¶',
  thanks: 'æ„Ÿè¬',
  emotion: 'æ„Ÿæƒ…è¡¨ç¾',
  reaction: 'ãƒªã‚¢ã‚¯ã‚·ãƒ§ãƒ³',
  catchphrase: 'æ±ºã¾ã‚Šæ–‡å¥',
  other: 'ãã®ä»–',
};

// ä¸¦ã³é †ãƒ©ãƒ™ãƒ«å®šç¾©
export const AUDIO_REFERENCE_SORT_LABELS = {
  newest: 'æ–°ç€é †',
  oldest: 'å¤ã„é †',
  popular: 'äººæ°—é †',
  mostPlayed: 'å†ç”Ÿæ•°é †',
} as const;
```

### Firestoreå¤‰æ›ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£

```typescript
// packages/shared-types/src/audio-reference-utils.ts

import { Timestamp } from 'firebase/firestore';

export function firestoreToFrontendAudioReference(
  firestoreData: FirestoreAudioReference
): FrontendAudioReference {
  return {
    ...firestoreData,
    createdAt: firestoreData.createdAt?.toDate() || new Date(),
    updatedAt: firestoreData.updatedAt?.toDate() || new Date(),
  };
}

export function frontendToFirestoreAudioReference(
  frontendData: FrontendAudioReference
): FirestoreAudioReference {
  return {
    ...frontendData,
    createdAt: Timestamp.fromDate(frontendData.createdAt),
    updatedAt: Timestamp.fromDate(frontendData.updatedAt),
  };
}

export function createAudioReferenceToFirestore(
  createData: CreateAudioReference,
  createdBy: string = 'anonymous' // ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§åŒ¿å
): FirestoreAudioReference {
  const now = Timestamp.now();
  return {
    ...createData,
    id: generateAudioReferenceId(),
    createdBy,
    createdAt: now,
    updatedAt: now,
    playCount: 0,
    likeCount: 0,
    isPublic: true,
  };
}

export function generateAudioReferenceId(): string {
  return `ar_${Date.now()}_${Math.random().toString(36).substr(2, 9)}`;
}

// ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³é–¢æ•°
export function validateAudioReferenceData(data: CreateAudioReference): string[] {
  const errors: string[] = [];
  
  if (data.startTime >= data.endTime) {
    errors.push('çµ‚äº†æ™‚é–“ã¯é–‹å§‹æ™‚é–“ã‚ˆã‚Šå¾Œã§ã‚ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™');
  }
  
  if (data.duration > 30) {
    errors.push('éŸ³å£°ãƒœã‚¿ãƒ³ã®é•·ã•ã¯30ç§’ä»¥ä¸‹ã§ã‚ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™');
  }
  
  if (data.duration < 1) {
    errors.push('éŸ³å£°ãƒœã‚¿ãƒ³ã®é•·ã•ã¯1ç§’ä»¥ä¸Šã§ã‚ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™');
  }
  
  if (data.tags && data.tags.length > 10) {
    errors.push('ã‚¿ã‚°ã¯10å€‹ä»¥ä¸‹ã§ã‚ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™');
  }
  
  return errors;
}

// æ¤œç´¢ç”¨ã®ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£
export function buildFirestoreQuery(query: AudioReferenceQuery) {
  const constraints: any[] = [];
  
  if (query.onlyPublic) {
    constraints.push(['isPublic', '==', true]);
  }
  
  if (query.category) {
    constraints.push(['category', '==', query.category]);
  }
  
  if (query.videoId) {
    constraints.push(['videoId', '==', query.videoId]);
  }
  
  if (query.createdBy) {
    constraints.push(['createdBy', '==', query.createdBy]);
  }
  
  // ä¸¦ã³é †
  let orderBy: [string, 'asc' | 'desc'][];
  switch (query.sortBy) {
    case 'newest':
      orderBy = [['createdAt', 'desc']];
      break;
    case 'oldest':
      orderBy = [['createdAt', 'asc']];
      break;
    case 'popular':
      orderBy = [['likeCount', 'desc'], ['createdAt', 'desc']];
      break;
    case 'mostPlayed':
      orderBy = [['playCount', 'desc'], ['createdAt', 'desc']];
      break;
    default:
      orderBy = [['createdAt', 'desc']];
  }
  
  return { constraints, orderBy, limit: query.limit, offset: query.offset };
}
```

## ğŸš€ ã‚µãƒ¼ãƒãƒ¼ã‚µã‚¤ãƒ‰å®Ÿè£…

### Server Actions

```typescript
// apps/web/src/app/buttons/actions.ts

import { revalidatePath, revalidateTag } from 'next/cache';
import { 
  CreateAudioReference,
  AudioReferenceQuery,
  FrontendAudioReference,
  createAudioReferenceToFirestore,
  validateAudioReferenceData,
} from '@suzumina.click/shared-types';
import { 
  collection,
  doc,
  addDoc,
  updateDoc,
  increment,
  query,
  where,
  orderBy,
  limit,
  getDocs,
  getDoc,
  startAfter,
} from 'firebase/firestore';
import { db } from '@/lib/firestore';

/**
 * éŸ³å£°ãƒœã‚¿ãƒ³ä½œæˆ
 */
export async function createAudioReference(
  data: CreateAudioReference
): Promise<{ success: true; audioReference: FrontendAudioReference } | { success: false; error: string }> {
  try {
    // ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³
    const validationErrors = validateAudioReferenceData(data);
    if (validationErrors.length > 0) {
      return { success: false, error: validationErrors.join(', ') };
    }
    
    // æ—©æœŸå¸‚å ´æŠ•å…¥ã®ãŸã‚èªè¨¼ãªã—ï¼ˆåŒ¿åæŠ•ç¨¿ï¼‰
    const createdBy = 'anonymous';
    
    // Firestoreã«ä¿å­˜
    const firestoreData = createAudioReferenceToFirestore(data, createdBy);
    const docRef = await addDoc(collection(db, 'audioReferences'), firestoreData);
    
    // IDã‚’æ›´æ–°
    await updateDoc(docRef, { id: docRef.id });
    
    // å‹•ç”»ã®éŸ³å£°ãƒœã‚¿ãƒ³çµ±è¨ˆã‚’æ›´æ–°
    await updateVideoAudioButtonStats(data.videoId, 'increment');
    
    // ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã‚’ç„¡åŠ¹åŒ–
    revalidateTag(`audioReferences-video-${data.videoId}`);
    revalidateTag('audioReferences-recent');
    revalidateTag('audioReferences-popular');
    revalidatePath('/buttons');
    revalidatePath(`/videos/${data.videoId}`);
    
    const result: FrontendAudioReference = {
      ...firestoreData,
      id: docRef.id,
      createdAt: firestoreData.createdAt.toDate(),
      updatedAt: firestoreData.updatedAt.toDate(),
    };
    
    return { success: true, audioReference: result };
  } catch (error) {
    console.error('Audio reference creation failed:', error);
    return { success: false, error: 'Internal server error' };
  }
}

/**
 * éŸ³å£°ãƒœã‚¿ãƒ³æ¤œç´¢ãƒ»å–å¾—
 */
export async function getAudioReferences(
  queryParams: AudioReferenceQuery
): Promise<{
  audioReferences: FrontendAudioReference[];
  hasMore: boolean;
  totalCount?: number;
}> {
  try {
    const q = buildFirestoreQuery(queryParams);
    const querySnapshot = await getDocs(q);
    
    const audioReferences: FrontendAudioReference[] = [];
    querySnapshot.forEach((doc) => {
      const data = doc.data() as FirestoreAudioReference;
      audioReferences.push({
        ...data,
        id: doc.id,
        createdAt: data.createdAt.toDate(),
        updatedAt: data.updatedAt.toDate(),
      });
    });
    
    // æ¬¡ã®ãƒšãƒ¼ã‚¸ãŒã‚ã‚‹ã‹ãƒã‚§ãƒƒã‚¯
    const hasMore = audioReferences.length === queryParams.limit;
    
    return { audioReferences, hasMore };
  } catch (error) {
    console.error('Audio references fetch failed:', error);
    return { audioReferences: [], hasMore: false };
  }
}

/**
 * äººæ°—ã®éŸ³å£°ãƒœã‚¿ãƒ³å–å¾—
 */
export async function getPopularAudioReferences(
  limit: number = 10
): Promise<FrontendAudioReference[]> {
  try {
    const q = query(
      collection(db, 'audioReferences'),
      where('isPublic', '==', true),
      orderBy('likeCount', 'desc'),
      orderBy('createdAt', 'desc'),
      limit(limit)
    );
    
    const querySnapshot = await getDocs(q);
    const audioReferences: FrontendAudioReference[] = [];
    
    querySnapshot.forEach((doc) => {
      const data = doc.data() as FirestoreAudioReference;
      audioReferences.push({
        ...data,
        id: doc.id,
        createdAt: data.createdAt.toDate(),
        updatedAt: data.updatedAt.toDate(),
      });
    });
    
    return audioReferences;
  } catch (error) {
    console.error('Popular audio references fetch failed:', error);
    return [];
  }
}

/**
 * æœ€æ–°ã®éŸ³å£°ãƒœã‚¿ãƒ³å–å¾—
 */
export async function getRecentAudioReferences(
  limit: number = 10
): Promise<FrontendAudioReference[]> {
  try {
    const q = query(
      collection(db, 'audioReferences'),
      where('isPublic', '==', true),
      orderBy('createdAt', 'desc'),
      limit(limit)
    );
    
    const querySnapshot = await getDocs(q);
    const audioReferences: FrontendAudioReference[] = [];
    
    querySnapshot.forEach((doc) => {
      const data = doc.data() as FirestoreAudioReference;
      audioReferences.push({
        ...data,
        id: doc.id,
        createdAt: data.createdAt.toDate(),
        updatedAt: data.updatedAt.toDate(),
      });
    });
    
    return audioReferences;
  } catch (error) {
    console.error('Recent audio references fetch failed:', error);
    return [];
  }
}

/**
 * å‹•ç”»åˆ¥éŸ³å£°ãƒœã‚¿ãƒ³å–å¾—
 */
export async function getAudioReferencesByVideo(
  videoId: string,
  limit: number = 20
): Promise<FrontendAudioReference[]> {
  try {
    const q = query(
      collection(db, 'audioReferences'),
      where('videoId', '==', videoId),
      where('isPublic', '==', true),
      orderBy('createdAt', 'desc'),
      limit(limit)
    );
    
    const querySnapshot = await getDocs(q);
    const audioReferences: FrontendAudioReference[] = [];
    
    querySnapshot.forEach((doc) => {
      const data = doc.data() as FirestoreAudioReference;
      audioReferences.push({
        ...data,
        id: doc.id,
        createdAt: data.createdAt.toDate(),
        updatedAt: data.updatedAt.toDate(),
      });
    });
    
    return audioReferences;
  } catch (error) {
    console.error('Video audio references fetch failed:', error);
    return [];
  }
}

/**
 * éŸ³å£°ãƒœã‚¿ãƒ³çµ±è¨ˆæ›´æ–°
 */
export async function updateAudioReferenceStats(
  audioReferenceId: string,
  action: 'play' | 'like' | 'unlike'
): Promise<{ success: boolean }> {
  try {
    const docRef = doc(db, 'audioReferences', audioReferenceId);
    
    const updateData: any = { updatedAt: new Date() };
    
    switch (action) {
      case 'play':
        updateData.playCount = increment(1);
        break;
      case 'like':
        updateData.likeCount = increment(1);
        break;
      case 'unlike':
        updateData.likeCount = increment(-1);
        break;
    }
    
    await updateDoc(docRef, updateData);
    
    // ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã‚’ç„¡åŠ¹åŒ–
    revalidateTag('audioReferences-popular');
    revalidateTag('audioReferences-mostPlayed');
    
    return { success: true };
  } catch (error) {
    console.error('Audio reference stats update failed:', error);
    return { success: false };
  }
}

/**
 * å‹•ç”»ã®éŸ³å£°ãƒœã‚¿ãƒ³çµ±è¨ˆæ›´æ–°
 */
async function updateVideoAudioButtonStats(
  videoId: string,
  action: 'increment' | 'decrement'
): Promise<void> {
  try {
    const videoDocRef = doc(db, 'videos', videoId);
    const videoDoc = await getDoc(videoDocRef);
    
    if (videoDoc.exists()) {
      const updateData: any = {
        updatedAt: new Date(),
        hasAudioButtons: true,
        audioButtonsUpdatedAt: new Date(),
      };
      
      if (action === 'increment') {
        updateData.audioButtonCount = increment(1);
      } else {
        updateData.audioButtonCount = increment(-1);
      }
      
      await updateDoc(videoDocRef, updateData);
      
      // ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã‚’ç„¡åŠ¹åŒ–
      revalidateTag(`video-${videoId}`);
    }
  } catch (error) {
    console.error('Video audio button stats update failed:', error);
  }
}

/**
 * Firestoreã‚¯ã‚¨ãƒªæ§‹ç¯‰
 */
function buildFirestoreQuery(queryParams: AudioReferenceQuery) {
  const constraints = [where('isPublic', '==', true)];
  
  if (queryParams.category) {
    constraints.push(where('category', '==', queryParams.category));
  }
  
  if (queryParams.videoId) {
    constraints.push(where('videoId', '==', queryParams.videoId));
  }
  
  if (queryParams.createdBy) {
    constraints.push(where('createdBy', '==', queryParams.createdBy));
  }
  
  // ä¸¦ã³é †
  let orderByConstraints: any[];
  switch (queryParams.sortBy) {
    case 'newest':
      orderByConstraints = [orderBy('createdAt', 'desc')];
      break;
    case 'oldest':
      orderByConstraints = [orderBy('createdAt', 'asc')];
      break;
    case 'popular':
      orderByConstraints = [orderBy('likeCount', 'desc'), orderBy('createdAt', 'desc')];
      break;
    case 'mostPlayed':
      orderByConstraints = [orderBy('playCount', 'desc'), orderBy('createdAt', 'desc')];
      break;
    default:
      orderByConstraints = [orderBy('createdAt', 'desc')];
  }
  
  return query(
    collection(db, 'audioReferences'),
    ...constraints,
    ...orderByConstraints,
    limit(queryParams.limit)
  );
}
```

### Firestore ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ãƒ«ãƒ¼ãƒ«ï¼ˆèªè¨¼ãªã—ç‰ˆï¼‰

```javascript
// firestore.rules

rules_version = '2';
service cloud.firestore {
  match /databases/{database}/documents {
    // éŸ³å£°ãƒœã‚¿ãƒ³ï¼ˆéŸ³å£°å‚ç…§ï¼‰ã‚³ãƒ¬ã‚¯ã‚·ãƒ§ãƒ³
    match /audioReferences/{audioReferenceId} {
      // èª­ã¿å–ã‚Š: å…¬é–‹ã•ã‚Œã¦ã„ã‚‹ã‚‚ã®ã®ã¿ï¼ˆèª°ã§ã‚‚èª­ã¿å–ã‚Šå¯èƒ½ï¼‰
      allow read: if resource.data.isPublic == true;
      
      // ä½œæˆ: èª°ã§ã‚‚ä½œæˆå¯èƒ½ï¼ˆæ—©æœŸå¸‚å ´æŠ•å…¥ã®ãŸã‚ï¼‰
      allow create: if validateAudioReference(request.resource.data);
      
      // æ›´æ–°: çµ±è¨ˆæƒ…å ±ã®ã¿èª°ã§ã‚‚æ›´æ–°å¯èƒ½ï¼ˆå†ç”Ÿå›æ•°ã€ã„ã„ã­æ•°ï¼‰
      allow update: if onlyStatsUpdated(request.resource.data, resource.data);
      
      // å‰Šé™¤: ç¦æ­¢ï¼ˆåŒ¿åæŠ•ç¨¿ã®ãŸã‚å‰Šé™¤ä¸å¯ï¼‰
      allow delete: if false;
    }
    
    // ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³é–¢æ•°
    function validateAudioReference(data) {
      return data.keys().hasAll(['title', 'videoId', 'startTime', 'endTime', 'category'])
        && data.title is string && data.title.size() > 0 && data.title.size() <= 50
        && data.videoId is string && data.videoId.size() > 0
        && data.startTime is number && data.startTime >= 0
        && data.endTime is number && data.endTime > data.startTime
        && (data.endTime - data.startTime) <= 30 // æœ€å¤§30ç§’
        && data.category in ['greeting', 'thanks', 'emotion', 'reaction', 'catchphrase', 'other'];
    }
    
    function onlyStatsUpdated(newData, oldData) {
      return newData.diff(oldData).affectedKeys().hasOnly(['playCount', 'likeCount', 'updatedAt']);
    }
  }
}
```

## ğŸ“Š Firestore ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹è¨­è¨ˆ

### ã‚³ãƒ¬ã‚¯ã‚·ãƒ§ãƒ³æ§‹é€ 

```
suzumina-click-firebase/
â”œâ”€â”€ audioReferences/                     # éŸ³å£°ãƒœã‚¿ãƒ³ï¼ˆéŸ³å£°å‚ç…§ï¼‰
â”‚   â”œâ”€â”€ {audioReferenceId}/
â”‚   â”‚   â”œâ”€â”€ id: string
â”‚   â”‚   â”œâ”€â”€ title: string               # "ãŠã¯ã‚ˆã†ã”ã–ã„ã¾ã™"
â”‚   â”‚   â”œâ”€â”€ videoId: string            # "dQw4w9WgXcQ"
â”‚   â”‚   â”œâ”€â”€ videoTitle: string         # "æœã®æŒ¨æ‹¶é…ä¿¡"
â”‚   â”‚   â”œâ”€â”€ startTime: number          # 125 (2:05)
â”‚   â”‚   â”œâ”€â”€ endTime: number            # 130 (2:10)
â”‚   â”‚   â”œâ”€â”€ duration: number           # 5
â”‚   â”‚   â”œâ”€â”€ category: string           # "greeting"
â”‚   â”‚   â”œâ”€â”€ tags: string[]             # ["æœ", "æŒ¨æ‹¶"]
â”‚   â”‚   â”œâ”€â”€ description?: string       # "æœã®é…ä¿¡ã§ã®æŒ¨æ‹¶ã‚·ãƒ¼ãƒ³"
â”‚   â”‚   â”œâ”€â”€ createdBy: string          # "anonymous"
â”‚   â”‚   â”œâ”€â”€ createdAt: Timestamp
â”‚   â”‚   â”œâ”€â”€ updatedAt: Timestamp
â”‚   â”‚   â”œâ”€â”€ playCount: number          # 42
â”‚   â”‚   â”œâ”€â”€ likeCount: number          # 15
â”‚   â”‚   â””â”€â”€ isPublic: boolean          # true
â”‚   â””â”€â”€ ...
â”œâ”€â”€ videos/ (æ—¢å­˜)                       # YouTubeå‹•ç”»æƒ…å ±
â”‚   â”œâ”€â”€ {videoId}/
â”‚   â”‚   â”œâ”€â”€ ... (æ—¢å­˜ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰)
â”‚   â”‚   â”œâ”€â”€ audioButtonCount: number    # è¿½åŠ : 3
â”‚   â”‚   â”œâ”€â”€ hasAudioButtons: boolean    # è¿½åŠ : true
â”‚   â”‚   â””â”€â”€ audioButtonsUpdatedAt: Timestamp # è¿½åŠ 
â”‚   â””â”€â”€ ...
â””â”€â”€ works/ (æ—¢å­˜)                        # DLsiteä½œå“æƒ…å ±
```

### ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹è¨­è¨ˆ

```typescript
// Firestore Composite Indexes

// 1. ã‚«ãƒ†ã‚´ãƒªåˆ¥ãƒ»ä½œæˆæ—¥æ™‚é †
Collection: audioReferences
Fields: category(Ascending), createdAt(Descending)

// 2. å‹•ç”»åˆ¥ãƒ»ä½œæˆæ—¥æ™‚é †
Collection: audioReferences
Fields: videoId(Ascending), isPublic(Ascending), createdAt(Descending)

// 3. äººæ°—é †ï¼ˆã„ã„ã­æ•°ãƒ»ä½œæˆæ—¥æ™‚ï¼‰
Collection: audioReferences
Fields: isPublic(Ascending), likeCount(Descending), createdAt(Descending)

// 4. å†ç”Ÿæ•°é †
Collection: audioReferences
Fields: isPublic(Ascending), playCount(Descending), createdAt(Descending)

// 5. ãƒ¦ãƒ¼ã‚¶ãƒ¼ä½œæˆé †
Collection: audioReferences
Fields: createdBy(Ascending), createdAt(Descending)

// 6. ã‚¿ã‚°æ¤œç´¢ï¼ˆé…åˆ—containsï¼‰
Collection: audioReferences
Fields: tags(Array-contains), isPublic(Ascending), createdAt(Descending)

// 7. è¤‡åˆæ¤œç´¢ï¼ˆã‚«ãƒ†ã‚´ãƒª + äººæ°—é †ï¼‰
Collection: audioReferences
Fields: category(Ascending), isPublic(Ascending), likeCount(Descending)
```

## ğŸš€ å®Ÿè£…ãƒ•ã‚§ãƒ¼ã‚º

### Phase 1: åŸºç›¤å®Ÿè£…ï¼ˆ1é€±é–“ï¼‰

#### Day 1-2: ãƒ‡ãƒ¼ã‚¿æ§‹é€ ãƒ»å‹å®šç¾©
- [ ] `AudioReference` å‹å®šç¾©ã‚’ `shared-types` ã«è¿½åŠ 
- [ ] Firestoreå¤‰æ›ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£ä½œæˆ
- [ ] ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³é–¢æ•°å®Ÿè£…

#### Day 3-4: Server Actionså®Ÿè£…
- [ ] `createAudioReference` å®Ÿè£…
- [ ] `getAudioReferences` å®Ÿè£…
- [ ] çµ±è¨ˆæ›´æ–°æ©Ÿèƒ½å®Ÿè£…

#### Day 5-7: åŸºæœ¬ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ
- [ ] `YouTubePlayer` ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ
- [ ] `AudioReferenceCard` åŸºæœ¬ç‰ˆ
- [ ] éŸ³å£°ãƒœã‚¿ãƒ³ä¸€è¦§ãƒšãƒ¼ã‚¸æ‹¡å¼µ

### Phase 2: å®Œæˆãƒ»çµ±åˆï¼ˆ1é€±é–“ï¼‰

#### Day 8-10: ä½œæˆUIå®Ÿè£…
- [ ] `AudioReferenceCreator` å®Œå…¨ç‰ˆ
- [ ] ã‚¿ã‚¤ãƒ ã‚¹ã‚¿ãƒ³ãƒ—é¸æŠUI
- [ ] ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼æ©Ÿèƒ½

#### Day 11-12: çµ±åˆãƒ»æœ€é©åŒ–
- [ ] å‹•ç”»è©³ç´°ãƒšãƒ¼ã‚¸çµ±åˆ
- [ ] æ¤œç´¢ãƒ»ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼æ©Ÿèƒ½
- [ ] ãƒ¬ã‚¹ãƒãƒ³ã‚·ãƒ–ãƒ‡ã‚¶ã‚¤ãƒ³

#### Day 13-14: ãƒ†ã‚¹ãƒˆãƒ»ãƒªãƒªãƒ¼ã‚¹æº–å‚™
- [ ] E2Eãƒ†ã‚¹ãƒˆ
- [ ] ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æœ€é©åŒ–
- [ ] Firestore ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ãƒ«ãƒ¼ãƒ«
- [ ] æœ¬ç•ªãƒ‡ãƒ—ãƒ­ã‚¤

**ç·é–‹ç™ºæœŸé–“: 2é€±é–“**

## ğŸ”’ ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ãƒ»é‹ç”¨è¨­è¨ˆ

### èªè¨¼ãƒ»èªå¯ï¼ˆèªè¨¼ãªã—ç‰ˆï¼‰
- **ä½œæˆæ¨©é™**: èª°ã§ã‚‚ä½œæˆå¯èƒ½ï¼ˆåŒ¿åæŠ•ç¨¿ï¼‰
- **ç·¨é›†æ¨©é™**: ç·¨é›†ä¸å¯ï¼ˆåŒ¿åã®ãŸã‚ï¼‰
- **çµ±è¨ˆæ›´æ–°**: èª°ã§ã‚‚å¯èƒ½ï¼ˆå†ç”Ÿå›æ•°ã€ã„ã„ã­æ•°ï¼‰
- **å‰Šé™¤æ¨©é™**: å‰Šé™¤ä¸å¯ï¼ˆåŒ¿åæŠ•ç¨¿ã®ãŸã‚ï¼‰

### ãƒ¬ãƒ¼ãƒˆåˆ¶é™ï¼ˆèªè¨¼ãªã—ç‰ˆï¼‰
- **ä½œæˆåˆ¶é™**: IPã‚ãŸã‚Š1æ—¥20å€‹ã¾ã§ï¼ˆã‚¹ãƒ‘ãƒ é˜²æ­¢ï¼‰
- **çµ±è¨ˆæ›´æ–°**: IPã‚ãŸã‚Š1åˆ†é–“50å›ã¾ã§
- **æ¤œç´¢API**: IPã‚ãŸã‚Š1åˆ†é–“200å›ã¾ã§

### ãƒ¢ãƒ‡ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ï¼ˆèªè¨¼ãªã—ç‰ˆï¼‰
- **è‡ªå‹•ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼**: ä¸é©åˆ‡ãªã‚¿ã‚¤ãƒˆãƒ«ãƒ»èª¬æ˜ã®æ¤œå‡º
- **å ±å‘Šã‚·ã‚¹ãƒ†ãƒ **: åŒ¿åã§ã®ä¸é©åˆ‡ã‚³ãƒ³ãƒ†ãƒ³ãƒ„å ±å‘Š
- **ç®¡ç†è€…æ¨©é™**: ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã®éå…¬é–‹ãƒ»å‰Šé™¤ï¼ˆæ‰‹å‹•ãƒ¢ãƒ‡ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ï¼‰
- **ãƒ—ãƒªãƒŸãƒ†ã‚£ãƒ–å¯¾ç­–**: åŒä¸€IPã‹ã‚‰ã®å¤§é‡æŠ•ç¨¿é˜²æ­¢

### ç›£è¦–ãƒ»åˆ†æ
- **ä½¿ç”¨é‡ç›£è¦–**: Firestoreèª­ã¿æ›¸ãå›æ•°
- **äººæ°—ã‚³ãƒ³ãƒ†ãƒ³ãƒ„**: å†ç”Ÿãƒ»ã„ã„ã­çµ±è¨ˆ
- **ãƒ¦ãƒ¼ã‚¶ãƒ¼è¡Œå‹•**: ä½œæˆãƒ»å†ç”Ÿãƒ‘ã‚¿ãƒ¼ãƒ³åˆ†æ

## ğŸ¯ æœŸå¾…ã•ã‚Œã‚‹åŠ¹æœ

### ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚¨ã‚¯ã‚¹ãƒšãƒªã‚¨ãƒ³ã‚¹
- **ç°¡å˜æ“ä½œ**: å‹•ç”»è¦–è´ä¸­ã«ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ã§ãƒœã‚¿ãƒ³ä½œæˆ
- **å³åº§ã®å…±æœ‰**: ä½œæˆå¾Œã™ãã«ã‚³ãƒŸãƒ¥ãƒ‹ãƒ†ã‚£ã§å…±æœ‰
- **ç™ºè¦‹æ€§**: ã‚«ãƒ†ã‚´ãƒªãƒ»ã‚¿ã‚°ã«ã‚ˆã‚‹éŸ³å£°ãƒœã‚¿ãƒ³ç™ºè¦‹
- **YouTubeé€£æº**: å…ƒå‹•ç”»ã¸ã®ç›´æ¥ã‚¸ãƒ£ãƒ³ãƒ—

### ã‚³ãƒŸãƒ¥ãƒ‹ãƒ†ã‚£ä¾¡å€¤
- **åå ´é¢å…±æœ‰**: ãƒ•ã‚¡ãƒ³åŒå£«ã§ã®å°è±¡çš„ãªã‚·ãƒ¼ãƒ³å…±æœ‰
- **äºŒæ¬¡å‰µä½œæ”¯æ´**: éŸ³å£°ãƒœã‚¿ãƒ³ã‚’ä½¿ã£ãŸå‰µä½œæ´»å‹•
- **ãƒãƒ£ãƒ³ãƒãƒ«è²¢çŒ®**: YouTubeå‹•ç”»ã®å†ç”Ÿå›æ•°å‘ä¸Š
- **ãƒ•ã‚¡ãƒ³ã‚¨ãƒ³ã‚²ãƒ¼ã‚¸ãƒ¡ãƒ³ãƒˆ**: ã‚ˆã‚Šæ·±ã„ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ç†è§£

### æŠ€è¡“çš„åˆ©ç‚¹
- **æ³•çš„å®‰å…¨æ€§**: YouTubeè¦ç´„å®Œå…¨æº–æ‹ 
- **å®Ÿè£…ç°¡å˜**: 2é€±é–“ã§æœ¬æ ¼é‹ç”¨é–‹å§‹
- **ã‚³ã‚¹ãƒˆåŠ¹ç‡**: ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸è²»ç”¨ä¸è¦
- **ã‚¹ã‚±ãƒ¼ãƒ©ãƒ“ãƒªãƒ†ã‚£**: Firestoreã«ã‚ˆã‚‹è‡ªå‹•ã‚¹ã‚±ãƒ¼ãƒªãƒ³ã‚°

---

ã“ã®**ã‚¿ã‚¤ãƒ ã‚¹ã‚¿ãƒ³ãƒ—å‚ç…§ã‚·ã‚¹ãƒ†ãƒ **ã«ã‚ˆã‚Šã€å®Ÿç”¨çš„ã§æŒç¶šå¯èƒ½ãªéŸ³å£°ãƒœã‚¿ãƒ³æ©Ÿèƒ½ã‚’æä¾›ã—ã€suzumina.clickã‚’çœŸã®ãƒ•ã‚¡ãƒ³ã‚³ãƒŸãƒ¥ãƒ‹ãƒ†ã‚£ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ ã¨ã—ã¦ç¢ºç«‹ã§ãã¾ã™ã€‚