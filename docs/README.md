# suzumina.click

æ¶¼èŠ±ã¿ãªã›ãƒ•ã‚¡ãƒ³ã‚µã‚¤ãƒˆ - YouTubeå‹•ç”»ã‹ã‚‰éŸ³å£°ãƒœã‚¿ãƒ³ã‚’ä½œæˆã—ã€DLsiteä½œå“æƒ…å ±ã‚’è¡¨ç¤ºã™ã‚‹Webã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³

## ğŸ¯ ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæ¦‚è¦

suzumina.clickã¯ã€VTuberã€Œæ¶¼èŠ±ã¿ãªã›ã€ã®ãƒ•ã‚¡ãƒ³ã‚³ãƒŸãƒ¥ãƒ‹ãƒ†ã‚£å‘ã‘Webã‚µã‚¤ãƒˆã§ã™ã€‚YouTubeå‹•ç”»ã‹ã‚‰éŸ³å£°ãƒœã‚¿ãƒ³ã‚’ä½œæˆãƒ»å…±æœ‰ã—ã€DLsiteã§ã®æœ€æ–°ä½œå“æƒ…å ±ã‚’ç¢ºèªã§ãã‚‹ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ ã‚’æä¾›ã—ã¾ã™ã€‚

### ç¾åœ¨ã®é–‹ç™ºçŠ¶æ³

**âœ… å®Œäº†æ¸ˆã¿**
- **ãƒ‡ãƒ¼ã‚¿åé›†åŸºç›¤**: YouTubeå‹•ç”»ãƒ»DLsiteä½œå“æƒ…å ±ã®è‡ªå‹•å–å¾—ã‚·ã‚¹ãƒ†ãƒ 
- **ã‚¤ãƒ³ãƒ•ãƒ©åŸºç›¤**: Terraform ã«ã‚ˆã‚‹GCPãƒªã‚½ãƒ¼ã‚¹ç®¡ç†
- **å…±æœ‰å‹å®šç¾©**: Zodã‚¹ã‚­ãƒ¼ãƒãƒ™ãƒ¼ã‚¹ã®å‹å®‰å…¨ãªãƒ‡ãƒ¼ã‚¿æ§‹é€ 
- **é–‹ç™ºç’°å¢ƒ**: Monorepo + é–‹ç™ºãƒ„ãƒ¼ãƒ«æ•´å‚™

**âœ… å®Œäº†æ¸ˆã¿**
- **æœ¬æ ¼Webã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³** (`apps/web`): Server Component + Client Component ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£
- **ãƒšãƒ¼ã‚¸ãƒãƒ¼ã‚·ãƒ§ãƒ³å¯¾å¿œå‹•ç”»ä¸€è¦§**: ç®¡ç†ç”»é¢ã§ã®å‹•ç”»è¡¨ç¤ºæ©Ÿèƒ½
- **Storybookç’°å¢ƒ**: UIã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆé–‹ç™ºãƒ»ãƒ†ã‚¹ãƒˆç’°å¢ƒ

**ğŸš§ é–‹ç™ºä¸­**
- **éŸ³å£°ãƒœã‚¿ãƒ³æ©Ÿèƒ½**: YouTubeå‹•ç”»ã‹ã‚‰ã®éŸ³å£°æŠ½å‡º
- **DLsiteä½œå“è¡¨ç¤º**: ä½œå“ä¸€è¦§ãƒ»è©³ç´°ãƒšãƒ¼ã‚¸

**ğŸ“ å‚è€ƒ**
- **v0ãƒ¢ãƒƒã‚¯** (`apps/v0-suzumina.click`): v0 by Vercelã§ä½œæˆã—ãŸå‚è€ƒUI

### è¨ˆç”»ä¸­ã®ä¸»è¦æ©Ÿèƒ½

- **éŸ³å£°ãƒœã‚¿ãƒ³ä½œæˆ**: YouTubeå‹•ç”»ã‹ã‚‰ç‰¹å®šã®éŸ³å£°ã‚’åˆ‡ã‚Šå‡ºã—ã¦ãƒœã‚¿ãƒ³åŒ–
- **ä½œå“æƒ…å ±è¡¨ç¤º**: DLsiteã®æœ€æ–°ä½œå“æƒ…å ±ã‚’è‡ªå‹•å–å¾—ãƒ»è¡¨ç¤º
- **æ¤œç´¢ãƒ»ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°**: éŸ³å£°ãƒœã‚¿ãƒ³ã¨ä½œå“ã®è©³ç´°æ¤œç´¢
- **ãƒ¬ã‚¹ãƒãƒ³ã‚·ãƒ–UI**: ãƒ‡ã‚¹ã‚¯ãƒˆãƒƒãƒ—ãƒ»ãƒ¢ãƒã‚¤ãƒ«å¯¾å¿œ

## ğŸ—ï¸ ã‚·ã‚¹ãƒ†ãƒ ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£

```mermaid
graph TB
    subgraph "å¤–éƒ¨ã‚µãƒ¼ãƒ“ã‚¹"
        YT[YouTube Data API v3]
        DL[DLsite Website]
    end
    
    subgraph "Google Cloud Platform (æœ¬ç•ªç’°å¢ƒ)"
        CS[Cloud Scheduler<br/>å®šæœŸå®Ÿè¡Œ] --> PS[Pub/Sub Topics<br/>éåŒæœŸãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãƒ³ã‚°]
        PS --> CF[Cloud Functions v2<br/>Node.js 22]
        CF --> FS[Firestore Database<br/>Native mode + è¤‡åˆã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹]
        CF --> YT
        CF --> DL
        
        subgraph "ãƒ‡ãƒ¼ã‚¿åé›† (é‹ç”¨ä¸­)"
            CF1[fetchYouTubeVideos<br/>æ¯æ™‚19åˆ†å®Ÿè¡Œ<br/>512MB, 9åˆ†ã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆ]
            CF2[fetchDLsiteWorks<br/>6,26,46åˆ†/æ™‚é–“å®Ÿè¡Œ<br/>512MB, 9åˆ†ã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆ]
        end
        
        subgraph "éŸ³å£°å‡¦ç† (å°†æ¥å®Ÿè£…)"
            CT[Cloud Tasks<br/>éŸ³å£°å‡¦ç†ã‚­ãƒ¥ãƒ¼] --> CRJ[Cloud Run Jobs<br/>Audio Processor<br/>4CPU, 16GB, 1æ™‚é–“]
            CRJ --> GCS[Cloud Storage<br/>éŸ³å£°ãƒ•ã‚¡ã‚¤ãƒ«ä¿å­˜<br/>ãƒ©ã‚¤ãƒ•ã‚µã‚¤ã‚¯ãƒ«ç®¡ç†]
        end
        
        CF1 --> YT
        CF2 --> DL
        CF1 -.-> CT
        
        subgraph "ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ãƒ»ç®¡ç†"
            SM[Secret Manager<br/>APIã‚­ãƒ¼ç®¡ç†]
            IAM[IAM<br/>æœ€å°æ¨©é™åŸå‰‡]
            MON[Cloud Monitoring<br/>ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ãƒ»ã‚¢ãƒ©ãƒ¼ãƒˆ]
        end
        
        CF --> SM
    end
    
    subgraph "ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ (æœ¬ç•ªé‹ç”¨ä¸­)"
        WEB[æœ¬æ ¼Webã‚¢ãƒ—ãƒª<br/>apps/web<br/>âœ… Next.js 15 App Router]
        MOCK[v0ãƒ¢ãƒƒã‚¯<br/>apps/v0-suzumina.click<br/>ğŸ“ UIãƒªãƒ•ã‚¡ãƒ¬ãƒ³ã‚¹]
        
        WEB --> FS
        WEB -.-> GCS
        MOCK -.-> FS
    end
    
    subgraph "é–‹ç™ºãƒ»ãƒ‡ãƒ—ãƒ­ã‚¤ç’°å¢ƒ"
        GA[GitHub Actions<br/>CI/CD + Workload Identity]
        AR[Artifact Registry<br/>Dockerã‚³ãƒ³ãƒ†ãƒŠ]
        TF[Terraform<br/>Infrastructure as Code]
        
        GA --> AR
        GA --> CF
        GA --> CRJ
    end
    
    style CF1 fill:#e1f5fe
    style CF2 fill:#e8f5e8
    style WEB fill:#e8f5e8
    style MOCK fill:#f5f5f5
    style FS fill:#fce4ec
    style CRJ fill:#fff3e0
    style CT fill:#f3e5f5
    style GCS fill:#e3f2fd
```

## ğŸ› ï¸ æŠ€è¡“ã‚¹ã‚¿ãƒƒã‚¯

### ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰

- **Next.js 15.3.3** - React ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ (App Router)
- **React 19.1.0** - æœ€æ–°Reactæ©Ÿèƒ½
- **TypeScript 5.8.3** - å‹å®‰å…¨æ€§
- **Tailwind CSS v4** - UIã‚¹ã‚¿ã‚¤ãƒªãƒ³ã‚° (PostCSSè¨­å®š)
- **Storybook 9.0.10** - UIã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆé–‹ç™ºãƒ»ãƒ†ã‚¹ãƒˆ
- **Radix UI** - ã‚¢ã‚¯ã‚»ã‚·ãƒ–ãƒ«UIã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ (`packages/ui`)

### ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ãƒ»ã‚¤ãƒ³ãƒ•ãƒ©

- **Google Cloud Functions v2 (Node.js 22)** - ã‚µãƒ¼ãƒãƒ¼ãƒ¬ã‚¹é–¢æ•° (YouTube/DLsite ãƒ‡ãƒ¼ã‚¿åé›†)
- **Google Cloud Run Jobs** - é‡ã„è¨ˆç®—å‡¦ç† (éŸ³å£°æŠ½å‡º: 4CPU/16GB)
- **Google Cloud Firestore** - NoSQLãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ (Native mode + è¤‡åˆã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹)
- **Google Cloud Storage** - ãƒ•ã‚¡ã‚¤ãƒ«ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ (éŸ³å£°ãƒ•ã‚¡ã‚¤ãƒ«ã€ãƒ‡ãƒ—ãƒ­ã‚¤ã‚¢ãƒ¼ãƒ†ã‚£ãƒ•ã‚¡ã‚¯ãƒˆ)
- **Google Cloud Tasks** - ã‚¿ã‚¹ã‚¯ã‚­ãƒ¥ãƒ¼ã‚¤ãƒ³ã‚° (éŸ³å£°å‡¦ç†ã®éåŒæœŸå®Ÿè¡Œ)
- **Google Cloud Pub/Sub** - éåŒæœŸãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãƒ³ã‚° (Scheduler â†’ Functions)
- **Google Cloud Scheduler** - å®šæœŸå®Ÿè¡Œã‚¿ã‚¹ã‚¯ (æ¯æ™‚/20åˆ†é–“éš”)
- **Google Secret Manager** - APIã‚­ãƒ¼ãƒ»ã‚·ãƒ¼ã‚¯ãƒ¬ãƒƒãƒˆç®¡ç†
- **Google Artifact Registry** - Dockerã‚³ãƒ³ãƒ†ãƒŠãƒ¬ã‚¸ã‚¹ãƒˆãƒª
- **Google Cloud Monitoring** - ç›£è¦–ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ãƒ»ã‚¢ãƒ©ãƒ¼ãƒˆ
- **@google-cloud/firestore** - ã‚µãƒ¼ãƒãƒ¼ã‚µã‚¤ãƒ‰Firestoreæ¥ç¶š (apps/webç”¨)

### ã‚¤ãƒ³ãƒ•ãƒ©ãƒ»DevOps

- **Terraform** - Infrastructure as Code (GCPãƒªã‚½ãƒ¼ã‚¹ç®¡ç†)
- **GitHub Actions** - CI/CDãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³ (Workload Identityé€£æº)
- **Google Cloud Build** - ã‚³ãƒ³ãƒ†ãƒŠãƒ“ãƒ«ãƒ‰ãƒ»ãƒ‡ãƒ—ãƒ­ã‚¤
- **pnpm** - ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ãƒãƒãƒ¼ã‚¸ãƒ£ (Workspaceã‚µãƒãƒ¼ãƒˆ)
- **Biome** - Linter/Formatter
- **Lefthook** - Git Hooks
- **Vitest** - ãƒ†ã‚¹ãƒˆãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯

### å¤–éƒ¨API

- **YouTube Data API v3** - å‹•ç”»æƒ…å ±å–å¾—
- **DLsite** - Webã‚¹ã‚¯ãƒ¬ã‚¤ãƒ”ãƒ³ã‚°ã«ã‚ˆã‚‹ä½œå“æƒ…å ±å–å¾—

## ğŸ—ï¸ è¨­è¨ˆåŸå‰‡

### **Next.js 15æº–æ‹ ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£**
- **App Router**: Next.js 15 App Router ã«ã‚ˆã‚‹æœ€æ–°ã®æ§‹æˆ
- **Server Components**: ãƒ‡ãƒ¼ã‚¿å–å¾—ãƒ»è¡¨ç¤ºãƒ­ã‚¸ãƒƒã‚¯
- **Client Components**: ã‚¤ãƒ³ã‚¿ãƒ©ã‚¯ã‚·ãƒ§ãƒ³ãƒ»ãƒ–ãƒ©ã‚¦ã‚¶APIä½¿ç”¨
- **Server Actions**: ãƒšãƒ¼ã‚¸ã¨åŒã˜ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã«é…ç½®ï¼ˆã‚³ãƒ­ã‚±ãƒ¼ã‚·ãƒ§ãƒ³åŸå‰‡ï¼‰
- **ã‚µãƒ¼ãƒãƒ¼ã‚µã‚¤ãƒ‰å„ªå…ˆ**: `@google-cloud/firestore` ã«ã‚ˆã‚‹å®‰å…¨ãªãƒ‡ãƒ¼ã‚¿ã‚¢ã‚¯ã‚»ã‚¹

### **ã‚³ãƒ­ã‚±ãƒ¼ã‚·ãƒ§ãƒ³è¨­è¨ˆ**
```
app/works/
â”œâ”€â”€ page.tsx          # ä½œå“ä¸€è¦§ãƒšãƒ¼ã‚¸
â”œâ”€â”€ actions.ts        # ä½œå“é–¢é€£Server Actions
â”œâ”€â”€ loading.tsx       # ãƒ­ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°UI
â””â”€â”€ [id]/
    â”œâ”€â”€ page.tsx      # ä½œå“è©³ç´°ãƒšãƒ¼ã‚¸
    â””â”€â”€ actions.ts    # è©³ç´°ãƒšãƒ¼ã‚¸ç”¨Actions
```

### **ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£å„ªå…ˆ**
- **ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆåˆ¶é™**: Firestoreæ¥ç¶šã¯ã‚µãƒ¼ãƒãƒ¼ã‚µã‚¤ãƒ‰ã®ã¿
- **å‹å®‰å…¨æ€§**: å…±æœ‰å‹å®šç¾©ã¨Zodã‚¹ã‚­ãƒ¼ãƒã«ã‚ˆã‚‹æ¤œè¨¼
- **æœ€å°æ¨©é™**: å¿…è¦æœ€å°é™ã®ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆçŠ¶æ…‹ç®¡ç†

## ğŸ“ ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæ§‹æˆ

```
suzumina.click/
â”œâ”€â”€ apps/
â”‚   â”œâ”€â”€ functions/                 # Cloud Functions (ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰)
â”‚   â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”‚   â”œâ”€â”€ dlsite.ts         # DLsiteä½œå“å–å¾—
â”‚   â”‚   â”‚   â”œâ”€â”€ youtube.ts        # YouTubeå‹•ç”»å–å¾—
â”‚   â”‚   â”‚   â”œâ”€â”€ index.ts          # ã‚¨ãƒ³ãƒˆãƒªãƒ¼ãƒã‚¤ãƒ³ãƒˆ
â”‚   â”‚   â”‚   â””â”€â”€ utils/            # å…±é€šãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£
â”‚   â”‚   â””â”€â”€ package.json
â”‚   â”œâ”€â”€ web/                      # æœ¬æ ¼Webã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ (é–‹ç™ºå®Œäº†)
â”‚   â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”‚   â”œâ”€â”€ app/             # Next.js App Router (Next.js 15æº–æ‹ )
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ globals.css  # ã‚°ãƒ­ãƒ¼ãƒãƒ«ã‚¹ã‚¿ã‚¤ãƒ«
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ layout.tsx   # ãƒ«ãƒ¼ãƒˆãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆ
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ page.tsx     # ãƒ›ãƒ¼ãƒ ãƒšãƒ¼ã‚¸
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ actions.ts   # Server Actions
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ admin/videos/# å‹•ç”»ç®¡ç†ãƒšãƒ¼ã‚¸ (å®Ÿè£…æ¸ˆã¿)
â”‚   â”‚   â”‚   â”œâ”€â”€ components/      # UIã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ VideoList.tsx    # å‹•ç”»ä¸€è¦§ (Server Component)
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ Pagination.tsx   # ãƒšãƒ¼ã‚¸ãƒãƒ¼ã‚·ãƒ§ãƒ³ (Client Component)
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ ThumbnailImage.tsx # ã‚µãƒ ãƒã‚¤ãƒ«ç”»åƒ
â”‚   â”‚   â”‚   â””â”€â”€ lib/             # ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£
â”‚   â”‚   â”œâ”€â”€ .storybook/          # Webå°‚ç”¨Storybookè¨­å®š
â”‚   â”‚   â””â”€â”€ package.json
â”‚   â””â”€â”€ v0-suzumina.click/        # v0 by Vercel ãƒ¢ãƒƒã‚¯ (å‚è€ƒç”¨)
â”‚       â”œâ”€â”€ app/                  # App Router (ãƒ¢ãƒƒã‚¯)
â”‚       â”œâ”€â”€ components/           # ãƒ¢ãƒƒã‚¯ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ
â”‚       â””â”€â”€ package.json
â”œâ”€â”€ packages/
â”‚   â”œâ”€â”€ shared-types/             # å…±æœ‰å‹å®šç¾©
â”‚   â”‚   â””â”€â”€ src/
â”‚   â”‚       â”œâ”€â”€ work.ts           # DLsiteä½œå“å‹
â”‚   â”‚       â”œâ”€â”€ video.ts          # YouTubeå‹•ç”»å‹
â”‚   â”‚       â””â”€â”€ common.ts         # å…±é€šå‹
â”‚   â””â”€â”€ ui/                       # å…±æœ‰UIã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ
â”‚       â”œâ”€â”€ src/components/       # Radix UIãƒ™ãƒ¼ã‚¹ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ
â”‚       â”œâ”€â”€ src/styles/           # Tailwind CSS v4è¨­å®š
â”‚       â””â”€â”€ .storybook/           # UIå°‚ç”¨Storybookè¨­å®š
â”œâ”€â”€ terraform/                    # ã‚¤ãƒ³ãƒ•ãƒ©å®šç¾©
â”‚   â”œâ”€â”€ function_*.tf             # Cloud Functionsè¨­å®š
â”‚   â”œâ”€â”€ scheduler.tf              # å®šæœŸå®Ÿè¡Œè¨­å®š
â”‚   â””â”€â”€ variables.tf              # å¤‰æ•°å®šç¾©
â”œâ”€â”€ docs/                         # ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ
â””â”€â”€ package.json                  # ãƒ¯ãƒ¼ã‚¯ã‚¹ãƒšãƒ¼ã‚¹è¨­å®š
```

## ğŸš€ ã‚¯ã‚¤ãƒƒã‚¯ã‚¹ã‚¿ãƒ¼ãƒˆ

### å‰ææ¡ä»¶

- **Node.js 22+** (miseæ¨å¥¨)
- **pnpm 10+**
- **Google Cloud SDK**
- **Terraform 1.0+**

### ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—

```bash
# 1. ãƒªãƒã‚¸ãƒˆãƒªã‚¯ãƒ­ãƒ¼ãƒ³
git clone https://github.com/your-org/suzumina.click.git
cd suzumina.click

# 2. ä¾å­˜é–¢ä¿‚ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
pnpm install

# 3. å…±æœ‰å‹å®šç¾©ãƒ“ãƒ«ãƒ‰
pnpm --filter @suzumina.click/shared-types build

# 4. ç’°å¢ƒå¤‰æ•°è¨­å®š
cp terraform/terraform.tfvars.example terraform/terraform.tfvars
# terraform.tfvars ã‚’ç·¨é›†ã—ã¦APIã‚­ãƒ¼ãªã©ã‚’è¨­å®š

# 5. ã‚¤ãƒ³ãƒ•ãƒ©ãƒ‡ãƒ—ãƒ­ã‚¤ (åˆå›ã®ã¿)
cd terraform
terraform init
terraform apply

# 6. ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰é–‹ç™ºã‚µãƒ¼ãƒãƒ¼èµ·å‹•
cd ../apps/web
pnpm dev

# Storybookèµ·å‹• (UIã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆé–‹ç™º)
pnpm storybook
```

### é–‹ç™ºã‚³ãƒãƒ³ãƒ‰

```bash
# ãƒ†ã‚¹ãƒˆå®Ÿè¡Œ
pnpm test

# Lint + Format
pnpm check

# å…¨ä½“ãƒ“ãƒ«ãƒ‰
pnpm build

# Functionsæº–å‚™ (ãƒ‡ãƒ—ãƒ­ã‚¤å‰)
pnpm prepare:functions
```

## ğŸ”„ ãƒ‡ãƒ¼ã‚¿ãƒ•ãƒ­ãƒ¼

### 1. å‹•ç”»æƒ…å ±å–å¾—ãƒ•ãƒ­ãƒ¼

```mermaid
sequenceDiagram
    participant CS as Cloud Scheduler
    participant PS as Pub/Sub
    participant CF as fetchYouTubeVideos
    participant YT as YouTube API
    participant FS as Firestore
    
    CS->>PS: æ¯æ™‚19åˆ†ãƒˆãƒªã‚¬ãƒ¼
    PS->>CF: CloudEventé€ä¿¡
    CF->>YT: å‹•ç”»æƒ…å ±å–å¾—ãƒªã‚¯ã‚¨ã‚¹ãƒˆ
    YT->>CF: å‹•ç”»ãƒ‡ãƒ¼ã‚¿è¿”å´
    CF->>FS: å‹•ç”»æƒ…å ±ä¿å­˜
    CF->>FS: ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿æ›´æ–°
```

### 2. ä½œå“æƒ…å ±å–å¾—ãƒ•ãƒ­ãƒ¼

```mermaid
sequenceDiagram
    participant CS as Cloud Scheduler  
    participant PS as Pub/Sub
    participant CF as fetchDLsiteWorks
    participant DL as DLsite
    participant FS as Firestore
    
    CS->>PS: 10åˆ†é–“éš”ãƒˆãƒªã‚¬ãƒ¼
    PS->>CF: CloudEventé€ä¿¡
    CF->>DL: HTMLå–å¾—ãƒªã‚¯ã‚¨ã‚¹ãƒˆ
    DL->>CF: æ¤œç´¢çµæœHTMLè¿”å´
    CF->>CF: HTMLãƒ‘ãƒ¼ã‚¹ãƒ»ãƒ‡ãƒ¼ã‚¿æŠ½å‡º
    CF->>DL: ä½œå“è©³ç´°æƒ…å ±å–å¾—
    DL->>CF: è©³ç´°ãƒ‡ãƒ¼ã‚¿è¿”å´
    CF->>FS: ä½œå“æƒ…å ±ä¿å­˜
    CF->>FS: ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿æ›´æ–°
```

## ğŸ“Š ä¸»è¦ãƒ‡ãƒ¼ã‚¿æ§‹é€ 

### YouTubeå‹•ç”»ãƒ‡ãƒ¼ã‚¿

```typescript
interface FirestoreYouTubeVideoData {
  id: string;                    // å‹•ç”»ID
  title: string;                 // ã‚¿ã‚¤ãƒˆãƒ«
  description: string;           // èª¬æ˜
  publishedAt: string;           // å…¬é–‹æ—¥æ™‚
  thumbnailUrl: string;          // ã‚µãƒ ãƒã‚¤ãƒ«URL
  duration: string;              // å†ç”Ÿæ™‚é–“
  viewCount: number;             // å†ç”Ÿå›æ•°
  likeCount?: number;            // é«˜è©•ä¾¡æ•°
  commentCount?: number;         // ã‚³ãƒ¡ãƒ³ãƒˆæ•°
  tags: string[];                // ã‚¿ã‚°
  channelId: string;             // ãƒãƒ£ãƒ³ãƒãƒ«ID
  lastFetchedAt: string;         // æœ€çµ‚å–å¾—æ—¥æ™‚
  createdAt: string;             // ä½œæˆæ—¥æ™‚
  updatedAt: string;             // æ›´æ–°æ—¥æ™‚
}
```

### DLsiteä½œå“ãƒ‡ãƒ¼ã‚¿

```typescript
interface FirestoreDLsiteWorkData {
  id: string;                    // ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆID
  productId: string;             // DLsiteå•†å“ID (RJ123456)
  title: string;                 // ä½œå“ã‚¿ã‚¤ãƒˆãƒ«
  circle: string;                // ã‚µãƒ¼ã‚¯ãƒ«å
  author: string[];              // å£°å„ªå
  category: WorkCategory;        // ã‚«ãƒ†ã‚´ãƒª (SOU, ADV, etc.)
  workUrl: string;               // ä½œå“ãƒšãƒ¼ã‚¸URL
  thumbnailUrl: string;          // ã‚µãƒ ãƒã‚¤ãƒ«URL
  price: PriceInfo;              // ä¾¡æ ¼æƒ…å ±
  rating?: RatingInfo;           // è©•ä¾¡æƒ…å ±
  salesCount?: number;           // è²©å£²æ•°
  tags: string[];                // ã‚¿ã‚°
  lastFetchedAt: string;         // æœ€çµ‚å–å¾—æ—¥æ™‚
  createdAt: string;             // ä½œæˆæ—¥æ™‚
  updatedAt: string;             // æ›´æ–°æ—¥æ™‚
}
```

## ğŸ”’ ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£

- **Secret Manager**: APIã‚­ãƒ¼ã‚„ã‚·ãƒ¼ã‚¯ãƒ¬ãƒƒãƒˆã®å®‰å…¨ãªç®¡ç†
- **IAMæ¨©é™**: æœ€å°æ¨©é™åŸå‰‡ã«åŸºã¥ãæ¨©é™è¨­å®š
- **Firestore Rules**: ãƒ‡ãƒ¼ã‚¿ã‚¢ã‚¯ã‚»ã‚¹åˆ¶å¾¡
- **CORSè¨­å®š**: ã‚¯ãƒ­ã‚¹ã‚ªãƒªã‚¸ãƒ³ãƒªã‚¯ã‚¨ã‚¹ãƒˆåˆ¶å¾¡

## ğŸ“ˆ ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æœ€é©åŒ–

- **Firestore ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹**: ã‚¯ã‚¨ãƒªæœ€é©åŒ–
- **Cloud Functions**: ã‚³ãƒ¼ãƒ«ãƒ‰ã‚¹ã‚¿ãƒ¼ãƒˆå¯¾ç­–
- **Next.js**: SSG/ISR ã«ã‚ˆã‚‹é«˜é€Ÿãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°  
- **ç”»åƒæœ€é©åŒ–**: Next.js Image ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ

## ğŸ“ é–‹ç™ºã‚¬ã‚¤ãƒ‰ãƒ©ã‚¤ãƒ³

è©³ç´°ãªé–‹ç™ºã‚¬ã‚¤ãƒ‰ãƒ©ã‚¤ãƒ³ã¯ä»¥ä¸‹ã‚’å‚ç…§ã—ã¦ãã ã•ã„ï¼š

- [POLICY.md](./POLICY.md) - é–‹ç™ºãƒãƒªã‚·ãƒ¼ã¨è¨­è¨ˆåŸå‰‡
- [TODO.md](./TODO.md) - ã‚¿ã‚¹ã‚¯ç®¡ç†ã¨ãƒ­ãƒ¼ãƒ‰ãƒãƒƒãƒ—
- [CHANGELOG.md](./CHANGELOG.md) - å¤‰æ›´å±¥æ­´

## ğŸ¤ ã‚³ãƒ³ãƒˆãƒªãƒ“ãƒ¥ãƒ¼ã‚·ãƒ§ãƒ³

1. Issueä½œæˆã¾ãŸã¯Discussionã§ææ¡ˆ
2. ãƒ•ã‚©ãƒ¼ã‚¯å¾Œã€feature ãƒ–ãƒ©ãƒ³ãƒä½œæˆ
3. ã‚³ãƒ¼ãƒ‰å®Ÿè£…ã¨ãƒ†ã‚¹ãƒˆè¿½åŠ 
4. Pull Requestä½œæˆ

## ğŸ“„ ãƒ©ã‚¤ã‚»ãƒ³ã‚¹

ã“ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã¯MITãƒ©ã‚¤ã‚»ãƒ³ã‚¹ã®ä¸‹ã§å…¬é–‹ã•ã‚Œã¦ã„ã¾ã™ã€‚

## ğŸ”— é–¢é€£ãƒªãƒ³ã‚¯

- [æ¶¼èŠ±ã¿ãªã› YouTubeãƒãƒ£ãƒ³ãƒãƒ«](https://www.youtube.com/@SuzukaMinase)
- [DLsiteä½œå“ä¸€è¦§](https://www.dlsite.com/maniax/fsr/=/language/jp/keyword_creater/æ¶¼èŠ±ã¿ãªã›)
- [ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãƒ­ãƒ¼ãƒ‰ãƒãƒƒãƒ—](./TODO.md)
