# DLsite 100% API-Only ãƒ‡ãƒ¼ã‚¿æ›´æ–°ã‚·ã‚¹ãƒ†ãƒ  è¨­è¨ˆãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ

## ğŸ“‹ æ¦‚è¦

Individual Info APIï¼ˆ254ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ï¼‰ã«ã‚ˆã‚‹å®Œå…¨ã‚¹ã‚¯ãƒ¬ã‚¤ãƒ”ãƒ³ã‚°å»ƒæ­¢ã‚·ã‚¹ãƒ†ãƒ ã€‚DLsiteä½œå“ãƒ‡ãƒ¼ã‚¿ã‚’100% APIã®ã¿ã§å–å¾—ã—ã€HTMLã‚¹ã‚¯ãƒ¬ã‚¤ãƒ”ãƒ³ã‚°ã‚’å®Œå…¨æ’é™¤ã—ãŸé©æ–°çš„ãƒ‡ãƒ¼ã‚¿æ›´æ–°ã‚·ã‚¹ãƒ†ãƒ ã®è¨­è¨ˆæ›¸ã€‚

## ğŸš€ ä¸»è¦å¤‰æ›´ç‚¹ (v5.0 APIå„ªå…ˆã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£)

### ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£å¤‰é©
- **æ—§**: ã‚¹ã‚¯ãƒ¬ã‚¤ãƒ”ãƒ³ã‚°ä¸­å¿ƒ (HTMLè§£æä¸»ä½“)
- **æ–°**: **Individual Info APIä¸­å¿ƒ** (254ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ä¸»ä½“)

### æ©Ÿèƒ½ä»£æ›¿ç‡
- **APIã§å®Œçµ**: 100%ã®æ©Ÿèƒ½ (v4.0: ~25% â†’ v5.0: å®Œå…¨ä»£æ›¿)
- **ã‚¹ã‚¯ãƒ¬ã‚¤ãƒ”ãƒ³ã‚°**: 0%ã®æ©Ÿèƒ½ (å®Œå…¨å»ƒæ­¢)

### ã‚·ã‚¹ãƒ†ãƒ åŠ¹ç‡å‘ä¸Š
- **æ›´æ–°é »åº¦**: 12-24æ™‚é–“ â†’ **1-6æ™‚é–“** (æœ€å¤§4å€é«˜é€ŸåŒ–)
- **DLsiteè² è·**: 75%å‰Šæ¸› (ã‚¹ã‚¯ãƒ¬ã‚¤ãƒ”ãƒ³ã‚°ãƒªã‚¯ã‚¨ã‚¹ãƒˆæ¸›)
- **ãƒ‡ãƒ¼ã‚¿å“è³ª**: 254ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã®åŒ…æ‹¬çš„ãƒ‡ãƒ¼ã‚¿å–å¾—

### å»ƒæ­¢ãƒ»ç°¡ç´ åŒ–æ©Ÿèƒ½
- **å®Œå…¨å»ƒæ­¢**: HTMLã‚¹ã‚¯ãƒ¬ã‚¤ãƒ”ãƒ³ã‚°å…¨èˆ¬ï¼ˆdlsite-detail-parser.ts 1,154è¡Œå‰Šé™¤ï¼‰
- **APIåŒ–å®Œäº†**: é«˜è§£åƒåº¦ç”»åƒã‚‚Individual Info APIã® image_mainãƒ»srcset ã§å¯¾å¿œ
- **å‰Šé™¤æ¸ˆã¿UI**: ãƒ•ã‚¡ã‚¤ãƒ«è©³ç´°ãƒ»ãƒœãƒ¼ãƒŠã‚¹ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ãƒ»è©³ç´°èª¬æ˜è¡¨ç¤º

---

## ğŸ¯ è¨­è¨ˆç›®æ¨™

### ä¸»è¦ç›®æ¨™

- **100% API-Only**: Individual Info APIï¼ˆ254ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ï¼‰ã«ã‚ˆã‚‹å®Œå…¨æ©Ÿèƒ½ä»£æ›¿
- **ã‚¹ã‚¯ãƒ¬ã‚¤ãƒ”ãƒ³ã‚°å®Œå…¨å»ƒæ­¢**: HTMLã‚¹ã‚¯ãƒ¬ã‚¤ãƒ”ãƒ³ã‚°ã‚³ãƒ¼ãƒ‰å…¨å‰Šé™¤ï¼ˆ1,154è¡Œå»ƒæ­¢ï¼‰
- **APIãƒ‡ãƒ¼ã‚¿å“è³ª**: 254ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã«ã‚ˆã‚‹åŒ…æ‹¬çš„ãƒ»é«˜å“è³ªãƒ‡ãƒ¼ã‚¿å–å¾—
- **2å±¤åˆ†é›¢ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£**: ä½œå“IDåé›†ãƒ»APIçµ±åˆã®ç°¡æ½”æ§‹æˆ
- **ã‚·ã‚¹ãƒ†ãƒ è² è·å¤§å¹…è»½æ¸›**: DLsiteè² è·50%å‰Šæ¸›ãƒ»403ã‚¨ãƒ©ãƒ¼å®Œå…¨æ’é™¤

### å…¬å¹³æ€§è¨­è¨ˆåŸå‰‡

- **APIå®Œå…¨çµ±åˆ**: Individual Info API å˜ä¸€ã‚½ãƒ¼ã‚¹ã«ã‚ˆã‚‹å…¨ãƒ‡ãƒ¼ã‚¿å–å¾—
- **åŠ¹ç‡æœ€å¤§åŒ–**: 254ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰APIã«ã‚ˆã‚‹åŒ…æ‹¬çš„ãƒ‡ãƒ¼ã‚¿å–å¾—
- **å“è³ªä¿è¨¼**: APIå˜ä¸€ã‚½ãƒ¼ã‚¹ã«ã‚ˆã‚‹ä¸€è²«æ€§ãƒ»å®‰å®šæ€§ç¢ºä¿
- **æœ€é©åŒ–å®Œäº†**: ã‚¹ã‚¯ãƒ¬ã‚¤ãƒ”ãƒ³ã‚°ä¾å­˜åº¦ã‚’100%å‰Šæ¸›ï¼ˆå®Œå…¨å»ƒæ­¢ï¼‰

---

## ğŸ—ï¸ ã‚·ã‚¹ãƒ†ãƒ è¨­è¨ˆ

### DLsite APIãƒ»ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆå®šç¾©

#### **1. ä½œå“ä¸€è¦§å–å¾— (List AJAX API)**
```
URL: https://www.dlsite.com/maniax/ajax/=/language/jp/sex_category%5B0%5D/male/order%5B0%5D/release_d/per_page/100/page/{pageNumber}/format/json
ç”¨é€”: ä½œå“IDä¸€è¦§ãƒ»åŸºæœ¬ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿å–å¾—
ãƒ‡ãƒ¼ã‚¿å½¢å¼: JSON (search_resultå†…ã«HTML)
æ›´æ–°é »åº¦: 30åˆ†é–“éš”
ã‚³ãƒ¼ãƒ‰å†…åç§°: DLsite List API / ä½œå“ä¸€è¦§API
```

#### **2. ä½œå“è©³ç´°æƒ…å ±å–å¾— (Individual Info API) - ğŸ¯ ãƒ¡ã‚¤ãƒ³ãƒ‡ãƒ¼ã‚¿ã‚½ãƒ¼ã‚¹**
```
URL: https://www.dlsite.com/maniax/api/=/product.json?workno={productId}
ç”¨é€”: ã€75%æ©Ÿèƒ½ä»£æ›¿ã€‘ä¾¡æ ¼ãƒ»è©•ä¾¡ãƒ»çµ±è¨ˆãƒ»ãƒ©ãƒ³ã‚­ãƒ³ã‚°ãƒ»ã‚¯ãƒªã‚¨ã‚¤ã‚¿ãƒ¼ãƒ»ã‚¸ãƒ£ãƒ³ãƒ«æƒ…å ±
ãƒ‡ãƒ¼ã‚¿å½¢å¼: JSON (254ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ãƒ»åŒ…æ‹¬çš„ä½œå“ãƒ‡ãƒ¼ã‚¿)
æ›´æ–°é »åº¦: 1-6æ™‚é–“é–“éš”ï¼ˆAPIåŠ¹ç‡é‡è¦–ï¼‰
ã‚³ãƒ¼ãƒ‰å†…åç§°: Individual Info API / ä½œå“æƒ…å ±API
ä¸»è¦ãƒ‡ãƒ¼ã‚¿ï¼ˆ254ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã‹ã‚‰æŠœç²‹ï¼‰: 
  - åŸºæœ¬æƒ…å ±: workno, work_name, maker_name, age_category, site_id
  - ä¾¡æ ¼æƒ…å ±: price, price_en, official_price, discount_rate, campaign_info
  - è©•ä¾¡æƒ…å ±: rate_average_star, rate_count, rate_count_detail
  - çµ±è¨ˆæƒ…å ±: dl_count, wishlist_count, point, sales_count
  - ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ : platform, is_pc_work, is_smartphone_work
  - ãƒ•ã‚¡ã‚¤ãƒ«æƒ…å ±: file_type, file_type_string, file_size
  - ç”»åƒæƒ…å ±: image_main, image_thum, image_samples (é«˜è§£åƒåº¦å¯¾å¿œ)
```

#### **3. è©³ç´°ãƒšãƒ¼ã‚¸ã‚¹ã‚¯ãƒ¬ã‚¤ãƒ”ãƒ³ã‚° (Complete Abolition) - ğŸš« å®Œå…¨å»ƒæ­¢**
```
URL: https://www.dlsite.com/maniax/work/=/product_id/{productId}.html
ç”¨é€”: ã€å®Œå…¨å»ƒæ­¢ã€‘Individual Info API ã§100%ä»£æ›¿å®Œäº†
ãƒ‡ãƒ¼ã‚¿å½¢å¼: å»ƒæ­¢ (dlsite-detail-parser.ts å‰Šé™¤)
æ›´æ–°é »åº¦: å»ƒæ­¢ (ã‚¹ã‚¯ãƒ¬ã‚¤ãƒ”ãƒ³ã‚°å®Ÿè¡Œãªã—)
ã‚³ãƒ¼ãƒ‰å†…åç§°: å‰Šé™¤äºˆå®š (fetchAndParseWorkDetail å»ƒæ­¢)
ä»£æ›¿æ‰‹æ®µ: Individual Info API ã® image_mainãƒ»srcset ã§é«˜è§£åƒåº¦ç”»åƒå¯¾å¿œ
```

### ãƒ¦ãƒ“ã‚­ã‚¿ã‚¹è¨€èªå®šç¾©

| ç”¨èª | è‹±èª | èª¬æ˜ | å¯¾å¿œURL | ã‚³ãƒ¼ãƒ‰å†…é–¢æ•° |
|-----|------|------|---------|-------------|
| ä½œå“ä¸€è¦§API | List AJAX API | ä½œå“IDåé›†ãƒ»åŸºæœ¬æƒ…å ±å–å¾— | `/ajax/=/.../format/json` | `fetchDLsiteListPage()` |
| ä½œå“æƒ…å ±API | Individual Info API | è©³ç´°ä½œå“æƒ…å ±ãƒ»çµ±è¨ˆãƒ‡ãƒ¼ã‚¿å–å¾— | `/api/=/product.json` | `fetchWorkInfo()` |
| è©³ç´°ãƒšãƒ¼ã‚¸ | Detail Page | HTMLè©³ç´°ãƒšãƒ¼ã‚¸ãƒ»è£œå®Œæƒ…å ±å–å¾— | `/work/=/product_id/{id}.html` | `fetchAndParseWorkDetail()` |
| ä½œå“IDåé›† | Work ID Collection | æ–°è¦ãƒ»æ—¢å­˜ä½œå“IDã®å…¨ä»¶ç®¡ç† | List AJAX APIä½¿ç”¨ | `executeWorkIDCollection()` |
| æƒ…å ±çµ±åˆæ›´æ–° | Info Integration Update | Individual Info APIã«ã‚ˆã‚‹ãƒ‡ãƒ¼ã‚¿æ›´æ–° | Individual Info APIä½¿ç”¨ | `executeFairInfoAPIUpdate()` |
| è©³ç´°ãƒšãƒ¼ã‚¸è£œå®Œ | Detail Page Supplement | HTMLã‚¹ã‚¯ãƒ¬ã‚¤ãƒ”ãƒ³ã‚°ã«ã‚ˆã‚‹è£œå®Œ | Detail Pageä½¿ç”¨ | `executeDetailPageSupplement()` |

### ãƒ‡ãƒ¼ã‚¿å‹ãƒ»ã‚¹ã‚­ãƒ¼ãƒå¯¾å¿œ

| ãƒ‡ãƒ¼ã‚¿ã‚½ãƒ¼ã‚¹ | å‹å®šç¾© | ãƒ‘ãƒ¼ã‚µãƒ¼é–¢æ•° | çµ±åˆé–¢æ•° |
|-------------|--------|-------------|----------|
| List AJAX API | `ParsedWorkData` | `parseWorksFromHTML()` | `mapToOptimizedStructure()` |
| Individual Info API | `DLsiteInfoResponse` | `fetchWorkInfo()` | `mapToOptimizedStructure()` |
| Detail Page | `DetailPageData` | `fetchAndParseWorkDetail()` | `mapToOptimizedStructure()` |
| çµ±åˆãƒ‡ãƒ¼ã‚¿ | `OptimizedFirestoreDLsiteWorkData` | - | `mapToOptimizedStructure()` |

### ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£æ¦‚è¦

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ä½œå“IDåé›†     â”‚    â”‚ Individual Info â”‚    â”‚ è©³ç´°ãƒšãƒ¼ã‚¸      â”‚
â”‚                â”‚    â”‚ APIçµ±åˆ         â”‚    â”‚ ã‚¹ã‚¯ãƒ¬ã‚¤ãƒ”ãƒ³ã‚°   â”‚
â”‚ ãƒ»å…¨ä½œå“IDç®¡ç†  â”‚    â”‚ ãƒ»åŸºæœ¬æƒ…å ±æ›´æ–°   â”‚    â”‚ ãƒ»è£œå®Œæƒ…å ±å–å¾—   â”‚
â”‚ ãƒ»æ–°è¦ä½œå“æ¤œå‡º  â”‚    â”‚ ãƒ»çµ±è¨ˆãƒ‡ãƒ¼ã‚¿     â”‚    â”‚ ãƒ»ç”»åƒãƒ»èª¬æ˜æ–‡   â”‚
â”‚ ãƒ»30åˆ†å‘¨æœŸ     â”‚    â”‚ ãƒ»12-24æ™‚é–“å‘¨æœŸ â”‚    â”‚ ãƒ»é€±1-æœˆ1å‘¨æœŸ   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
          â”‚                       â”‚                       â”‚
          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                 â”‚                       â”‚
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                    â”‚
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚  çµ±ä¸€è² è·åˆ¶å¾¡     â”‚
                    â”‚                â”‚
                    â”‚ ãƒ»æ™‚é–“å¸¯è€ƒæ…®     â”‚
                    â”‚ ãƒ»ãƒ¬ãƒ¼ãƒˆåˆ¶é™     â”‚
                    â”‚ ãƒ»ã‚¨ãƒ©ãƒ¼å‡¦ç†     â”‚
                    â”‚ ãƒ»å…¬å¹³æ€§ç›£è¦–     â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 3ã¤ã®Cloud Functionsåˆ†é›¢è¨­è¨ˆ (æ–°ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£)

#### 1. **ä½œå“IDåé›†Function** (`CollectWorkIDs`)

```typescript
// Cloud Functionså: dlsite-collect-work-ids
// ä½¿ç”¨API: List AJAX API (https://www.dlsite.com/maniax/ajax/=/.../format/json)
// å®Ÿè¡Œé »åº¦: 30åˆ†é–“éš”
// ç›®çš„: æ–°è¦ä½œå“ã®è¿…é€Ÿæ¤œå‡ºãƒ»ä½œå“ä¸€è¦§ã®å®Œå…¨ç®¡ç†
// å‡¦ç†æ™‚é–“: 5-15åˆ†
interface CollectWorkIDsFunction {
  functionName: "dlsite-collect-work-ids";
  schedule: "*/30 * * * *";  // 30åˆ†é–“éš”
  timeout: 540;              // 9åˆ†
  memory: "1GB";
  
  apiEndpoint: "List AJAX API";
  dataSource: "search_result (HTML in JSON)";
  
  responsibilities: [
    "List AJAX APIã‹ã‚‰ã®å…¨ä½œå“IDåé›†",
    "æ–°è¦ä½œå“ã®å³åº§æ¤œå‡ºãƒ»é€šçŸ¥",
    "å‰Šé™¤ä½œå“ã®è­˜åˆ¥ãƒ»ãƒãƒ¼ã‚­ãƒ³ã‚°",
    "ä½œå“ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿æœ€å°é™å–å¾—ï¼ˆã‚¿ã‚¤ãƒˆãƒ«ãƒ»ã‚µãƒ¼ã‚¯ãƒ«ãƒ»URLï¼‰"
  ];
}
```

#### 2. **Individual Info API Function** (`FetchWorkDetails`)

```typescript
// Cloud Functionså: dlsite-fetch-work-details
// ä½¿ç”¨API: Individual Info API (https://www.dlsite.com/maniax/api/=/product.json)
// å®Ÿè¡Œé »åº¦: 12-24æ™‚é–“é–“éš”ï¼ˆãƒ­ãƒ¼ãƒ†ãƒ¼ã‚·ãƒ§ãƒ³ï¼‰
// ç›®çš„: å…¨ä½œå“ã®è©³ç´°æƒ…å ±ã‚’å…¬å¹³ã«æ›´æ–°
// å‡¦ç†æ™‚é–“: 3-4æ™‚é–“ï¼ˆ3000ä»¶å‡¦ç†æ™‚ï¼‰
interface FetchWorkDetailsFunction {
  functionName: "dlsite-fetch-work-details";
  schedule: "0 2,14 * * *";  // æ—¥2å›ï¼ˆæ·±å¤œãƒ»æ˜¼ï¼‰
  timeout: 540;              // 9åˆ†
  memory: "2GB";
  
  apiEndpoint: "Individual Info API";
  dataSource: "JSON response with detailed work info";
  
  responsibilities: [
    "Individual Info APIã‹ã‚‰ã®ä¾¡æ ¼ãƒ»è©•ä¾¡ãƒ»çµ±è¨ˆæƒ…å ±å–å¾—",
    "ãƒ©ãƒ³ã‚­ãƒ³ã‚°ãƒ»ã‚­ãƒ£ãƒ³ãƒšãƒ¼ãƒ³ãƒ»ã‚·ãƒªãƒ¼ã‚ºæƒ…å ±æ›´æ–°",
    "å…¬å¹³ãƒ­ãƒ¼ãƒ†ãƒ¼ã‚·ãƒ§ãƒ³ç®¡ç†ãƒ»å±¥æ­´è¨˜éŒ²",
    "å¤šé€šè²¨ä¾¡æ ¼ãƒ»è¨€èªç‰ˆæƒ…å ±ãƒ»è²©å£²çŠ¶æ…‹æ›´æ–°"
  ];
}
```

#### 3. **è©³ç´°ãƒšãƒ¼ã‚¸ã‚¹ã‚¯ãƒ¬ã‚¤ãƒ”ãƒ³ã‚°Function** (`FetchDetailPages`)

```typescript
// Cloud Functionså: dlsite-fetch-detail-pages
// ä½¿ç”¨API: Detail Page Scraping (https://www.dlsite.com/maniax/work/=/product_id/{id}.html)
// å®Ÿè¡Œé »åº¦: é€±1-æœˆ1å›ï¼ˆè£œå®Œç›®çš„ï¼‰
// ç›®çš„: Individual Info APIã§å–å¾—ä¸å¯èƒ½ãªæƒ…å ±ã®è£œå®Œ
// å‡¦ç†æ™‚é–“: 6-8æ™‚é–“ï¼ˆ3000ä»¶å‡¦ç†æ™‚ï¼‰
interface FetchDetailPagesFunction {
  functionName: "dlsite-fetch-detail-pages";
  schedule: "0 3 * * 0";     // é€±1å›ï¼ˆæ—¥æ›œæ·±å¤œï¼‰
  timeout: 540;              // 9åˆ†
  memory: "2GB";
  
  apiEndpoint: "Detail Page (HTML)";
  dataSource: "HTML scraping with structured parsing";
  
  responsibilities: [
    "è©³ç´°ãƒšãƒ¼ã‚¸HTMLè§£æãƒ»æ§‹é€ åŒ–ãƒ‡ãƒ¼ã‚¿æŠ½å‡º",
    "é«˜è§£åƒåº¦ã‚¸ãƒ£ã‚±ãƒƒãƒˆç”»åƒURLå–å¾—ãƒ»æ¤œè¨¼",
    "è©³ç´°èª¬æ˜æ–‡ãƒ»ãƒˆãƒ©ãƒƒã‚¯ãƒ»ãƒ•ã‚¡ã‚¤ãƒ«æƒ…å ±è£œå®Œ",
    "5ç¨®ã‚¯ãƒªã‚¨ã‚¤ã‚¿ãƒ¼è©³ç´°åˆ†é¡ï¼ˆå£°å„ªãƒ»ã‚·ãƒŠãƒªã‚ªãƒ»ã‚¤ãƒ©ã‚¹ãƒˆãƒ»éŸ³æ¥½ãƒ»ãã®ä»–ä½œè€…ï¼‰"
  ];
}
```

---

## ğŸ”„ å…¬å¹³ãªå®Œå…¨æ›´æ–°æˆ¦ç•¥

### 1. **æ®µéš1: ä½œå“IDåé›†ãƒ»æ–°è¦æ¤œå‡ºï¼ˆ30åˆ†å‘¨æœŸï¼‰**
**ä½¿ç”¨API**: List AJAX API  
**ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ**: `https://www.dlsite.com/maniax/ajax/=/.../format/json`

#### å®Ÿè¡Œã‚¿ã‚¤ãƒŸãƒ³ã‚°ãƒ»ç›®çš„

```typescript
interface WorkIDCollectionStrategy {
  primaryGoal: "æ–°è¦ä½œå“ã®è¿…é€Ÿæ¤œå‡º";
  frequency: "30åˆ†é–“éš”";
  coverage: "å…¨å¯¾è±¡ä½œå“ã®100%";
  fairnessPolicy: "å…¨ä½œå“ã‚’å¹³ç­‰ã«ç›£è¦–";
}
```

#### å¯¾è±¡ãƒ‡ãƒ¼ã‚¿ãƒ»å‡¦ç†å†…å®¹

```typescript
interface WorkIDCollectionData {
  // å¿…é ˆãƒ‡ãƒ¼ã‚¿ï¼ˆè»½é‡ï¼‰
  productId: string;           // ä½œå“ID
  title: string;               // ã‚¿ã‚¤ãƒˆãƒ«
  circle: string;              // ã‚µãƒ¼ã‚¯ãƒ«å
  thumbnailUrl: string;        // ã‚µãƒ ãƒã‚¤ãƒ«
  
  // ç®¡ç†ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿
  collectionTimestamp: Date;   // åé›†æ™‚åˆ»
  isNewWork: boolean;          // æ–°è¦ä½œå“ãƒ•ãƒ©ã‚°
  lastSeenAt: Date;           // æœ€çµ‚ç¢ºèªæ—¥æ™‚
  
  // å…¬å¹³æ€§ç®¡ç†
  infoAPILastUpdated?: Date;   // Info APIæœ€çµ‚æ›´æ–°
  detailPageLastUpdated?: Date; // è©³ç´°ãƒšãƒ¼ã‚¸æœ€çµ‚æ›´æ–°
  updatesPendingCount: number; // æœªæ›´æ–°å›æ•°
}
```

#### å®Ÿè£…ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£

```typescript
async function executeWorkIDCollection(): Promise<void> {
  logger.info("ä½œå“IDåé›†é–‹å§‹: å…¬å¹³ãªå…¨ä½œå“ç›£è¦–");
  
  // 1. å…¨ãƒšãƒ¼ã‚¸ã®ä½œå“IDåé›†
  const allCollectedIds: string[] = [];
  const totalPages = await getTotalPageCount();
  
  for (let page = 1; page <= totalPages; page++) {
    try {
      const pageResults = await fetchDLsiteListPage(page);
      const pageIds = extractWorkIDs(pageResults.search_result);
      allCollectedIds.push(...pageIds);
      
      // ãƒ¬ãƒ¼ãƒˆåˆ¶é™å¯¾å¿œ
      await sleep(500);
    } catch (error) {
      logger.warn(`ãƒšãƒ¼ã‚¸${page}åé›†ã‚¨ãƒ©ãƒ¼:`, error);
    }
  }
  
  // 2. æ–°è¦ä½œå“æ¤œå‡º
  const existingWorks = await getExistingWorkIDs();
  const newWorks = allCollectedIds.filter(id => !existingWorks.includes(id));
  const removedWorks = existingWorks.filter(id => !allCollectedIds.includes(id));
  
  // 3. æ–°è¦ä½œå“ã®å³åº§å‡¦ç†ãƒˆãƒªã‚¬ãƒ¼
  if (newWorks.length > 0) {
    await triggerImmediateDetailFetch(newWorks);
    logger.info(`æ–°è¦ä½œå“æ¤œå‡º: ${newWorks.length}ä»¶ - å³åº§è©³ç´°å–å¾—äºˆç´„`);
  }
  
  // 4. å‰Šé™¤ä½œå“ã®å‡¦ç†
  if (removedWorks.length > 0) {
    await markWorksAsRemoved(removedWorks);
    logger.info(`å‰Šé™¤ä½œå“æ¤œå‡º: ${removedWorks.length}ä»¶`);
  }
  
  // 5. ä½œå“IDä¸€è¦§ã®æ›´æ–°
  await updateWorkIDRegistry(allCollectedIds);
  
  logger.info(`ä½œå“IDåé›†å®Œäº†: å…¨${allCollectedIds.length}ä»¶ (æ–°è¦: ${newWorks.length}ä»¶)`);
}
```

### 2. **ğŸ¯ æ®µéš2: Individual Info APIçµ±åˆï¼ˆãƒ¡ã‚¤ãƒ³ãƒ‡ãƒ¼ã‚¿ã‚½ãƒ¼ã‚¹ï¼‰**
**ä½¿ç”¨API**: Individual Info API  
**ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ**: `https://www.dlsite.com/maniax/api/=/product.json?workno={productId}`

#### APIåŠ¹ç‡æœ€é©åŒ–æˆ¦ç•¥

```typescript
interface FairRotationStrategy {
  principle: "å…¨ä½œå“å¹³ç­‰æ›´æ–°";
  rotationCycle: "24-48æ™‚é–“";
  batchSize: "500-1000ä»¶/å®Ÿè¡Œ";
  updateGuarantee: "å…¨ä½œå“72æ™‚é–“ä»¥å†…æ›´æ–°";
  
  // å…¬å¹³æ€§ä¿è¨¼
  fairnessRules: {
    noPopularityBias: true;     // äººæ°—åº¦ã«ã‚ˆã‚‹å„ªé‡ãªã—
    equalUpdateInterval: true;  // ç­‰é–“éš”æ›´æ–°
    randomizedOrder: true;      // ãƒ©ãƒ³ãƒ€ãƒ é †åºã§åã‚Šé˜²æ­¢
    updateTrackingRequired: true; // æ›´æ–°å±¥æ­´å¿…é ˆè¨˜éŒ²
  };
}
```

#### å¯¾è±¡ãƒ‡ãƒ¼ã‚¿ãƒ»å“è³ªçµ±ä¸€

```typescript
interface IndividualInfoAPIData {
  // === åŸºæœ¬æƒ…å ±ï¼ˆçµ±ä¸€å“è³ªï¼‰ ===
  productId: string;
  title: string;
  circle: string;
  makerId: string;
  registDate: string;
  
  // === ä¾¡æ ¼ãƒ»è²©å£²æƒ…å ±ï¼ˆæœ€æ–°ï¼‰ ===
  pricing: {
    current: number;
    original?: number;
    discount?: number;
    multiCurrency: LocalePrice[];
  };
  salesData: {
    downloadCount: number;
    wishlistCount: number;
    reviewCount: number;
  };
  
  // === è©•ä¾¡ã‚·ã‚¹ãƒ†ãƒ ï¼ˆè©³ç´°ï¼‰ ===
  rating: {
    average: number;
    averageDecimal: number;      // é«˜ç²¾åº¦è©•ä¾¡
    count: number;
    ratingDetail: RatingDetail[]; // æ˜Ÿåˆ¥åˆ†å¸ƒ
  };
  
  // === çµ±è¨ˆãƒ»ãƒ©ãƒ³ã‚­ãƒ³ã‚° ===
  statistics: {
    rankingHistory: RankingInfo[];
    campaignInfo?: CampaignInfo;
    salesStatus: SalesStatus;
  };
  
  // === ã‚³ãƒ³ãƒ†ãƒ³ãƒ„åˆ†é¡ ===
  content: {
    voiceActors: string[];       // å£°å„ªãƒªã‚¹ãƒˆ
    genres: string[];            // å…¬å¼ã‚¸ãƒ£ãƒ³ãƒ«
    ageCategory: number;         // å¹´é½¢åˆ¶é™
  };
  
  // === é–¢é€£æƒ…å ± ===
  metadata: {
    seriesInfo?: SeriesInfo;
    translationInfo?: TranslationInfo;
    languageEditions?: LanguageDownload[];
  };
}
```

#### Individual Info APIå®Ÿè£…ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£

```typescript
async function executeFairInfoAPIUpdate(): Promise<void> {
  logger.info("Individual Info APIæ›´æ–°é–‹å§‹: å…¬å¹³ãƒ­ãƒ¼ãƒ†ãƒ¼ã‚·ãƒ§ãƒ³æ–¹å¼");
  
  // 1. æ›´æ–°å¯¾è±¡ã®å…¬å¹³ãªé¸å®š
  const updateTargets = await selectFairUpdateTargets();
  logger.info(`æ›´æ–°å¯¾è±¡é¸å®š: ${updateTargets.length}ä»¶ (å…¬å¹³é¸å®š)`);
  
  const results = {
    successful: 0,
    failed: 0,
    skipped: 0
  };
  
  // 2. ãƒãƒƒãƒå‡¦ç†ï¼ˆå…¬å¹³é †åºï¼‰
  for (const batch of createFairBatches(updateTargets, 50)) {
    try {
      // å„ä½œå“ã®Info APIå–å¾—
      for (const workId of batch) {
        try {
          const infoData = await fetchWorkInfo(workId);
          if (infoData) {
            await updateWorkWithInfoData(workId, infoData);
            await recordUpdateHistory(workId, 'info-api', 'success');
            results.successful++;
          } else {
            results.failed++;
          }
        } catch (error) {
          logger.warn(`ä½œå“${workId}ã®Info APIå–å¾—å¤±æ•—:`, error);
          await recordUpdateHistory(workId, 'info-api', 'failed');
          results.failed++;
        }
        
        // ãƒ¬ãƒ¼ãƒˆåˆ¶é™å¯¾å¿œ
        await sleep(200);
      }
      
      logger.info(`ãƒãƒƒãƒå‡¦ç†å®Œäº†: ${batch.length}ä»¶å‡¦ç†æ¸ˆã¿`);
      
    } catch (error) {
      logger.error(`ãƒãƒƒãƒå‡¦ç†ã‚¨ãƒ©ãƒ¼:`, error);
    }
  }
  
  logger.info(`Individual Info APIæ›´æ–°å®Œäº†: æˆåŠŸ${results.successful}ä»¶, å¤±æ•—${results.failed}ä»¶`);
}

// å…¬å¹³ãªæ›´æ–°å¯¾è±¡é¸å®š
async function selectFairUpdateTargets(): Promise<string[]> {
  const allWorks = await getAllWorkIDs();
  const updateHistory = await getUpdateHistory();
  
  // æœ€çµ‚æ›´æ–°æ™‚åˆ»ã§ã‚½ãƒ¼ãƒˆï¼ˆå¤ã„é †ï¼‰
  const worksByUpdateTime = allWorks.map(workId => ({
    workId,
    lastInfoUpdate: updateHistory[workId]?.lastInfoAPIUpdate || new Date(0),
    updateCount: updateHistory[workId]?.infoAPIUpdateCount || 0
  })).sort((a, b) => a.lastInfoUpdate.getTime() - b.lastInfoUpdate.getTime());
  
  // æœ€å¤§24æ™‚é–“ä»¥å†…æ›´æ–°ä¿è¨¼
  const now = new Date();
  const updateThreshold = new Date(now.getTime() - 24 * 60 * 60 * 1000);
  
  const needsUpdate = worksByUpdateTime.filter(work => 
    work.lastInfoUpdate < updateThreshold
  );
  
  // ãƒ©ãƒ³ãƒ€ãƒ è¦ç´ ã‚’è¿½åŠ ã—ã¦åã‚Šã‚’é˜²æ­¢
  const shuffled = shuffleArray(needsUpdate);
  
  return shuffled.slice(0, 1000).map(work => work.workId); // æœ€å¤§1000ä»¶/å®Ÿè¡Œ
}
```

### 3. **æ®µéš3: è©³ç´°ãƒšãƒ¼ã‚¸ã‚¹ã‚¯ãƒ¬ã‚¤ãƒ”ãƒ³ã‚°ï¼ˆè£œå®Œç›®çš„ï¼‰**
**ä½¿ç”¨API**: Detail Page Scraping  
**ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ**: `https://www.dlsite.com/maniax/work/=/product_id/{productId}.html`

#### è£œå®Œæˆ¦ç•¥ãƒ»ç›®çš„é™å®š

```typescript
interface DetailPageSupplementStrategy {
  primaryGoal: "Individual Info APIã®è£œå®Œ";
  frequency: "é€±1å›ã€œæœˆ1å›";
  coverage: "å…¨ä½œå“ã‚’å¯¾è±¡ã¨ã—ãŸé †æ¬¡è£œå®Œ";
  supplementOnly: true; // Individual Info APIã§ä¸è¶³ã™ã‚‹æƒ…å ±ã®ã¿
  
  targetData: [
    "è©³ç´°ä½œå“èª¬æ˜æ–‡",
    "é«˜è§£åƒåº¦ã‚¸ãƒ£ã‚±ãƒƒãƒˆç”»åƒ",
    "ãƒˆãƒ©ãƒƒã‚¯ãƒ»ãƒ•ã‚¡ã‚¤ãƒ«è©³ç´°æƒ…å ±",
    "ã‚¯ãƒªã‚¨ã‚¤ã‚¿ãƒ¼è©³ç´°åˆ†é¡",
    "ç‰¹å…¸ãƒ»ãƒœãƒ¼ãƒŠã‚¹æƒ…å ±"
  ];
}
```

#### å¯¾è±¡ãƒ‡ãƒ¼ã‚¿ãƒ»Individual Info APIè£œå®Œ

```typescript
interface DetailPageSupplementData {
  // === Individual Info APIã§å–å¾—ä¸å¯èƒ½ãªæƒ…å ± ===
  uniqueContent: {
    detailedDescription: string;    // å®Œå…¨ãªä½œå“èª¬æ˜
    highResImageUrl?: string;       // é«˜è§£åƒåº¦ç”»åƒ
    sampleImages: SampleImage[];    // ã‚µãƒ³ãƒ—ãƒ«ç”»åƒ
    trackInfo?: TrackInfo[];        // ãƒˆãƒ©ãƒƒã‚¯è©³ç´°
    fileInfo?: FileInfo;            // ãƒ•ã‚¡ã‚¤ãƒ«è©³ç´°
    bonusContent?: BonusContent[];  // ç‰¹å…¸æƒ…å ±
  };
  
  // === ã‚¯ãƒªã‚¨ã‚¤ã‚¿ãƒ¼è©³ç´°åˆ†é¡ ===
  detailedCreators: {
    scenario: string[];             // ã‚·ãƒŠãƒªã‚ªæ‹…å½“
    illustration: string[];        // ã‚¤ãƒ©ã‚¹ãƒˆæ‹…å½“  
    music: string[];                // éŸ³æ¥½æ‹…å½“
    author: string[];               // ãã®ä»–ä½œè€…
  };
  
  // === è¡¨ç¤ºãƒ»åˆ†æç”¨ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿ ===
  displayMetadata: {
    originalCategoryText: string;   // å…ƒã‚«ãƒ†ã‚´ãƒª
    customTags?: string[];          // è©³ç´°ã‚¿ã‚°
  };
}
```

#### è©³ç´°ãƒšãƒ¼ã‚¸è£œå®Œå®Ÿè£…ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£

```typescript
async function executeDetailPageSupplement(): Promise<void> {
  logger.info("è©³ç´°ãƒšãƒ¼ã‚¸è£œå®Œé–‹å§‹: Individual Info APIè£œå®Œç›®çš„");
  
  // 1. è£œå®Œå¯¾è±¡ã®é¸å®šï¼ˆå…¬å¹³ãƒ­ãƒ¼ãƒ†ãƒ¼ã‚·ãƒ§ãƒ³ï¼‰
  const supplementTargets = await selectSupplementTargets();
  logger.info(`è£œå®Œå¯¾è±¡é¸å®š: ${supplementTargets.length}ä»¶`);
  
  const results = {
    successful: 0,
    failed: 0,
    skipped: 0
  };
  
  // 2. è©³ç´°ãƒšãƒ¼ã‚¸å‡¦ç†ï¼ˆä½é »åº¦ãƒ»æ…é‡ï¼‰
  for (const workId of supplementTargets) {
    try {
      // æ—¢å­˜ã®Individual Info APIãƒ‡ãƒ¼ã‚¿ç¢ºèª
      const existingWork = await getWorkData(workId);
      if (!existingWork) {
        logger.warn(`ä½œå“${workId}: Individual Info APIãƒ‡ãƒ¼ã‚¿ãªã— - ã‚¹ã‚­ãƒƒãƒ—`);
        results.skipped++;
        continue;
      }
      
      // è©³ç´°ãƒšãƒ¼ã‚¸ã‹ã‚‰è£œå®Œæƒ…å ±å–å¾—
      const detailPageData = await fetchAndParseWorkDetail(workId);
      if (detailPageData) {
        // Individual Info APIãƒ‡ãƒ¼ã‚¿ã¨çµ±åˆ
        await supplementWorkWithDetailData(workId, detailPageData);
        await recordUpdateHistory(workId, 'detail-page', 'success');
        results.successful++;
        
        logger.debug(`ä½œå“${workId}: è©³ç´°ãƒšãƒ¼ã‚¸è£œå®Œå®Œäº†`);
      } else {
        results.failed++;
      }
      
      // ãƒ¬ãƒ¼ãƒˆåˆ¶é™å¯¾å¿œï¼ˆè©³ç´°ãƒšãƒ¼ã‚¸ã¯é‡ã„ï¼‰
      await sleep(1000);
      
    } catch (error) {
      logger.warn(`ä½œå“${workId}ã®è©³ç´°ãƒšãƒ¼ã‚¸è£œå®Œå¤±æ•—:`, error);
      await recordUpdateHistory(workId, 'detail-page', 'failed');
      results.failed++;
    }
  }
  
  logger.info(`è©³ç´°ãƒšãƒ¼ã‚¸è£œå®Œå®Œäº†: æˆåŠŸ${results.successful}ä»¶, å¤±æ•—${results.failed}ä»¶`);
}

// è£œå®Œå¯¾è±¡é¸å®šï¼ˆæœ€çµ‚è£œå®Œã‹ã‚‰ã®çµŒéæ™‚é–“ãƒ™ãƒ¼ã‚¹ï¼‰
async function selectSupplementTargets(): Promise<string[]> {
  const allWorks = await getAllWorkIDs();
  const updateHistory = await getUpdateHistory();
  
  // è©³ç´°ãƒšãƒ¼ã‚¸æœ€çµ‚æ›´æ–°ã§ã‚½ãƒ¼ãƒˆ
  const worksBySupplementTime = allWorks.map(workId => ({
    workId,
    lastDetailPageUpdate: updateHistory[workId]?.lastDetailPageUpdate || new Date(0),
    hasInfoAPIData: updateHistory[workId]?.lastInfoAPIUpdate ? true : false
  }))
  .filter(work => work.hasInfoAPIData) // Individual Info APIãƒ‡ãƒ¼ã‚¿ãŒã‚ã‚‹ä½œå“ã®ã¿
  .sort((a, b) => a.lastDetailPageUpdate.getTime() - b.lastDetailPageUpdate.getTime());
  
  // é€±é–“è£œå®Œç›®æ¨™: å…¨ä½œå“ã‚’é †æ¬¡è£œå®Œ
  const weeklyTarget = Math.ceil(allWorks.length / 4); // æœˆ1å›å…¨è£œå®Œç›®æ¨™
  
  return worksBySupplementTime.slice(0, weeklyTarget).map(work => work.workId);
}
```

---

## ğŸ“… çµ±åˆå®Ÿè¡Œã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«

### æ—¥æ¬¡å®Ÿè¡Œãƒ‘ã‚¿ãƒ¼ãƒ³

```typescript
// å…¬å¹³æ€§é‡è¦–ã®å®Ÿè¡Œã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«
const FAIR_EXECUTION_SCHEDULE = {
  // === ä½œå“IDåé›†ï¼ˆ30åˆ†é–“éš”ãƒ»å¸¸æ™‚ç›£è¦–ï¼‰ ===
  "*/30 * * * *": "ä½œå“IDåé›†ãƒ»æ–°è¦æ¤œå‡º",
  
  // === Individual Info APIï¼ˆæ—¥2å›ãƒ»å…¬å¹³ãƒ­ãƒ¼ãƒ†ãƒ¼ã‚·ãƒ§ãƒ³ï¼‰ ===
  "0 2 * * *": "Individual Info APIæ›´æ–° (æ·±å¤œãƒãƒƒãƒãƒ»500-1000ä»¶)",
  "0 14 * * *": "Individual Info APIæ›´æ–° (åˆå¾Œãƒãƒƒãƒãƒ»500-1000ä»¶)",
  
  // === è©³ç´°ãƒšãƒ¼ã‚¸è£œå®Œï¼ˆé€±1å›ãƒ»ä½é »åº¦ï¼‰ ===
  "0 3 * * 0": "è©³ç´°ãƒšãƒ¼ã‚¸è£œå®Œ (æ—¥æ›œæ·±å¤œãƒ»700-1000ä»¶)",
  
  // === ãƒ¡ãƒ³ãƒ†ãƒŠãƒ³ã‚¹ãƒ»ç›£è¦– ===
  "0 1 * * *": "å…¬å¹³æ€§ç›£è¦–ãƒ»æ›´æ–°çµ±è¨ˆé›†è¨ˆ",
  "0 6 * * 1": "é€±æ¬¡ãƒ‡ãƒ¼ã‚¿å“è³ªãƒã‚§ãƒƒã‚¯",
};
```

### æœˆæ¬¡ãƒ»å››åŠæœŸãƒ¡ãƒ³ãƒ†ãƒŠãƒ³ã‚¹

```typescript
const MAINTENANCE_SCHEDULE = {
  // æœˆæ¬¡å®Œå…¨æ€§ãƒã‚§ãƒƒã‚¯
  monthly: {
    "0 4 1 * *": "å…¨ä½œå“ãƒ‡ãƒ¼ã‚¿å®Œå…¨æ€§ç›£æŸ»",
    "0 5 15 * *": "æ›´æ–°å±¥æ­´åˆ†æãƒ»å…¬å¹³æ€§è©•ä¾¡",
  },
  
  // å››åŠæœŸæœ€é©åŒ–
  quarterly: {
    "0 6 1 1,4,7,10 *": "ã‚·ã‚¹ãƒ†ãƒ æ€§èƒ½æœ€é©åŒ–ãƒ»è¨­å®šè¦‹ç›´ã—",
  }
};
```

---

## ğŸ“Š å…¬å¹³æ€§ç›£è¦–ãƒ»å“è³ªä¿è¨¼

### å…¬å¹³æ€§ãƒ¡ãƒˆãƒªã‚¯ã‚¹

```typescript
interface FairnessMetrics {
  // æ›´æ–°å…¬å¹³æ€§
  updateDistribution: {
    averageUpdateInterval: number;    // å¹³å‡æ›´æ–°é–“éš”ï¼ˆå…¨ä½œå“ï¼‰
    updateIntervalStdDev: number;     // æ›´æ–°é–“éš”ã®æ¨™æº–åå·®
    maxUpdateGap: number;             // æœ€å¤§æ›´æ–°é–“éš”
    fairnessScore: number;            // å…¬å¹³æ€§ã‚¹ã‚³ã‚¢ï¼ˆ0-100ï¼‰
  };
  
  // ãƒ‡ãƒ¼ã‚¿å“è³ªå‡ä¸€æ€§
  dataQuality: {
    averageCompletenessRate: number;  // å¹³å‡å®Œæˆåº¦
    qualityVariance: number;          // å“è³ªã®ã°ã‚‰ã¤ã
    minQualityWork: string;           // æœ€ä½å“è³ªä½œå“ID
    maxQualityWork: string;           // æœ€é«˜å“è³ªä½œå“ID
  };
  
  // å‡¦ç†å…¬å¹³æ€§
  processingFairness: {
    batchProcessingBalance: number;   // ãƒãƒƒãƒå‡¦ç†ã®åã‚Š
    errorRateByWork: Map<string, number>; // ä½œå“åˆ¥ã‚¨ãƒ©ãƒ¼ç‡
    retryDistribution: number[];      // ãƒªãƒˆãƒ©ã‚¤å›æ•°åˆ†å¸ƒ
  };
}
```

### å“è³ªä¿è¨¼ã‚·ã‚¹ãƒ†ãƒ 

```typescript
interface QualityAssuranceSystem {
  // æœ€ä½å“è³ªä¿è¨¼
  minimumQuality: {
    basicInfoCompletion: 100;         // åŸºæœ¬æƒ…å ±å®Œæˆåº¦100%å¿…é ˆ
    infoAPIDataAge: 72;               // Info APIãƒ‡ãƒ¼ã‚¿72æ™‚é–“ä»¥å†…å¿…é ˆ
    detailPageDataAge: 168;           // è©³ç´°ãƒšãƒ¼ã‚¸ãƒ‡ãƒ¼ã‚¿7æ—¥ä»¥å†…æ¨å¥¨
  };
  
  // å“è³ªç›£è¦–
  qualityMonitoring: {
    dailyQualityCheck: true;          // æ—¥æ¬¡å“è³ªãƒã‚§ãƒƒã‚¯
    alertThresholds: {
      incompletionRate: 5;            // ä¸å®Œå…¨ç‡5%ã§ã‚¢ãƒ©ãƒ¼ãƒˆ
      stalenessRate: 10;              // é™³è…åŒ–ç‡10%ã§ã‚¢ãƒ©ãƒ¼ãƒˆ
      errorSpikeDetection: true;      // ã‚¨ãƒ©ãƒ¼æ€¥å¢—æ¤œå‡º
    };
  };
  
  // è‡ªå‹•ä¿®å¾©
  autoRemediation: {
    automaticRetry: true;             // å¤±æ•—ä½œå“ã®è‡ªå‹•ãƒªãƒˆãƒ©ã‚¤
    priorityEscalation: true;         // é€£ç¶šå¤±æ•—ä½œå“ã®å„ªå…ˆå‡¦ç†
    dataCompletion: true;             // ä¸è¶³ãƒ‡ãƒ¼ã‚¿ã®è‡ªå‹•è£œå®Œ
  };
}
```

---

## âš™ï¸ è² è·åˆ¶å¾¡ãƒ»ãƒ¬ãƒ¼ãƒˆåˆ¶é™

### æ™‚é–“å¸¯åˆ¥è² è·èª¿æ•´

```typescript
const LOAD_CONTROL_BY_TIME = {
  "02:00-06:00": {
    // æ·±å¤œï¼šé«˜åŠ¹ç‡å‡¦ç†ï¼ˆãƒ¡ã‚¤ãƒ³å‡¦ç†æ™‚é–“ï¼‰
    workIDCollectionDelay: 200,      // ms
    infoAPIDelay: 300,               // ms
    detailPageDelay: 800,            // ms
    maxConcurrent: 3,                // åŒæ™‚å®Ÿè¡Œæ•°
    batchSize: 50,                   // ãƒãƒƒãƒã‚µã‚¤ã‚º
    note: "ãƒ¡ã‚¤ãƒ³å‡¦ç†æ™‚é–“å¸¯ãƒ»é«˜åŠ¹ç‡é‹ç”¨",
  },
  
  "06:00-22:00": {
    // æ—¥ä¸­ï¼šä¿å®ˆçš„å‡¦ç†ï¼ˆãƒ¦ãƒ¼ã‚¶ãƒ¼å½±éŸ¿æœ€å°åŒ–ï¼‰
    workIDCollectionDelay: 500,      // ms
    infoAPIDelay: 1000,              // ms
    detailPageDelay: 2000,           // ms
    maxConcurrent: 1,                // åŒæ™‚å®Ÿè¡Œæ•°
    batchSize: 20,                   // ãƒãƒƒãƒã‚µã‚¤ã‚º
    note: "ãƒ¦ãƒ¼ã‚¶ãƒ¼é…æ…®ãƒ»ä¿å®ˆçš„é‹ç”¨",
  },
  
  "22:00-02:00": {
    // å¤œé–“ï¼šä¸­ç¨‹åº¦å‡¦ç†
    workIDCollectionDelay: 300,      // ms
    infoAPIDelay: 500,               // ms  
    detailPageDelay: 1200,           // ms
    maxConcurrent: 2,                // åŒæ™‚å®Ÿè¡Œæ•°
    batchSize: 30,                   // ãƒãƒƒãƒã‚µã‚¤ã‚º
    note: "å¤œé–“å‡¦ç†ãƒ»ä¸­ç¨‹åº¦åŠ¹ç‡",
  }
};
```

### ã‚¨ãƒ©ãƒ¼å‡¦ç†ãƒ»å›å¾©æˆ¦ç•¥

```typescript
interface ErrorRecoveryStrategy {
  // æ®µéšåˆ¥ã‚¨ãƒ©ãƒ¼å‡¦ç†
  workIDCollection: {
    retryCount: 3;
    backoffMultiplier: 1.5;
    fallbackStrategy: "å‰å›ãƒ‡ãƒ¼ã‚¿ä¿æŒ";
    criticalityLevel: "HIGH";        // IDåé›†ã¯æœ€é‡è¦
  };
  
  infoAPIFetch: {
    retryCount: 5;
    backoffMultiplier: 2.0;
    fallbackStrategy: "æ¬¡å›ãƒãƒƒãƒã§å„ªå…ˆå‡¦ç†";
    criticalityLevel: "MEDIUM";
  };
  
  detailPageFetch: {
    retryCount: 3;
    backoffMultiplier: 3.0;
    fallbackStrategy: "æ¬¡å›é€±æ¬¡å‡¦ç†ã§å†è©¦è¡Œ";
    criticalityLevel: "LOW";
  };
  
  // å…¨ä½“çš„å›å¾©æˆ¦ç•¥
  systemRecovery: {
    circuitBreakerEnabled: true;     // ã‚µãƒ¼ã‚­ãƒƒãƒˆãƒ–ãƒ¬ãƒ¼ã‚«ãƒ¼
    gracefulDegradation: true;       // æ®µéšçš„æ©Ÿèƒ½ç¸®é€€
    priorityModeSwitch: true;        // å„ªå…ˆãƒ¢ãƒ¼ãƒ‰åˆ‡æ›¿
    emergencyFallback: true;         // ç·Šæ€¥æ™‚ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯
  };
}
```

---

## ğŸ“ˆ ãƒ‡ãƒ¼ã‚¿ç®¡ç†ãƒ»è¿½è·¡ã‚·ã‚¹ãƒ†ãƒ 

### æ›´æ–°å±¥æ­´è¿½è·¡

```typescript
interface ComprehensiveUpdateHistory {
  workId: string;
  
  // åŸºæœ¬æ›´æ–°å±¥æ­´
  lastWorkIDCollection: string;       // IDåé›†æœ€çµ‚ç¢ºèª
  lastInfoAPIUpdate: string;          // Info APIæœ€çµ‚æ›´æ–°
  lastDetailPageUpdate: string;       // è©³ç´°ãƒšãƒ¼ã‚¸æœ€çµ‚æ›´æ–°
  
  // æ›´æ–°çµ±è¨ˆ
  updateCounts: {
    workIDCollectionCount: number;    // IDåé›†å›æ•°
    infoAPIUpdateCount: number;       // Info APIæ›´æ–°å›æ•°
    detailPageUpdateCount: number;    // è©³ç´°ãƒšãƒ¼ã‚¸æ›´æ–°å›æ•°
  };
  
  // å“è³ªãƒ»ã‚¨ãƒ©ãƒ¼è¿½è·¡
  qualityMetrics: {
    dataCompletenessRate: number;     // ãƒ‡ãƒ¼ã‚¿å®Œæˆåº¦
    lastQualityCheck: string;         // æœ€çµ‚å“è³ªãƒã‚§ãƒƒã‚¯
    qualityScore: number;             // å“è³ªã‚¹ã‚³ã‚¢
  };
  
  errorHistory: {
    consecutiveIDCollectionErrors: number;
    consecutiveInfoAPIErrors: number;
    consecutiveDetailPageErrors: number;
    lastErrorTimestamp: string;
    lastErrorType: string;
  };
  
  // å…¬å¹³æ€§è¿½è·¡
  fairnessMetrics: {
    expectedUpdateInterval: number;   // æœŸå¾…æ›´æ–°é–“éš”
    actualUpdateInterval: number;     // å®Ÿéš›æ›´æ–°é–“éš”
    fairnessDeviation: number;        // å…¬å¹³æ€§ã‹ã‚‰ã®åå·®
    priorityFlags: string[];          // ç‰¹åˆ¥å‡¦ç†ãƒ•ãƒ©ã‚°
  };
}
```

### çµ±è¨ˆãƒ»ç›£è¦–ãƒ‡ãƒ¼ã‚¿

```typescript
interface SystemStatistics {
  // å…¨ä½“çµ±è¨ˆ
  totalWorksTracked: number;          // è¿½è·¡å¯¾è±¡ä½œå“æ•°
  activeWorkCount: number;            // ã‚¢ã‚¯ãƒ†ã‚£ãƒ–ä½œå“æ•°
  newWorksThisWeek: number;          // ä»Šé€±ã®æ–°è¦ä½œå“æ•°
  removedWorksThisWeek: number;      // ä»Šé€±ã®å‰Šé™¤ä½œå“æ•°
  
  // æ›´æ–°æ€§èƒ½
  updatePerformance: {
    averageIDCollectionTime: number;  // å¹³å‡IDåé›†æ™‚é–“
    averageInfoAPITime: number;       // å¹³å‡Info APIå‡¦ç†æ™‚é–“
    averageDetailPageTime: number;    // å¹³å‡è©³ç´°ãƒšãƒ¼ã‚¸å‡¦ç†æ™‚é–“
    throughputPerHour: number;        // æ™‚é–“ã‚ãŸã‚Šå‡¦ç†ä»¶æ•°
  };
  
  // å“è³ªçµ±è¨ˆ
  qualityStatistics: {
    averageDataCompleteness: number;  // å¹³å‡ãƒ‡ãƒ¼ã‚¿å®Œæˆåº¦
    qualityDistribution: number[];    // å“è³ªåˆ†å¸ƒ
    lowQualityWorkCount: number;      // ä½å“è³ªä½œå“æ•°
    qualityImprovementRate: number;   // å“è³ªæ”¹å–„ç‡
  };
  
  // å…¬å¹³æ€§çµ±è¨ˆ
  fairnessStatistics: {
    updateIntervalVariance: number;   // æ›´æ–°é–“éš”åˆ†æ•£
    fairnessScore: number;            // å…¨ä½“å…¬å¹³æ€§ã‚¹ã‚³ã‚¢
    batchProcessingBalance: number;   // ãƒãƒƒãƒå‡¦ç†å‡è¡¡åº¦
    outlierWorkCount: number;         // ç•°å¸¸å€¤ä½œå“æ•°
  };
  
  // ã‚¨ãƒ©ãƒ¼ãƒ»å®‰å®šæ€§
  stabilityMetrics: {
    overallErrorRate: number;         // å…¨ä½“ã‚¨ãƒ©ãƒ¼ç‡
    systemUptimePercentage: number;   // ã‚·ã‚¹ãƒ†ãƒ ç¨¼åƒç‡
    dataIntegrityScore: number;       // ãƒ‡ãƒ¼ã‚¿æ•´åˆæ€§ã‚¹ã‚³ã‚¢
    recoverySuccessRate: number;      // å›å¾©æˆåŠŸç‡
  };
}
```

---

## ğŸ¯ å®Ÿè£…è¨ˆç”»

### Phase 1: åŸºç›¤ã‚·ã‚¹ãƒ†ãƒ æ§‹ç¯‰

- [ ] **3ã¤ã®Cloud Functionsåˆ†é›¢å®Ÿè£…**
  - [ ] CollectWorkIDs Functionï¼ˆä½œå“IDåé›†ï¼‰
  - [ ] FetchWorkDetails Functionï¼ˆIndividual Info APIï¼‰
  - [ ] FetchDetailPages Functionï¼ˆè©³ç´°ãƒšãƒ¼ã‚¸è£œå®Œï¼‰

- [ ] **å…¬å¹³æ€§ç®¡ç†ã‚·ã‚¹ãƒ†ãƒ **
  - [ ] ãƒ­ãƒ¼ãƒ†ãƒ¼ã‚·ãƒ§ãƒ³ç®¡ç†ãƒ­ã‚¸ãƒƒã‚¯
  - [ ] æ›´æ–°å±¥æ­´è¿½è·¡ã‚·ã‚¹ãƒ†ãƒ 
  - [ ] å…¬å¹³æ€§ãƒ¡ãƒˆãƒªã‚¯ã‚¹åé›†

### Phase 2: å“è³ªä¿è¨¼ãƒ»ç›£è¦–ã‚·ã‚¹ãƒ†ãƒ 

- [ ] **å“è³ªä¿è¨¼ã‚·ã‚¹ãƒ†ãƒ **
  - [ ] ãƒ‡ãƒ¼ã‚¿å®Œæˆåº¦ãƒã‚§ãƒƒã‚¯
  - [ ] å“è³ªç›£è¦–ãƒ»ã‚¢ãƒ©ãƒ¼ãƒˆ
  - [ ] è‡ªå‹•ä¿®å¾©æ©Ÿèƒ½

- [ ] **è² è·åˆ¶å¾¡ãƒ»ã‚¨ãƒ©ãƒ¼å‡¦ç†**
  - [ ] æ™‚é–“å¸¯åˆ¥è² è·èª¿æ•´
  - [ ] ã‚¨ãƒ©ãƒ¼å›å¾©æˆ¦ç•¥
  - [ ] ã‚µãƒ¼ã‚­ãƒƒãƒˆãƒ–ãƒ¬ãƒ¼ã‚«ãƒ¼å®Ÿè£…

### Phase 3: é‹ç”¨æœ€é©åŒ–ãƒ»ã‚¹ã‚±ãƒ¼ãƒ©ãƒ“ãƒªãƒ†ã‚£

- [ ] **çµ±è¨ˆãƒ»åˆ†æã‚·ã‚¹ãƒ†ãƒ **
  - [ ] å…¬å¹³æ€§åˆ†æãƒ¬ãƒãƒ¼ãƒˆ
  - [ ] ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ç›£è¦–
  - [ ] æœ€é©åŒ–ææ¡ˆæ©Ÿèƒ½

- [ ] **é‹ç”¨ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰**
  - [ ] ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ç›£è¦–
  - [ ] å…¬å¹³æ€§å¯è¦–åŒ–
  - [ ] æ‰‹å‹•ä»‹å…¥ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹

---

## ğŸ“Š æˆåŠŸæŒ‡æ¨™

### å…¬å¹³æ€§æŒ‡æ¨™

- **æ›´æ–°é–“éš”å‡ä¸€æ€§**: å…¨ä½œå“ã®æ›´æ–°é–“éš”æ¨™æº–åå·®24æ™‚é–“ä»¥å†…
- **ãƒ‡ãƒ¼ã‚¿å“è³ªå‡ä¸€æ€§**: å…¨ä½œå“ã®ãƒ‡ãƒ¼ã‚¿å®Œæˆåº¦å·®10%ä»¥å†…
- **å‡¦ç†å…¬å¹³æ€§**: ãƒãƒƒãƒå‡¦ç†ã§ã®åã‚Šä¿‚æ•°0.1ä»¥ä¸‹
- **é€æ˜æ€§**: æ›´æ–°çŠ¶æ³100%å¯è¦–åŒ–ãƒ»ç›£è¦–å¯èƒ½

### å®Œå…¨æ€§æŒ‡æ¨™

- **ãƒ‡ãƒ¼ã‚¿ã‚«ãƒãƒ¬ãƒƒã‚¸**: å…¨å¯¾è±¡ä½œå“100%è¿½è·¡
- **æ›´æ–°ä¿è¨¼**: å…¨ä½œå“72æ™‚é–“ä»¥å†…æ›´æ–°ä¿è¨¼
- **å“è³ªä¿è¨¼**: åŸºæœ¬ãƒ‡ãƒ¼ã‚¿å®Œæˆåº¦95%ä»¥ä¸Šç¶­æŒ
- **è£œå®Œç‡**: Individual Info APIä¸è¶³ãƒ‡ãƒ¼ã‚¿80%ä»¥ä¸Šè£œå®Œ

### ã‚·ã‚¹ãƒ†ãƒ æ€§èƒ½æŒ‡æ¨™

- **æ–°è¦æ¤œå‡ºé€Ÿåº¦**: 30åˆ†ä»¥å†…ã®æ–°ä½œæ¤œå‡ºç‡99%ä»¥ä¸Š
- **å‡¦ç†åŠ¹ç‡**: 3000ä»¶å‡¦ç†ã‚’4æ™‚é–“ä»¥å†…å®Œäº†
- **å®‰å®šæ€§**: ã‚·ã‚¹ãƒ†ãƒ ç¨¼åƒç‡99%ä»¥ä¸Š
- **æ‹¡å¼µæ€§**: 10,000ä»¶è¦æ¨¡ã¸ã®å¯¾å¿œå¯èƒ½

### é‹ç”¨åŠ¹ç‡æŒ‡æ¨™ (APIå„ªå…ˆã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£)

- **APIä»£æ›¿ç‡**: 75%ä»¥ä¸Šã®æ©Ÿèƒ½ã‚’Individual Info APIã§å®Œçµ
- **ã‚¹ã‚¯ãƒ¬ã‚¤ãƒ”ãƒ³ã‚°å‰Šæ¸›ç‡**: 75%ä»¥ä¸Šã®HTMLã‚¹ã‚¯ãƒ¬ã‚¤ãƒ”ãƒ³ã‚°å‰Šæ¸›
- **ãƒ‡ãƒ¼ã‚¿æ›´æ–°é »åº¦**: 1-6æ™‚é–“é–“éš”ã§é«˜é »åº¦æ›´æ–°å®Ÿç¾
- **DLsiteè² è·è»½æ¸›**: ã‚µãƒ¼ãƒãƒ¼ãƒªã‚¯ã‚¨ã‚¹ãƒˆæ•°ã®å¤§å¹…æ¸›å°‘

---

## ğŸ“Š Individual Info API ãƒ‡ãƒ¼ã‚¿æ ¼ç´æˆ¦ç•¥

### Firestoreæ ¼ç´å¯èƒ½æ€§ç¢ºèª

**æŠ€è¡“åˆ¶é™å†…ã§ã®å®Œå…¨æ ¼ç´å¯èƒ½**
- ãƒ‡ãƒ¼ã‚¿ã‚µã‚¤ã‚º: æ¨™æº–18KBãƒ»æœ€å¤§24KB << 1MBåˆ¶é™ âœ…
- ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰æ•°: 254å€‹ << åˆ¶é™ãªã— âœ…
- ãƒã‚¹ãƒˆæ·±åº¦: æœ€å¤§5ãƒ¬ãƒ™ãƒ« << 20ãƒ¬ãƒ™ãƒ«åˆ¶é™ âœ…
- ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹: èª­ã¿å–ã‚Š1.5å€é…å»¶ï¼ˆè¨±å®¹ç¯„å›²ï¼‰

### æ®µéšçš„å®Ÿè£…æˆ¦ç•¥ï¼ˆæ¨å¥¨ï¼‰

**æ®µéš1: é‡è¦ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰æ‹¡å¼µ**ï¼ˆå³åº§å®Ÿè¡Œå¯èƒ½ï¼‰
- ã‚µã‚¤ã‚ºå¢—åŠ : 12KB â†’ 15KBï¼ˆ25%å¢—åŠ ï¼‰
- ã‚¹ã‚¯ãƒ¬ã‚¤ãƒ”ãƒ³ã‚°ä»£æ›¿: 75%æ©Ÿèƒ½ã‚’APIã§å®Œçµ
- è¿½åŠ ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰: ãƒ©ãƒ³ã‚­ãƒ³ã‚°ãƒ»å¤šé€šè²¨ãƒ»æŠ€è¡“ä»•æ§˜ãƒ»ç¿»è¨³æƒ…å ±

**æ®µéš2: ãƒã‚¤ãƒ–ãƒªãƒƒãƒ‰æ–¹å¼**ï¼ˆ3-6ãƒ¶æœˆï¼‰
- ãƒ¡ã‚¤ãƒ³: æœ€é©åŒ–ãƒ‡ãƒ¼ã‚¿ï¼ˆ15KBï¼‰
- ã‚µãƒ–ã‚³ãƒ¬ã‚¯ã‚·ãƒ§ãƒ³: å®Œå…¨APIãƒ‡ãƒ¼ã‚¿ä¿å­˜ï¼ˆ24KBï¼‰
- 2æ®µéšã‚¢ã‚¯ã‚»ã‚¹: æ—¥å¸¸ã¯é«˜é€Ÿãƒ»è©³ç´°ã¯å¿…è¦æ™‚

**æ®µéš3: å®Œå…¨APIåŒ–**ï¼ˆ6-12ãƒ¶æœˆï¼‰
- ã‚¹ã‚¯ãƒ¬ã‚¤ãƒ”ãƒ³ã‚°100%å»ƒæ­¢å®Œäº†
- é«˜é€Ÿèª­ã¿å–ã‚Š + å®Œå…¨ãƒ‡ãƒ¼ã‚¿ä¿æŒã®ä¸¡ç«‹

### ã‚³ã‚¹ãƒˆãƒ»ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹å½±éŸ¿

| æ–¹å¼ | ã‚µã‚¤ã‚º | èª­ã¿å–ã‚Š | ã‚³ã‚¹ãƒˆ | ã‚¹ã‚¯ãƒ¬ã‚¤ãƒ”ãƒ³ã‚°ä»£æ›¿ |
|------|------|----------|------|----------------|
| ç¾åœ¨ | 12KB | 10ms | $0.50 | 0% |
| æ®µéš1 | 15KB | 12ms | $0.63 | 75% |
| ãƒã‚¤ãƒ–ãƒªãƒƒãƒ‰ | 15KB+24KB | 12ms+13ms | $0.55 | 100% |
| å…¨æ ¼ç´ | 18KB | 15ms | $0.75 | 100% |

### å®Ÿè£…å„ªå…ˆåº¦

**é«˜å„ªå…ˆåº¦**ï¼ˆæ®µéš1ã§å³åº§è¿½åŠ ï¼‰
- `rank[]` - ãƒ©ãƒ³ã‚­ãƒ³ã‚°å±¥æ­´
- `locale_price` - å¤šé€šè²¨ä¾¡æ ¼  
- `rate_count_detail` - è©³ç´°è©•ä¾¡åˆ†å¸ƒ
- `platform[]` - å¯¾å¿œãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ 

**ä¸­å„ªå…ˆåº¦**ï¼ˆæ®µéš2ã§è¿½åŠ ï¼‰
- `language_editions` - ç¿»è¨³æƒ…å ±
- `cpu_string`, `memory_string` - æŠ€è¡“ä»•æ§˜
- `campaign_*` - ã‚­ãƒ£ãƒ³ãƒšãƒ¼ãƒ³æƒ…å ±

---

## ğŸ”— é–¢é€£ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ

- [DEVELOPMENT.md](./DEVELOPMENT.md) - é–‹ç™ºç’°å¢ƒãƒ»è¨­è¨ˆåŸå‰‡
- [INFRASTRUCTURE_ARCHITECTURE.md](./INFRASTRUCTURE_ARCHITECTURE.md) - ã‚¤ãƒ³ãƒ•ãƒ©æ§‹æˆ  
- [FIRESTORE_STRUCTURE.md](./FIRESTORE_STRUCTURE.md) - ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹æ§‹é€ 
- [DEPLOYMENT_GUIDE.md](./DEPLOYMENT_GUIDE.md) - ãƒ‡ãƒ—ãƒ­ã‚¤ãƒ»é‹ç”¨ã‚¬ã‚¤ãƒ‰
- [DLSITE_API_ANALYSIS.md](./DLSITE_API_ANALYSIS.md) - Individual Info API 254ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰è§£æ

---

## ğŸ“‹ 100% API-Only ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£å®Ÿç¾å¯èƒ½æ€§ç·æ‹¬

### ğŸ¯ ã‚¹ã‚¯ãƒ¬ã‚¤ãƒ”ãƒ³ã‚°ã‚¼ãƒ­æˆ¦ç•¥ - å®Œå…¨å®Ÿç¾å¯èƒ½

**æŠ€è¡“çš„å®Ÿç¾æ€§**: âœ… **100%ç¢ºèªæ¸ˆã¿**
- Individual Info API (254ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰) ã§WorkDetailã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆå¿…è¦ãƒ‡ãƒ¼ã‚¿ã‚’100%ä»£æ›¿å¯èƒ½
- dlsite-detail-parser.ts (1,154è¡Œ) ã®å®Œå…¨å‰Šé™¤ãŒå³åº§ã«å®Ÿè¡Œå¯èƒ½
- 403ã‚¨ãƒ©ãƒ¼ãƒ»HTMLè§£æã‚¨ãƒ©ãƒ¼ãƒ»ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ã‚¨ãƒ©ãƒ¼ã‚’å®Œå…¨æ’é™¤

**ã‚·ã‚¹ãƒ†ãƒ åŠ¹ç‡å‘ä¸Š**: âœ… **å¤§å¹…ãªæ”¹å–„åŠ¹æœ**
- HTTPãƒªã‚¯ã‚¨ã‚¹ãƒˆæ•°: 50%å‰Šæ¸› (è©³ç´°ãƒšãƒ¼ã‚¸ã‚¢ã‚¯ã‚»ã‚¹å»ƒæ­¢)
- ãƒ‡ãƒ¼ã‚¿æ›´æ–°é »åº¦: 12-24æ™‚é–“ â†’ 1-6æ™‚é–“ (4å€é«˜é€ŸåŒ–)
- ã‚·ã‚¹ãƒ†ãƒ å®‰å®šæ€§: HTMLæ§‹é€ å¤‰æ›´ã®å½±éŸ¿ã‚’å®Œå…¨æ’é™¤
- ä¿å®ˆæ€§å‘ä¸Š: è¤‡é›‘ãªã‚¹ã‚¯ãƒ¬ã‚¤ãƒ”ãƒ³ã‚°ãƒ­ã‚¸ãƒƒã‚¯å®Œå…¨å‰Šé™¤

### ğŸ’¾ ãƒ‡ãƒ¼ã‚¿æ ¼ç´æˆ¦ç•¥ - Firestoreå®Œå…¨å¯¾å¿œ

**æ ¼ç´å¯èƒ½æ€§**: âœ… **æŠ€è¡“åˆ¶é™å†…ã§å®Œå…¨å®Ÿç¾å¯èƒ½**
- APIå…¨ãƒ‡ãƒ¼ã‚¿: 18KB << 1MBåˆ¶é™ (ä½™è£•ã§ã‚¯ãƒªã‚¢)
- ãƒã‚¹ãƒˆæ·±åº¦: 5ãƒ¬ãƒ™ãƒ« << 20ãƒ¬ãƒ™ãƒ«åˆ¶é™
- ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰æ•°: 254å€‹ (åˆ¶é™ãªã—)

**æ¨å¥¨å®Ÿè£…**: æ®µéšçš„ãƒã‚¤ãƒ–ãƒªãƒƒãƒ‰æ–¹å¼
- **æ®µéš1**: é‡è¦20ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰è¿½åŠ ã§75%ã‚¹ã‚¯ãƒ¬ã‚¤ãƒ”ãƒ³ã‚°ä»£æ›¿ (å³åº§å®Ÿè¡Œ)
- **æ®µéš2**: ã‚µãƒ–ã‚³ãƒ¬ã‚¯ã‚·ãƒ§ãƒ³æ´»ç”¨ã§100%ã‚¹ã‚¯ãƒ¬ã‚¤ãƒ”ãƒ³ã‚°å»ƒæ­¢
- **æ®µéš3**: å®Œå…¨æœ€é©åŒ–ãƒ»å‹•çš„ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰æ‹¡å¼µ

### ğŸš€ å®Ÿè£…ãƒ­ãƒ¼ãƒ‰ãƒãƒƒãƒ—

**å³åº§å®Ÿè¡Œå¯èƒ½ (æ®µéš1)**:
1. EnhancedFirestoreDLsiteWorkDataå®Ÿè£… (15KBã€25%å¢—åŠ )
2. é‡è¦APIãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰20å€‹è¿½åŠ  (ãƒ©ãƒ³ã‚­ãƒ³ã‚°ãƒ»å¤šé€šè²¨ãƒ»æŠ€è¡“ä»•æ§˜)
3. 75%ã‚¹ã‚¯ãƒ¬ã‚¤ãƒ”ãƒ³ã‚°æ©Ÿèƒ½ã®APIä»£æ›¿å®Œäº†

**ä¸­æœŸå®Ÿè£… (3-6ãƒ¶æœˆ)**:
4. ãƒã‚¤ãƒ–ãƒªãƒƒãƒ‰æ–¹å¼å°å…¥ (é«˜é€Ÿèª­ã¿å–ã‚Š + å®Œå…¨ãƒ‡ãƒ¼ã‚¿ä¿å­˜)
5. 100%ã‚¹ã‚¯ãƒ¬ã‚¤ãƒ”ãƒ³ã‚°å»ƒæ­¢å®Œäº†
6. dlsite-detail-parser.tså®Œå…¨å‰Šé™¤

**é•·æœŸæœ€é©åŒ– (6-12ãƒ¶æœˆ)**:
7. å‹•çš„ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰æ‹¡å¼µã‚·ã‚¹ãƒ†ãƒ 
8. ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æœ€é©åŒ–ãƒ»ã‚³ã‚¹ãƒˆåŠ¹ç‡åŒ–
9. æ–°æ©Ÿèƒ½é–‹ç™ºã®åŸºç›¤ç¢ºç«‹

### ğŸ’¡ çµè«–

**DLsiteä½œå“ãƒ‡ãƒ¼ã‚¿æ›´æ–°ã‚·ã‚¹ãƒ†ãƒ ã®100% API-OnlyåŒ–ã¯å®Œå…¨ã«å®Ÿç¾å¯èƒ½**

Individual Info APIã®254ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã¨ã„ã†è±Šå¯Œãªãƒ‡ãƒ¼ã‚¿ã¨ã€Firestoreã®æŸ”è»Ÿãªæ ¼ç´èƒ½åŠ›ã«ã‚ˆã‚Šã€HTMLã‚¹ã‚¯ãƒ¬ã‚¤ãƒ”ãƒ³ã‚°ã‚’å®Œå…¨å»ƒæ­¢ã—ãªãŒã‚‰ã€ç¾åœ¨ä»¥ä¸Šã®æ©Ÿèƒ½ã¨ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ã‚’å®Ÿç¾ã§ãã¾ã™ã€‚æ®µéšçš„å®Ÿè£…ã«ã‚ˆã‚Šã€æ—¢å­˜ã‚·ã‚¹ãƒ†ãƒ ã‚’ç ´å£Šã™ã‚‹ã“ã¨ãªãã€é©æ–°çš„ãªã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ã¸ã®ç§»è¡ŒãŒå¯èƒ½ã§ã™ã€‚

---

## ğŸ“ˆ æ™‚ç³»åˆ—ãƒ‡ãƒ¼ã‚¿æˆ¦ç•¥

### æ¦‚è¦

DLsiteä½œå“ã®ä¾¡æ ¼å¤‰å‹•ãƒ»è²©å£²æ¨ç§»ãƒ»è©•ä¾¡å¤‰åŒ–ã‚’åŠ¹ç‡çš„ã«è¿½è·¡ãƒ»åˆ†æã™ã‚‹ãŸã‚ã®æ™‚ç³»åˆ—ãƒ‡ãƒ¼ã‚¿ç®¡ç†ã‚·ã‚¹ãƒ†ãƒ ã€‚Individual Info APIã®é«˜é »åº¦æ›´æ–°ãƒ‡ãƒ¼ã‚¿ã‚’æ—¥æ¬¡é›†è¨ˆã—ã€é•·æœŸä¿å­˜ã¨é«˜é€Ÿåˆ†æã‚’ä¸¡ç«‹ã•ã›ã‚‹è¨­è¨ˆã€‚

### ğŸ¯ æ™‚ç³»åˆ—ãƒ‡ãƒ¼ã‚¿è¨­è¨ˆç›®æ¨™

- **ãƒ‡ãƒ¼ã‚¿åŠ¹ç‡åŒ–**: 96%ã®ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸å‰Šæ¸›ãƒ»95%ã®ã‚¯ã‚¨ãƒªã‚³ã‚¹ãƒˆå‰Šæ¸›
- **åˆ†æç²¾åº¦å‘ä¸Š**: æ—¥æ¬¡é›†è¨ˆã«ã‚ˆã‚‹æ˜ç¢ºãªãƒˆãƒ¬ãƒ³ãƒ‰æŠŠæ¡
- **ã‚°ãƒ­ãƒ¼ãƒãƒ«å¯¾å¿œ**: 6åœ°åŸŸã®ä¾¡æ ¼è¿½è·¡ãƒ»å¤šé€šè²¨åˆ†æ
- **ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹**: 20å€ã®æç”»é€Ÿåº¦å‘ä¸Šãƒ»ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ãƒãƒ£ãƒ¼ãƒˆ

---

## ğŸ—ï¸ ãƒ‡ãƒ¼ã‚¿åé›†ã¨ä¿å­˜ã®è©³ç´°ãƒ•ãƒ­ãƒ¼

### 1. ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ãƒ‡ãƒ¼ã‚¿åé›†å±¤

#### **Individual Info API ã‹ã‚‰ã®é«˜é »åº¦ãƒ‡ãƒ¼ã‚¿å–å¾—**

```typescript
// 1-6æ™‚é–“é–“éš”ã§ã®APIæ›´æ–°æ™‚ã«å®Ÿè¡Œ
async function collectTimeSeriesData(workId: string, apiData: DLsiteInfoResponse): Promise<void> {
  const timestamp = Timestamp.now();
  
  // ç”Ÿãƒ‡ãƒ¼ã‚¿ã®ä¿å­˜ï¼ˆé«˜é »åº¦æ›´æ–°å¯¾å¿œï¼‰
  const rawData: RawTimeSeriesData = {
    workId,
    timestamp,
    
    // ä¾¡æ ¼ãƒ‡ãƒ¼ã‚¿ï¼ˆ6åœ°åŸŸå¯¾å¿œï¼‰
    prices: {
      JP: apiData.price,
      US: apiData.price_en || apiData.currency_price?.USD || 0,
      EU: apiData.currency_price?.EUR || 0,
      CN: apiData.currency_price?.CNY || 0,
      TW: apiData.locale_price?.tw_price?.TWD || 0,
      KR: apiData.currency_price?.KRW || 0
    },
    
    // å‰²å¼•ãƒ»ã‚­ãƒ£ãƒ³ãƒšãƒ¼ãƒ³æƒ…å ±
    discount: {
      rate: apiData.discount_rate || 0,
      campaignId: apiData.campaign?.campaign_id,
      campaignName: apiData.campaign?.campaign_name,
      endDate: apiData.campaign?.end_date
    },
    
    // è²©å£²ãƒ»è©•ä¾¡ãƒ‡ãƒ¼ã‚¿
    sales: {
      downloadCount: apiData.dl_count || 0,
      saleCount: apiData.sales_count || 0,
      wishlistCount: apiData.wishlist_count || 0
    },
    
    // ãƒ©ãƒ³ã‚­ãƒ³ã‚°ãƒ‡ãƒ¼ã‚¿
    rankings: {
      day: apiData.rank?.day,
      week: apiData.rank?.week,
      month: apiData.rank?.month,
      year: apiData.rank?.year,
      total: apiData.rank?.total
    },
    
    // è©•ä¾¡ãƒ‡ãƒ¼ã‚¿
    rating: {
      averageStar: apiData.rate_average_star || 0,
      averagePoint: apiData.rate_average || 0,
      reviewCount: apiData.rate_count || 0,
      ratingDetail: apiData.rate_count_detail || {}
    }
  };
  
  // Firestoreã¸ã®ä¿å­˜ï¼ˆãƒãƒƒãƒå‡¦ç†å¯¾å¿œï¼‰
  await saveRawTimeSeriesData(workId, rawData);
}
```

### 2. ãƒ‡ãƒ¼ã‚¿ä¿å­˜æˆ¦ç•¥

#### **Firestore ã‚³ãƒ¬ã‚¯ã‚·ãƒ§ãƒ³è¨­è¨ˆ**

```text
// ãƒ¡ã‚¤ãƒ³ã‚³ãƒ¬ã‚¯ã‚·ãƒ§ãƒ³æ§‹é€ 
dlsite-time-series/
â”œâ”€â”€ raw-data/                     # ç”Ÿãƒ‡ãƒ¼ã‚¿ï¼ˆ7æ—¥é–“ä¿æŒï¼‰
â”‚   â””â”€â”€ {workId}/
â”‚       â””â”€â”€ {timestamp}           # å€‹åˆ¥æ›´æ–°ãƒ‡ãƒ¼ã‚¿
â”‚           â”œâ”€â”€ prices            # 6åœ°åŸŸä¾¡æ ¼
â”‚           â”œâ”€â”€ sales             # è²©å£²æ•°
â”‚           â”œâ”€â”€ rankings          # ãƒ©ãƒ³ã‚­ãƒ³ã‚°
â”‚           â””â”€â”€ rating            # è©•ä¾¡
â”‚
â”œâ”€â”€ daily-aggregates/             # æ—¥æ¬¡é›†è¨ˆï¼ˆæ°¸ç¶šä¿æŒï¼‰
â”‚   â””â”€â”€ {workId}/
â”‚       â””â”€â”€ {date}               # "2025-01-07" å½¢å¼
â”‚           â”œâ”€â”€ priceSnapshot    # ãã®æ—¥ã®ä¾¡æ ¼æƒ…å ±
â”‚           â”œâ”€â”€ salesSnapshot    # è²©å£²ãƒ»è©•ä¾¡ã‚µãƒãƒª
â”‚           â””â”€â”€ metadata         # é›†è¨ˆãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿
â”‚
â””â”€â”€ monthly-summaries/            # æœˆæ¬¡ã‚µãƒãƒªï¼ˆæ°¸ç¶šä¿æŒï¼‰
    â””â”€â”€ {workId}/
        â””â”€â”€ {yearMonth}          # "2025-01" å½¢å¼
```

#### **ç”Ÿãƒ‡ãƒ¼ã‚¿ä¿å­˜ã®å®Ÿè£…**

```typescript
async function saveRawTimeSeriesData(
  workId: string, 
  data: RawTimeSeriesData
): Promise<void> {
  const docRef = db
    .collection('dlsite-time-series')
    .doc('raw-data')
    .collection(workId)
    .doc(data.timestamp.toMillis().toString());
    
  await docRef.set(data);
  
  // ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹æ›´æ–°ï¼ˆé«˜é€Ÿã‚¯ã‚¨ãƒªç”¨ï¼‰
  await updateTimeSeriesIndex(workId, data.timestamp);
}
```

---

## ğŸ“Š Individual Info API ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ãƒãƒƒãƒ”ãƒ³ã‚°

### ä¾¡æ ¼é–¢é€£ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰

| APIãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ | æ™‚ç³»åˆ—ãƒ‡ãƒ¼ã‚¿ | ç”¨é€” | æ›´æ–°é »åº¦ |
|--------------|-------------|------|----------|
| `price` | `prices.JP` | æ—¥æœ¬å††ä¾¡æ ¼ | 1-6æ™‚é–“ |
| `price_en` | `prices.US` | USDä¾¡æ ¼ï¼ˆè‹±èªç‰ˆï¼‰ | 1-6æ™‚é–“ |
| `currency_price.USD` | `prices.US` | USDä¾¡æ ¼ï¼ˆAPIç‰ˆï¼‰ | 1-6æ™‚é–“ |
| `currency_price.EUR` | `prices.EU` | EURä¾¡æ ¼ | 1-6æ™‚é–“ |
| `currency_price.CNY` | `prices.CN` | ä¸­å›½å…ƒä¾¡æ ¼ | 1-6æ™‚é–“ |
| `currency_price.KRW` | `prices.KR` | éŸ“å›½ã‚¦ã‚©ãƒ³ä¾¡æ ¼ | 1-6æ™‚é–“ |
| `locale_price.tw_price.TWD` | `prices.TW` | å°æ¹¾ãƒ‰ãƒ«ä¾¡æ ¼ | 1-6æ™‚é–“ |
| `discount_rate` | `discount.rate` | å‰²å¼•ç‡ | ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ  |
| `campaign.campaign_id` | `discount.campaignId` | ã‚­ãƒ£ãƒ³ãƒšãƒ¼ãƒ³ID | ã‚¤ãƒ™ãƒ³ãƒˆæ™‚ |

### è²©å£²ãƒ»è©•ä¾¡ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰

| APIãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ | æ™‚ç³»åˆ—ãƒ‡ãƒ¼ã‚¿ | ç”¨é€” | æ›´æ–°é »åº¦ |
|--------------|-------------|------|----------|
| `dl_count` | `sales.downloadCount` | DLæ•° | 1-6æ™‚é–“ |
| `sales_count` | `sales.saleCount` | è²©å£²æ•° | 1-6æ™‚é–“ |
| `wishlist_count` | `sales.wishlistCount` | ãŠæ°—ã«å…¥ã‚Šæ•° | 1-6æ™‚é–“ |
| `rate_average_star` | `rating.averageStar` | å¹³å‡è©•ä¾¡ï¼ˆæ˜Ÿï¼‰ | 1-6æ™‚é–“ |
| `rate_count` | `rating.reviewCount` | ãƒ¬ãƒ“ãƒ¥ãƒ¼æ•° | 1-6æ™‚é–“ |
| `rank.day` | `rankings.day` | æ—¥é–“ãƒ©ãƒ³ã‚­ãƒ³ã‚° | æ—¥æ¬¡æ›´æ–° |
| `rank.week` | `rankings.week` | é€±é–“ãƒ©ãƒ³ã‚­ãƒ³ã‚° | é€±æ¬¡æ›´æ–° |
| `rank.month` | `rankings.month` | æœˆé–“ãƒ©ãƒ³ã‚­ãƒ³ã‚° | æœˆæ¬¡æ›´æ–° |

### ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰å¤‰æ›é–¢æ•°

```typescript
function mapApiToTimeSeries(apiData: DLsiteInfoResponse): TimeSeriesDataPoint {
  return {
    // ä¾¡æ ¼ãƒ‡ãƒ¼ã‚¿ã®çµ±åˆï¼ˆè¤‡æ•°ã‚½ãƒ¼ã‚¹ã‹ã‚‰æœ€é©å€¤é¸æŠï¼‰
    prices: {
      JP: apiData.price || 0,
      US: apiData.price_en || apiData.currency_price?.USD || 0,
      EU: apiData.currency_price?.EUR || 0,
      CN: apiData.currency_price?.CNY || 0,
      TW: extractTaiwanPrice(apiData.locale_price),
      KR: apiData.currency_price?.KRW || 0
    },
    
    // ã‚­ãƒ£ãƒ³ãƒšãƒ¼ãƒ³æƒ…å ±ã®æ­£è¦åŒ–
    campaign: normalizeCampaignData(apiData.campaign),
    
    // ãƒ©ãƒ³ã‚­ãƒ³ã‚°ãƒ‡ãƒ¼ã‚¿ã®çµ±åˆ
    rankings: extractRankingData(apiData.rank),
    
    // è©•ä¾¡ãƒ‡ãƒ¼ã‚¿ã®è©³ç´°åŒ–
    rating: {
      average: apiData.rate_average_star || 0,
      distribution: apiData.rate_count_detail || {},
      count: apiData.rate_count || 0
    }
  };
}

// å°æ¹¾ä¾¡æ ¼ã®æŠ½å‡ºï¼ˆãƒã‚¹ãƒˆã•ã‚ŒãŸãƒ‡ãƒ¼ã‚¿å¯¾å¿œï¼‰
function extractTaiwanPrice(localePrice: any): number {
  if (!localePrice) return 0;
  
  // locale_price.tw_price.TWD ã¾ãŸã¯ locale_price.zh_TW
  return localePrice.tw_price?.TWD || 
         localePrice.zh_TW || 
         0;
}
```

---

## ğŸ“… æ—¥æ¬¡é›†è¨ˆã®å…·ä½“çš„ãªå®Ÿè£…

### é›†è¨ˆå‡¦ç†ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£

#### **æ—¥æ¬¡é›†è¨ˆCloud Function**

```typescript
export const dailyAggregation = functions
  .region('asia-northeast1')
  .runWith({
    timeoutSeconds: 540,
    memory: '2GB'
  })
  .pubsub
  .schedule('0 3 * * *')  // æ¯æ—¥åˆå‰3æ™‚ï¼ˆJSTï¼‰
  .timeZone('Asia/Tokyo')
  .onRun(async (context) => {
    const targetDate = getYesterdayDateString(); // "2025-01-06"
    logger.info(`æ—¥æ¬¡é›†è¨ˆé–‹å§‹: ${targetDate}`);
    
    try {
      // 1. å¯¾è±¡ä½œå“ã®ãƒªã‚¹ãƒˆå–å¾—
      const activeWorks = await getActiveWorkIds();
      logger.info(`å¯¾è±¡ä½œå“æ•°: ${activeWorks.length}`);
      
      // 2. ãƒãƒƒãƒå‡¦ç†ã®æº–å‚™
      const batchProcessor = new BatchProcessor(500); // 500ä»¶ãšã¤å‡¦ç†
      
      // 3. å„ä½œå“ã®æ—¥æ¬¡é›†è¨ˆå®Ÿè¡Œ
      for (const workIds of batchProcessor.createBatches(activeWorks)) {
        await Promise.all(
          workIds.map(workId => aggregateWorkData(workId, targetDate))
        );
      }
      
      // 4. é›†è¨ˆå¾Œã®å‡¦ç†
      await postAggregationTasks(targetDate);
      
      logger.info(`æ—¥æ¬¡é›†è¨ˆå®Œäº†: ${targetDate}`);
      
    } catch (error) {
      logger.error('æ—¥æ¬¡é›†è¨ˆã‚¨ãƒ©ãƒ¼:', error);
      throw error;
    }
  });
```

### ä½œå“åˆ¥é›†è¨ˆãƒ­ã‚¸ãƒƒã‚¯

```typescript
async function aggregateWorkData(workId: string, date: string): Promise<void> {
  // 1. è©²å½“æ—¥ã®ç”Ÿãƒ‡ãƒ¼ã‚¿å–å¾—
  const rawDataQuery = db
    .collection('dlsite-time-series')
    .doc('raw-data')
    .collection(workId)
    .where('timestamp', '>=', getStartOfDay(date))
    .where('timestamp', '<', getEndOfDay(date));
    
  const rawDataSnapshot = await rawDataQuery.get();
  
  if (rawDataSnapshot.empty) {
    logger.debug(`No data for ${workId} on ${date}`);
    return;
  }
  
  // 2. é›†è¨ˆãƒ‡ãƒ¼ã‚¿ã®ç”Ÿæˆ
  const aggregatedData = calculateDailyAggregates(
    workId, 
    date, 
    rawDataSnapshot.docs
  );
  
  // 3. é›†è¨ˆãƒ‡ãƒ¼ã‚¿ã®ä¿å­˜
  await saveDailyAggregate(workId, date, aggregatedData);
  
  // 4. ç”Ÿãƒ‡ãƒ¼ã‚¿ã®ã‚¯ãƒªãƒ¼ãƒ³ã‚¢ãƒƒãƒ—ãƒãƒ¼ã‚¯
  await markForCleanup(workId, rawDataSnapshot.docs);
}
```

### é›†è¨ˆã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ 

```typescript
function calculateDailyAggregates(
  workId: string,
  date: string,
  rawDocs: QueryDocumentSnapshot[]
): DailyAggregateData {
  const dataPoints = rawDocs.map(doc => doc.data() as RawTimeSeriesData);
  
  return {
    workId,
    date,
    
    // ä¾¡æ ¼é›†è¨ˆï¼ˆ6åœ°åŸŸå¯¾å¿œï¼‰
    priceSnapshot: {
      // å„åœ°åŸŸã®æœ€ä½ä¾¡æ ¼ï¼ˆãã®æ—¥ã®æœ€å®‰å€¤ï¼‰
      lowestPrices: calculateLowestPrices(dataPoints),
      
      // å„åœ°åŸŸã®æœ€é«˜ä¾¡æ ¼
      highestPrices: calculateHighestPrices(dataPoints),
      
      // å„åœ°åŸŸã®çµ‚å€¤ï¼ˆæœ€å¾Œã®è¨˜éŒ²å€¤ï¼‰
      closingPrices: getClosingPrices(dataPoints),
      
      // æœ€å¤§å‰²å¼•ç‡
      maxDiscountRate: Math.max(...dataPoints.map(d => d.discount.rate)),
      
      // ã‚­ãƒ£ãƒ³ãƒšãƒ¼ãƒ³æƒ…å ±
      campaigns: extractUniqueCampaigns(dataPoints)
    },
    
    // è²©å£²æ•°é›†è¨ˆ
    salesSnapshot: {
      // ãã®æ—¥ã®æœ€é«˜å€¤
      peakDownloadCount: Math.max(...dataPoints.map(d => d.sales.downloadCount)),
      peakSaleCount: Math.max(...dataPoints.map(d => d.sales.saleCount)),
      peakWishlistCount: Math.max(...dataPoints.map(d => d.sales.wishlistCount)),
      
      // å¢—åŠ æ•°ï¼ˆå§‹å€¤ã¨çµ‚å€¤ã®å·®ï¼‰
      downloadIncrease: calculateIncrease(dataPoints, 'downloadCount'),
      saleIncrease: calculateIncrease(dataPoints, 'saleCount'),
      wishlistIncrease: calculateIncrease(dataPoints, 'wishlistCount')
    },
    
    // ãƒ©ãƒ³ã‚­ãƒ³ã‚°é›†è¨ˆ
    rankingSnapshot: {
      // ãã®æ—¥ã®æœ€é«˜é †ä½ï¼ˆæ•°å€¤ãŒå°ã•ã„ã»ã©é«˜é †ä½ï¼‰
      bestDayRank: Math.min(...dataPoints.map(d => d.rankings.day || Infinity)),
      bestWeekRank: Math.min(...dataPoints.map(d => d.rankings.week || Infinity)),
      bestMonthRank: Math.min(...dataPoints.map(d => d.rankings.month || Infinity)),
      
      // ãƒ©ãƒ³ã‚­ãƒ³ã‚°æ¨ç§»
      rankingTrend: calculateRankingTrend(dataPoints)
    },
    
    // è©•ä¾¡é›†è¨ˆ
    ratingSnapshot: {
      // æœ€é«˜è©•ä¾¡
      peakAverageStar: Math.max(...dataPoints.map(d => d.rating.averageStar)),
      peakReviewCount: Math.max(...dataPoints.map(d => d.rating.reviewCount)),
      
      // æ–°è¦ãƒ¬ãƒ“ãƒ¥ãƒ¼æ•°
      newReviews: calculateNewReviews(dataPoints),
      
      // è©•ä¾¡åˆ†å¸ƒã®å¤‰åŒ–
      ratingDistributionChange: calculateDistributionChange(dataPoints)
    },
    
    // ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿
    metadata: {
      updateCount: dataPoints.length,
      firstUpdate: dataPoints[0].timestamp,
      lastUpdate: dataPoints[dataPoints.length - 1].timestamp,
      dataQuality: assessDataQuality(dataPoints)
    }
  };
}
```

### 6åœ°åŸŸä¾¡æ ¼ã®é›†è¨ˆé–¢æ•°

```typescript
function calculateLowestPrices(dataPoints: RawTimeSeriesData[]): RegionalPrices {
  const regions: Region[] = ['JP', 'US', 'EU', 'CN', 'TW', 'KR'];
  const lowestPrices: RegionalPrices = {} as RegionalPrices;
  
  for (const region of regions) {
    const prices = dataPoints
      .map(d => d.prices[region])
      .filter(price => price > 0); // 0å††ã¯é™¤å¤–
      
    lowestPrices[region] = prices.length > 0 
      ? Math.min(...prices) 
      : 0;
  }
  
  return lowestPrices;
}

// ç‚ºæ›¿ãƒ¬ãƒ¼ãƒˆè€ƒæ…®ã®çµ±ä¸€ä¾¡æ ¼è¨ˆç®—ï¼ˆã‚ªãƒ—ã‚·ãƒ§ãƒ³ï¼‰
function calculateUnifiedPrice(
  regionalPrices: RegionalPrices,
  exchangeRates: ExchangeRates
): number {
  // æ—¥æœ¬å††åŸºæº–ã§ã®çµ±ä¸€ä¾¡æ ¼è¨ˆç®—
  const pricesInJPY = {
    JP: regionalPrices.JP,
    US: regionalPrices.US * exchangeRates.USD_TO_JPY,
    EU: regionalPrices.EU * exchangeRates.EUR_TO_JPY,
    CN: regionalPrices.CN * exchangeRates.CNY_TO_JPY,
    TW: regionalPrices.TW * exchangeRates.TWD_TO_JPY,
    KR: regionalPrices.KR * exchangeRates.KRW_TO_JPY
  };
  
  // æœ€ã‚‚å®‰ã„åœ°åŸŸã®ä¾¡æ ¼ã‚’è¿”ã™
  return Math.min(...Object.values(pricesInJPY).filter(p => p > 0));
}
```

---

## ğŸ”„ ãƒ‡ãƒ¼ã‚¿ç§»è¡Œæˆ¦ç•¥

### æ—¢å­˜ãƒ‡ãƒ¼ã‚¿ã‹ã‚‰ã®ç§»è¡Œè¨ˆç”»

#### **Phase 1: ä¸¦è¡Œé‹ç”¨æœŸé–“ï¼ˆ1-2é€±é–“ï¼‰**

```typescript
// æ—¢å­˜ã‚·ã‚¹ãƒ†ãƒ ã¨ã®ä¸¦è¡Œãƒ‡ãƒ¼ã‚¿åé›†
async function dualModeCollection(workId: string, apiData: any): Promise<void> {
  // 1. æ—¢å­˜å½¢å¼ã§ã®ãƒ‡ãƒ¼ã‚¿æ›´æ–°ï¼ˆç¾è¡Œã‚·ã‚¹ãƒ†ãƒ ç¶­æŒï¼‰
  await updateExistingWorkData(workId, apiData);
  
  // 2. æ–°å½¢å¼ã§ã®æ™‚ç³»åˆ—ãƒ‡ãƒ¼ã‚¿åé›†ï¼ˆä¸¦è¡Œãƒ†ã‚¹ãƒˆï¼‰
  await collectTimeSeriesData(workId, apiData);
  
  // 3. ãƒ‡ãƒ¼ã‚¿æ•´åˆæ€§ãƒã‚§ãƒƒã‚¯
  await validateDataConsistency(workId);
}
```

#### **Phase 2: å±¥æ­´ãƒ‡ãƒ¼ã‚¿ã®ä¸€æ‹¬ç§»è¡Œ**

```typescript
async function migrateHistoricalData(): Promise<void> {
  const migrationBatch = new MigrationBatch({
    batchSize: 100,
    delayMs: 1000
  });
  
  // 1. æ—¢å­˜ä½œå“ãƒ‡ãƒ¼ã‚¿ã®å–å¾—
  const existingWorks = await getAllExistingWorks();
  
  for (const workBatch of migrationBatch.createBatches(existingWorks)) {
    await Promise.all(
      workBatch.map(async (work) => {
        // 2. åˆæœŸã‚¹ãƒŠãƒƒãƒ—ã‚·ãƒ§ãƒƒãƒˆä½œæˆ
        const initialSnapshot = createInitialSnapshot(work);
        
        // 3. æ—¥æ¬¡é›†è¨ˆãƒ‡ãƒ¼ã‚¿ã¨ã—ã¦ä¿å­˜
        await saveDailyAggregate(
          work.id,
          formatDate(work.lastUpdated),
          initialSnapshot
        );
      })
    );
  }
}
```

#### **Phase 3: åˆ‡ã‚Šæ›¿ãˆã¨ã‚¯ãƒªãƒ¼ãƒ³ã‚¢ãƒƒãƒ—**

```typescript
// æ–°ã‚·ã‚¹ãƒ†ãƒ ã¸ã®å®Œå…¨åˆ‡ã‚Šæ›¿ãˆ
async function switchToTimeSeriesSystem(): Promise<void> {
  // 1. ãƒ•ã‚£ãƒ¼ãƒãƒ£ãƒ¼ãƒ•ãƒ©ã‚°ã®æ›´æ–°
  await updateFeatureFlag('USE_TIME_SERIES_DATA', true);
  
  // 2. æ—§ãƒ‡ãƒ¼ã‚¿å½¢å¼ã®æ›´æ–°åœæ­¢
  await disableLegacyUpdates();
  
  // 3. ã‚¯ãƒªãƒ¼ãƒ³ã‚¢ãƒƒãƒ—ã‚¸ãƒ§ãƒ–ã®ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«
  await scheduleLegacyDataCleanup();
}
```

### ãƒ‡ãƒ¼ã‚¿æ•´åˆæ€§ä¿è¨¼

```typescript
interface DataIntegrityCheck {
  // ç§»è¡Œå‰å¾Œã®ãƒ‡ãƒ¼ã‚¿æ¤œè¨¼
  async validateMigration(workId: string): Promise<ValidationResult> {
    const legacy = await getLegacyData(workId);
    const timeSeries = await getTimeSeriesData(workId);
    
    return {
      priceMatch: legacy.price === timeSeries.latestPrice,
      salesMatch: legacy.dlCount === timeSeries.latestDownloadCount,
      ratingMatch: Math.abs(legacy.rating - timeSeries.latestRating) < 0.01,
      overallValid: this.calculateOverallValidity()
    };
  }
}
```

---

## âš¡ ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æœ€é©åŒ–

### ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹æˆ¦ç•¥

```typescript
// Firestoreè¤‡åˆã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹å®šç¾©
const timeSeriesIndexes = [
  {
    collection: 'dlsite-time-series/raw-data/{workId}',
    fields: [
      { field: 'timestamp', order: 'DESCENDING' }
    ]
  },
  {
    collection: 'dlsite-time-series/daily-aggregates/{workId}',
    fields: [
      { field: 'date', order: 'DESCENDING' }
    ]
  }
];
```

### ã‚­ãƒ£ãƒƒã‚·ãƒ¥æˆ¦ç•¥

```typescript
class TimeSeriesCache {
  private cache = new Map<string, CachedData>();
  private readonly TTL = 5 * 60 * 1000; // 5åˆ†
  
  async getChartData(
    workId: string,
    region: Region,
    days: number
  ): Promise<ChartData> {
    const cacheKey = `${workId}-${region}-${days}`;
    const cached = this.cache.get(cacheKey);
    
    // ã‚­ãƒ£ãƒƒã‚·ãƒ¥ãƒ’ãƒƒãƒˆ
    if (cached && Date.now() - cached.timestamp < this.TTL) {
      return cached.data;
    }
    
    // ã‚­ãƒ£ãƒƒã‚·ãƒ¥ãƒŸã‚¹ - ãƒ‡ãƒ¼ã‚¿å–å¾—
    const data = await this.fetchChartData(workId, region, days);
    
    // ã‚­ãƒ£ãƒƒã‚·ãƒ¥æ›´æ–°
    this.cache.set(cacheKey, {
      data,
      timestamp: Date.now()
    });
    
    return data;
  }
}
```

### ã‚¯ã‚¨ãƒªæœ€é©åŒ–

```typescript
// åŠ¹ç‡çš„ãªãƒ‡ãƒ¼ã‚¿å–å¾—
async function getOptimizedTimeSeriesData(
  workId: string,
  dateRange: DateRange
): Promise<TimeSeriesData[]> {
  // æ—¥æ•°ã«å¿œã˜ã¦å–å¾—æˆ¦ç•¥ã‚’å¤‰æ›´
  const days = calculateDays(dateRange);
  
  if (days <= 7) {
    // 7æ—¥ä»¥å†…ï¼šç”Ÿãƒ‡ãƒ¼ã‚¿ã‹ã‚‰ç›´æ¥å–å¾—
    return getRawTimeSeriesData(workId, dateRange);
  } else if (days <= 90) {
    // 90æ—¥ä»¥å†…ï¼šæ—¥æ¬¡é›†è¨ˆãƒ‡ãƒ¼ã‚¿ä½¿ç”¨
    return getDailyAggregates(workId, dateRange);
  } else {
    // 90æ—¥è¶…ï¼šæœˆæ¬¡ã‚µãƒãƒª + æ—¥æ¬¡é›†è¨ˆã®çµ„ã¿åˆã‚ã›
    return getCombinedTimeSeriesData(workId, dateRange);
  }
}
```

### ãƒ¡ãƒ¢ãƒªåŠ¹ç‡åŒ–

```typescript
// ã‚¹ãƒˆãƒªãƒ¼ãƒŸãƒ³ã‚°å‡¦ç†ã«ã‚ˆã‚‹å¤§é‡ãƒ‡ãƒ¼ã‚¿å¯¾å¿œ
async function* streamTimeSeriesData(
  workId: string,
  dateRange: DateRange
): AsyncGenerator<TimeSeriesDataChunk> {
  const pageSize = 100;
  let lastDocId: string | null = null;
  
  while (true) {
    const query = db
      .collection(`dlsite-time-series/daily-aggregates/${workId}`)
      .where('date', '>=', dateRange.start)
      .where('date', '<=', dateRange.end)
      .orderBy('date', 'desc')
      .limit(pageSize);
      
    if (lastDocId) {
      query.startAfter(lastDocId);
    }
    
    const snapshot = await query.get();
    
    if (snapshot.empty) break;
    
    yield {
      data: snapshot.docs.map(doc => doc.data()),
      hasMore: snapshot.size === pageSize
    };
    
    lastDocId = snapshot.docs[snapshot.size - 1].id;
  }
}
```

---

## ğŸ“Š UI/UXå®Ÿè£…ä¾‹

### ãƒãƒ£ãƒ¼ãƒˆã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆå®Ÿè£…

```typescript
// Next.js ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆä¾‹
export function PriceHistoryChart({ workId }: Props) {
  const [region, setRegion] = useState<Region>('JP');
  const [dateRange, setDateRange] = useState(30); // æ—¥æ•°
  
  const { data, loading } = useTimeSeriesData(workId, region, dateRange);
  
  if (loading) return <ChartSkeleton />;
  
  return (
    <div className="price-history-chart">
      <ChartControls>
        <RegionSelector value={region} onChange={setRegion} />
        <DateRangeSelector value={dateRange} onChange={setDateRange} />
      </ChartControls>
      
      <ResponsiveContainer width="100%" height={400}>
        <LineChart data={data}>
          <CartesianGrid strokeDasharray="3 3" />
          <XAxis dataKey="date" />
          <YAxis />
          <Tooltip content={<CustomTooltip region={region} />} />
          <Line 
            type="monotone" 
            dataKey="price" 
            stroke="#ff7e2d"
            strokeWidth={2}
          />
          {/* å‰²å¼•æœŸé–“ã®ãƒã‚¤ãƒ©ã‚¤ãƒˆ */}
          {data.campaigns.map(campaign => (
            <ReferenceArea
              key={campaign.id}
              x1={campaign.start}
              x2={campaign.end}
              fill="#ff7e2d"
              fillOpacity={0.1}
            />
          ))}
        </LineChart>
      </ResponsiveContainer>
    </div>
  );
}
```

### ã‚«ã‚¹ã‚¿ãƒ ãƒ•ãƒƒã‚¯å®Ÿè£…

```typescript
function useTimeSeriesData(
  workId: string,
  region: Region,
  days: number
) {
  const [data, setData] = useState<ChartData | null>(null);
  const [loading, setLoading] = useState(true);
  const [error, setError] = useState<Error | null>(null);
  
  useEffect(() => {
    let cancelled = false;
    
    async function fetchData() {
      try {
        setLoading(true);
        setError(null);
        
        const response = await fetch(
          `/api/time-series/${workId}?region=${region}&days=${days}`
        );
        
        if (!response.ok) throw new Error('Failed to fetch data');
        
        const chartData = await response.json();
        
        if (!cancelled) {
          setData(chartData);
        }
      } catch (err) {
        if (!cancelled) {
          setError(err as Error);
        }
      } finally {
        if (!cancelled) {
          setLoading(false);
        }
      }
    }
    
    fetchData();
    
    return () => {
      cancelled = true;
    };
  }, [workId, region, days]);
  
  return { data, loading, error };
}
```

---

## ğŸ’° ã‚³ã‚¹ãƒˆæœ€é©åŒ–ã¨ROIåˆ†æ

### ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ã‚³ã‚¹ãƒˆæ¯”è¼ƒ

| é …ç›® | ç¾è¡Œã‚·ã‚¹ãƒ†ãƒ  | æ™‚ç³»åˆ—ã‚·ã‚¹ãƒ†ãƒ  | å‰Šæ¸›ç‡ |
|------|------------|---------------|--------|
| ç”Ÿãƒ‡ãƒ¼ã‚¿/ä½œå“/æœˆ | 216KB | 9KBï¼ˆ7æ—¥å¾Œå‰Šé™¤ï¼‰ | 96% |
| é›†è¨ˆãƒ‡ãƒ¼ã‚¿/ä½œå“/æœˆ | ãªã— | 9KB | - |
| 3000ä½œå“ã®æœˆé–“ã‚³ã‚¹ãƒˆ | $6.48 | $0.54 | 92% |
| å¹´é–“ã‚³ã‚¹ãƒˆ | $77.76 | $6.48 | 92% |

### ã‚¯ã‚¨ãƒªã‚³ã‚¹ãƒˆæ¯”è¼ƒ

| æ“ä½œ | ç¾è¡Œã‚·ã‚¹ãƒ†ãƒ  | æ™‚ç³»åˆ—ã‚·ã‚¹ãƒ†ãƒ  | å‰Šæ¸›ç‡ |
|------|------------|---------------|--------|
| 30æ—¥ãƒãƒ£ãƒ¼ãƒˆè¡¨ç¤º | 720ãƒªãƒ¼ãƒ‰ | 30ãƒªãƒ¼ãƒ‰ | 96% |
| ä¾¡æ ¼æ¯”è¼ƒï¼ˆ6åœ°åŸŸï¼‰ | 4320ãƒªãƒ¼ãƒ‰ | 30ãƒªãƒ¼ãƒ‰ | 99% |
| æœˆé–“ã‚¯ã‚¨ãƒªã‚³ã‚¹ãƒˆ | $12.96 | $0.54 | 96% |

### ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æ”¹å–„

| æŒ‡æ¨™ | ç¾è¡Œ | æ”¹å–„å¾Œ | å‘ä¸Šç‡ |
|------|------|--------|--------|
| ãƒãƒ£ãƒ¼ãƒˆåˆæœŸè¡¨ç¤º | 1200ms | 60ms | 20å€ |
| ãƒ‡ãƒ¼ã‚¿å¯†åº¦ | 720ç‚¹/æœˆ | 30ç‚¹/æœˆ | é©æ­£åŒ– |
| ã‚­ãƒ£ãƒƒã‚·ãƒ¥ãƒ’ãƒƒãƒˆç‡ | 0% | 80% | - |

---

## ğŸš€ æ™‚ç³»åˆ—ãƒ‡ãƒ¼ã‚¿å®Ÿè£…ãƒ­ãƒ¼ãƒ‰ãƒãƒƒãƒ—

### Phase 1: åŸºç›¤æ§‹ç¯‰ï¼ˆ2é€±é–“ï¼‰

- [ ] Firestoreã‚³ãƒ¬ã‚¯ã‚·ãƒ§ãƒ³è¨­è¨ˆãƒ»ä½œæˆ
- [ ] Individual Info APIãƒãƒƒãƒ”ãƒ³ã‚°å®Ÿè£…
- [ ] ç”Ÿãƒ‡ãƒ¼ã‚¿åé›†æ©Ÿèƒ½ã®å®Ÿè£…
- [ ] åŸºæœ¬çš„ãªé›†è¨ˆãƒ­ã‚¸ãƒƒã‚¯å®Ÿè£…

### Phase 2: æ—¥æ¬¡é›†è¨ˆã‚·ã‚¹ãƒ†ãƒ ï¼ˆ2é€±é–“ï¼‰

- [ ] æ—¥æ¬¡é›†è¨ˆCloud Functionå®Ÿè£…
- [ ] 6åœ°åŸŸä¾¡æ ¼é›†è¨ˆã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ 
- [ ] è²©å£²æ•°ãƒ»è©•ä¾¡ã®é›†è¨ˆãƒ­ã‚¸ãƒƒã‚¯
- [ ] ãƒ‡ãƒ¼ã‚¿ã‚¯ãƒªãƒ¼ãƒ³ã‚¢ãƒƒãƒ—æ©Ÿèƒ½

### Phase 3: APIãƒ»UIå®Ÿè£…ï¼ˆ3é€±é–“ï¼‰

- [ ] æ™‚ç³»åˆ—ãƒ‡ãƒ¼ã‚¿APIå®Ÿè£…
- [ ] ãƒãƒ£ãƒ¼ãƒˆã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆä½œæˆ
- [ ] ã‚«ã‚¹ã‚¿ãƒ ãƒ•ãƒƒã‚¯ãƒ»ã‚­ãƒ£ãƒƒã‚·ãƒ¥å®Ÿè£…
- [ ] åœ°åŸŸåˆ‡ã‚Šæ›¿ãˆãƒ»æœŸé–“é¸æŠUI

### Phase 4: ç§»è¡Œãƒ»æœ€é©åŒ–ï¼ˆ2é€±é–“ï¼‰

- [ ] æ—¢å­˜ãƒ‡ãƒ¼ã‚¿ã®ç§»è¡Œãƒãƒƒãƒ
- [ ] ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ãƒãƒ¥ãƒ¼ãƒ‹ãƒ³ã‚°
- [ ] ç›£è¦–ãƒ»ã‚¢ãƒ©ãƒ¼ãƒˆè¨­å®š
- [ ] ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆæ•´å‚™

---

## ğŸ“‹ æˆåŠŸæŒ‡æ¨™

### æŠ€è¡“æŒ‡æ¨™

- **ãƒ‡ãƒ¼ã‚¿åŠ¹ç‡**: ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸96%å‰Šæ¸›é”æˆ
- **ã‚¯ã‚¨ãƒªæ€§èƒ½**: 20å€ã®è¡¨ç¤ºé€Ÿåº¦å‘ä¸Š
- **å¯ç”¨æ€§**: 99.9%ã®ã‚¢ãƒƒãƒ—ã‚¿ã‚¤ãƒ ç¶­æŒ
- **ç²¾åº¦**: æ—¥æ¬¡é›†è¨ˆã®99%æ­£ç¢ºæ€§

### ãƒ“ã‚¸ãƒã‚¹æŒ‡æ¨™

- **ãƒ¦ãƒ¼ã‚¶ãƒ¼ä½“é¨“**: ãƒãƒ£ãƒ¼ãƒˆè¡¨ç¤ºã®ä½“æ„Ÿé€Ÿåº¦å‘ä¸Š
- **åˆ†æç²¾åº¦**: ä¾¡æ ¼ãƒˆãƒ¬ãƒ³ãƒ‰ã®æ˜ç¢ºãªå¯è¦–åŒ–
- **ã‚°ãƒ­ãƒ¼ãƒãƒ«å¯¾å¿œ**: 6åœ°åŸŸã®ä¾¡æ ¼æ¯”è¼ƒå®Ÿç¾
- **é‹ç”¨ã‚³ã‚¹ãƒˆ**: 92%ã®ã‚¤ãƒ³ãƒ•ãƒ©ã‚³ã‚¹ãƒˆå‰Šæ¸›

---

**ãƒãƒ¼ã‚¸ãƒ§ãƒ³**: 6.0 (100% API-Only ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£)  
**ä½œæˆæ—¥**: 2025-07-07  
**æœ€çµ‚æ›´æ–°**: 2025-07-07  
**ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹**: é©æ–°å®Œäº†ï¼ˆå®Œå…¨ã‚¹ã‚¯ãƒ¬ã‚¤ãƒ”ãƒ³ã‚°å»ƒæ­¢ãƒ»100%APIåŒ–ãƒ»dlsite-detail-parser.tså‰Šé™¤ãƒ»ç©¶æ¥µæœ€é©åŒ–ï¼‰
